<!doctype html>
<html lang="pl" data-lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boli Help ‚Äî Strona g≈Ç√≥wna</title>
  <meta name="theme-color" content="#0e1230" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="/icons/icon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="/icons/icon-512.png">

  <!-- CSS (pozostawiam v=10 jak u Ciebie) -->
  <link rel="stylesheet" href="assets/style.css?v=10" />

  <style>
    html,body{height:100%}
    body[data-page="home"]{
      position:relative; background:#0e1230 !important; color:#eef2ff;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body[data-page="home"]::before,
    body[data-page="home"]::after,
    body[data-page="home"] .container::before,
    body[data-page="home"] .container::after{content:none !important;display:none !important}

    .bh-wallpaper,.bh-grid{position:fixed;inset:0;pointer-events:none}
    .bh-wallpaper{
      z-index:0;
      background:
        radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.30), transparent 60%),
        radial-gradient(36vw 30vh at 84% 10%, rgba(94,234,212,.22), transparent 60%),
        radial-gradient(40vw 44vh at 20% 88%, rgba(164,107,255,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
      filter: blur(10px) saturate(118%);
    }
    .bh-grid{
      z-index:1; opacity:.22;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='104' viewBox='0 0 120 104'%3E%3Cg fill='none' stroke='rgba(173,216,255,0.26)' stroke-width='1'%3E%3Cpolygon points='30,0 90,0 120,52 90,104 30,104 0,52'/%3E%3C/g%3E%3C/svg%3E");
      background-size:160px 138px; background-position:center;
    }
    .bh-floor-fade{ position:fixed; left:0; right:0; bottom:0; height:120px; z-index:2; pointer-events:none;
      background:linear-gradient(180deg, rgba(14,18,48,0), rgba(14,18,48,.35) 55%, rgba(14,18,48,.6)); }
    .container{position:relative;z-index:3;background:transparent !important;max-width:1100px;margin:0 auto;padding:0 16px}

    /* Siatka kart */
    @media (min-width:981px){ section.stack[style]{grid-template-columns:repeat(3,1fr) !important;} }
    @media (max-width:980px){ section.stack[style]{grid-template-columns:repeat(2,1fr) !important;} }
    @media (max-width:640px){ section.stack[style]{grid-template-columns:1fr !important;} }
    section.stack[style] > *{grid-column:auto !important;min-width:0 !important}

    .card{border-radius:18px;overflow:hidden;background:rgba(60,32,100,.32);border:1px solid rgba(164,107,255,.22);
      box-shadow:0 10px 22px rgba(255,110,199,.12), 0 0 0 1px rgba(164,107,255,.14) inset;min-height:240px}
    .card a{display:grid;grid-template-rows:minmax(180px,240px) auto;height:100%;text-decoration:none;color:inherit}
    .card img{width:100%;height:100%;object-fit:contain;object-position:center;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02))}
    .card .caption{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px 14px;
      border-top:1px solid rgba(164,107,255,.22);background:rgba(255,255,255,.04)}

    /* Pigu≈Çki */
    :root{ --bhG:34,227,160; --bhG2:20,160,120; }
    .situations .pill{
      display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:14px; text-decoration:none; font-weight:900;
      border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06); color:#fff; transition:.2s ease;
    }
    .situations .pill .ico{
      display:inline-grid; place-items:center; width:22px; height:22px; border-radius:6px;
      background: rgba(164,107,255,.18); box-shadow: inset 0 0 0 1px rgba(164,107,255,.25);
    }
    .situations .pill.pill--green{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)), rgba(var(--bhG2), .15);
      color:#ffffff; border:1px solid rgba(var(--bhG), .55);
      box-shadow:0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(var(--bhG), .25) inset, 0 0 18px rgba(var(--bhG), .18);
      backdrop-filter:saturate(125%) blur(4px);
    }
    .situations .pill.pill--green:hover,
    .situations .pill.pill--green:focus-visible{
      transform:translateY(-1px); border-color:rgba(var(--bhG), .85);
      box-shadow:0 14px 26px rgba(8,10,22,.45), 0 0 0 2px rgba(var(--bhG), .65), 0 0 26px rgba(var(--bhG), .45);
      outline:none;
    }
    /* Niebieska pigu≈Çka ‚Äì Gry / Trening */
    .situations .pill.pill--blue{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)), rgba(96,165,250,.18);
      border:1px solid rgba(59,130,246,.6);
      box-shadow:0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(59,130,246,.35) inset, 0 0 18px rgba(96,165,250,.30);
      color:#eaf2ff;
    }
    .situations .pill.pill--blue:hover,
    .situations .pill.pill--blue:focus-visible{
      transform:translateY(-1px); border-color:rgba(59,130,246,.9);
      box-shadow:0 14px 26px rgba(8,10,22,.45), 0 0 0 2px rgba(96,165,250,.65), 0 0 26px rgba(96,165,250,.5);
      outline:none;
    }

    /* apteka24 ‚Äì ≈õwiecƒÖcy badge */
    #btn-apteka .badge-round{
      background: rgba(var(--bhG), .18);
      color: #eafff7;
      border:1px solid rgba(var(--bhG), .55);
      box-shadow:0 6px 18px rgba(8,10,22,.35), inset 0 0 0 1px rgba(var(--bhG), .20), 0 0 14px rgba(var(--bhG), .30);
      font-weight:800; letter-spacing:.2px; border-radius:999px; padding:6px 10px; text-transform:none;
      animation: bh-green-pulse 2.4s ease-in-out infinite;
    }
    @keyframes bh-green-pulse{
      0%{ box-shadow:0 0 0 0 rgba(var(--bhG), .00), 0 0 12px rgba(var(--bhG), .18) }
      50%{ box-shadow:0 0 0 6px rgba(var(--bhG), .12), 0 0 22px rgba(var(--bhG), .35) }
      100%{ box-shadow:0 0 0 0 rgba(var(--bhG), .00), 0 0 12px rgba(var(--bhG), .18) }
    }

    /* Obrazek w PORADZIE (png) */
    .bh2025-porada__svg img{
      max-width:100%; height:auto; display:block; border-radius:12px;
      border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.04);
    }

    /* Modale ukryte (twardo) */
    .bh2025-modal[aria-hidden="true"],
    .bh2025-porada[aria-hidden="true"]{ display:none }

    /* QUIZ ‚Äì poprawiona czytelno≈õƒá */
    .bh2025-cta-quiz{appearance:none;border:1px solid rgba(164,107,255,.28);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color:#eef2ff;border-radius:14px;padding:10px 14px;font-weight:800;cursor:pointer}
    .bh2025-modal{position:fixed;inset:0;z-index:9999;background:radial-gradient(50% 50% at 50% 50%, rgba(14,18,48,.88), rgba(14,18,48,.92));backdrop-filter:saturate(120%) blur(6px)}
    .bh2025-modal__panel{position:relative;max-width:720px;margin:6vh auto;background:rgba(60,32,100,.36);border:1px solid rgba(164,107,255,.25);border-radius:18px;padding:16px;color:#eef2ff}
    .bh2025-q{color:#ffffff;font-weight:900;letter-spacing:.2px}
    .bh2025-answers .bh2025-ans{display:block;width:100%;text-align:left;margin:8px 0;padding:10px 12px;border-radius:12px;
      border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.08);cursor:pointer;color:#ffffff}
    .bh2025-answers .bh2025-ans:hover{box-shadow:0 10px 20px rgba(0,0,0,.25);transform:translateY(-1px)}
    .bh2025-ans.correct{box-shadow:0 0 0 2px rgba(94,234,212,.65)}
    .bh2025-ans.wrong{box-shadow:0 0 0 2px rgba(255,107,107,.7)}
    .bh2025-progress{display:flex;align-items:center;gap:10px;margin:8px 0 12px}
    .bh2025-progress__bar{flex:1;height:12px;border-radius:999px;outline:1px solid rgba(255,255,255,.14);background:linear-gradient(90deg,#5eead4,#ff6ec7);position:relative;overflow:hidden}
    .bh2025-progress__cursor{position:absolute;top:50%;transform:translate(-50%,-50%);left:6%;width:16px;height:16px;border-radius:50%;background:#fff;box-shadow:0 0 0 2px rgba(94,234,212,.35)}

    /* PORADA modal */
    .bh2025-porada{position:fixed;inset:0;z-index:9998;background:radial-gradient(50% 50% at 50% 50%, rgba(14,18,48,.9), rgba(14,18,48,.95));backdrop-filter:saturate(120%) blur(6px)}
    .bh2025-porada__panel{position:relative;max-width:980px;margin:5vh auto;background:rgba(60,32,100,.36);border:1px solid rgba(164,107,255,.25);border-radius:18px;padding:16px;color:#eef2ff}
    .bh2025-porada__grid{display:grid;grid-template-columns:1.1fr 1fr;gap:14px}
    @media (max-width:900px){ .bh2025-porada__grid{grid-template-columns:1fr} }
    .bh2025-steps{border-radius:14px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.05);padding:12px}

    /* Selektor jƒôzyka */
    .langpick{display:flex;gap:8px;align-items:center;margin-left:12px}
    .langpick label{font-weight:800;color:#cfe2ff;font-size:13px}
    .langpick select{
      appearance:none;background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.24);
      color:#ffffff; border-radius:10px;padding:6px 10px;cursor:pointer;font-weight:900;letter-spacing:.3px
    }
    .langpick option{ color:#0e1230; background:#ffffff }

    /* Wyszukiwarka ‚Äì panel podpowiedzi (izolowany) */
    .bh2025-suggest{position:absolute;right:0;left:0;top:100%;margin-top:6px;z-index:50;
      background:rgba(60,32,100,.96); border:1px solid rgba(164,107,255,.28); border-radius:12px;
      box-shadow:0 16px 34px rgba(8,10,22,.52); overflow:hidden; display:none}
    .bh2025-suggest[aria-hidden="false"]{display:block}
    .bh2025-sg-head{padding:8px 12px; font-weight:800; letter-spacing:.2px; color:#cfe2ff;
      border-bottom:1px solid rgba(164,107,255,.18); background:rgba(255,255,255,.03)}
    .bh2025-sg-list{list-style:none;margin:0;padding:6px}
    .bh2025-sg-item{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:10px;
      cursor:pointer; color:#eef2ff; text-decoration:none; border:1px solid transparent}
    .bh2025-sg-item:hover,
    .bh2025-sg-item[aria-selected="true"]{background:rgba(255,255,255,.06); border-color:rgba(164,107,255,.28);
      box-shadow:inset 0 0 0 1px rgba(164,107,255,.16)}
    .bh2025-sg-ico{width:18px;height:18px;display:inline-grid;place-items:center;border-radius:6px;
      background:rgba(164,107,255,.18); font-size:12px}
    .bh2025-sg-sub{margin-left:auto;font-size:12px;color:#b8c2e0}
    .header .tools .search{position:relative}
  </style>
</head>

<body data-page="home">
  <div class="bh-wallpaper" aria-hidden="true"></div>
  <div class="bh-grid" aria-hidden="true"></div>
  <div class="bh-floor-fade" aria-hidden="true"></div>

  <div class="container">
    <header class="header">
      <div class="brand">
        <h1 data-i18n="brand_title">Boli Help</h1>
        <small data-i18n="brand_sub">Pomoc i pierwsza pomoc w nag≈Çych sytuacjach</small>
      </div>
      <div class="tools" style="display:flex;align-items:center;gap:10px">
        <div class="search" role="search">
          <input id="bhSearch" type="search" placeholder="Szukaj objawu, czƒô≈õci cia≈Ça lub tematu‚Ä¶" aria-label="Szukaj" />
          <svg id="bhSearchIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" style="cursor:pointer">
            <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
                  stroke="white" stroke-opacity=".7" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <!-- T≈Çumacz (USUNIƒòTY: langpick) -->
      </div>
    </header>

    <div class="emergency-list" aria-label="Telefony alarmowe">
      <a href="tel:112">üìû 112</a><a href="tel:999">üöë 999</a><a href="tel:998">üî• 998</a><a href="tel:997">üëÆ 997</a>
    </div>

    <nav class="situations" aria-label="Sytuacje nag≈Çe">
      <a class="pill pill--green" data-porada="zadlawienie" href="szczegoly.html?typ=porada&czesc=zadlawienie&label=Zad%C5%82awienie">
        <span class="ico">ü´Å</span><span data-i18n="pill_choke">Zad≈Çawienie</span>
      </a>
      <a class="pill pill--green" data-porada="reanimacja" href="szczegoly.html?typ=porada&czesc=reanimacja&label=Reanimacja">
        <span class="ico">üöë</span><span data-i18n="pill_cpr">Reanimacja</span>
      </a>
      <a class="pill pill--green" data-porada="wypadek" href="szczegoly.html?typ=porada&czesc=wypadek&label=Wypadek">
        <span class="ico">üí•</span><span data-i18n="pill_accident">Wypadek</span>
      </a>
      <a class="pill pill--green" data-porada="pierwszopomoc" href="szczegoly.html?typ=porada&czesc=pierwszopomoc&label=Pierwsza%20pomoc">
        <span class="ico">‚ù§Ô∏è‚Äçü©π</span><span data-i18n="pill_firstaid">Pierwsza pomoc</span>
      </a>
      <a class="pill pill--blue" href="gry.html">
        <span class="ico">üéÆ</span><span data-i18n="pill_games">Gry / Trening</span>
      </a>
      <!-- NOWY GUZIK: Quizy -->
      <a class="pill pill--blue" href="quizzes.html" id="btn-quizzes">
        <span class="ico">üß†</span><span data-i18n="pill_quizzes">Quizy</span>
      </a>
    </nav>

    <!-- Launcher mini-quizu (USUNIƒòTY) -->

    <div class="actions" role="navigation" aria-label="Szybkie akcje">
      <button id="btn-112" class="btn btn--red btn--call" type="button">üìû 112</button>
      <button id="btn-hosp" class="btn btn--hosp" type="button" data-i18n="btn_hosp">üè• Szpitale / SOR</button>
      <a id="btn-apteka" class="btn" href="https://www.google.com/maps/search/apteka+otwarta+teraz/" target="_blank" rel="noopener">
        <span class="badge-round">apteka24</span></a>
      <button id="btn-loc" class="btn" type="button" data-i18n="btn_loc">üìç Zlokalizuj mnie</button>
    </div>

    <div class="subheadline" data-i18n="subheadline">Boli mnie ‚Äî wybierz obszar b√≥lu</div>

    <!-- 3 kafelki -->
    <section class="stack" aria-label="Wyb√≥r postaci"
      style="display:grid;gap:16px;grid-template-columns:repeat(3,1fr);align-items:stretch;">
      <article class="card">
        <a href="kobieta.html">
          <img src="img/kobieta-model1.png" alt="Kobieta ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3 data-i18n="card_woman">Kobieta</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
      <article class="card">
        <a href="mezczyzna.html">
          <img src="img/mezczyzna-model1.png" alt="Mƒô≈ºczyzna ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3 data-i18n="card_man">Mƒô≈ºczyzna</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
      <article class="card">
        <a href="dziecko.html">
          <img src="img/dziecko-model1.png" alt="Dziecko ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3 data-i18n="card_child">Dziecko</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
    </section>
  </div>

  <!-- Modal QUIZ (USUNIƒòTY) -->

  <!-- Modal PORADA -->
  <div id="bh2025Porada" class="bh2025-porada" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="bh2025PoradaTitle">
    <div class="bh2025-porada__panel">
      <div class="bh2025-porada__head">
        <div class="bh2025-porada__title" id="bh2025PoradaTitle" data-i18n="advice_title">Porada</div>
        <div class="bh2025-chip" id="bh2025PoradaChip" data-i18n="advice_chip">SOS ‚Ä¢ instrukcja</div>
        <button class="bh2025-close--porada" type="button" id="bh2025PoradaClose" aria-label="Zamknij" data-i18n="close_btn">‚úï</button>
      </div>
      <div class="bh2025-porada__grid">
        <div class="bh2025-porada__svg" id="bh2025PoradaSvg" aria-label="Instrukcja obrazkowa"></div>
        <div class="bh2025-steps"><ol id="bh2025PoradaSteps"></ol></div>
      </div>
      <div class="bh2025-video">
        <div class="bh2025-muted" style="margin-bottom:8px;font-weight:800" data-i18n="video_head">Materia≈Ç wideo</div>
        <div id="bh2025VideoWrap"><div class="ph" id="bh2025VideoPh"><span>üé¨</span><span data-i18n="video_hint">Dodaj plik: <code>assets/videos/&lt;nazwa&gt;.mp4</code> i zaktualizuj mapƒô poni≈ºej.</span></div></div>
      </div>
    </div>
  </div>

  <!-- Skrypt bazowy strony -->
  <script src="assets/main.js?v=10"></script>

  <!-- (USUNIƒòTY) I18N translator -->
  <!-- (USUNIƒòTY) QUIZ skrypt -->

  <!-- PORADY (klik pigu≈Çek przechwycony w capture) -->
  <script>
  (function(){
    const poradaModal  = document.getElementById('bh2025Porada');
    const poradaClose  = document.getElementById('bh2025PoradaClose');
    const poradaTitle  = document.getElementById('bh2025PoradaTitle');
    const svgWrap      = document.getElementById('bh2025PoradaSvg');
    const stepsOl      = document.getElementById('bh2025PoradaSteps');
    const videoWrap    = document.getElementById('bh2025VideoWrap');
    const videoPh      = document.getElementById('bh2025VideoPh');
    if(!poradaModal || poradaModal.dataset.bhBound) return; poradaModal.dataset.bhBound='1';

    const IMG = { zadlawienie: 'img/zadlawienie.png', reanimacja: 'img/reanimacja.png', wypadek: 'img/wypadek.png', pierwszopomoc: null };
    const STEPS = {
      pl:{
        zadlawienie:["Zachƒôcaj do kaszlu ‚Äî je≈õli skuteczny, obserwuj.","Brak skutecznego kaszlu: 5 uderze≈Ñ w plecy miƒôdzy ≈Çopatki.","Je≈õli nieskuteczne: 5 uci≈õniƒôƒá nadbrzusza.","Na zmianƒô: 5 plecy ‚Üî 5 nadbrzusze, a≈º do skutku.","Utrata przytomno≈õci: RKO 30:2, 112, AED."],
        reanimacja:["Sprawd≈∫ bezpiecze≈Ñstwo, reakcjƒô i oddech (max 10 s).","Brak oddechu: zadzwo≈Ñ 112.","Uciski: 100‚Äì120/min, g≈Çƒôb. 5‚Äì6 cm, ≈õrodek mostka.","Po 30 uci≈õniƒôciach 2 oddechy (je≈õli umiesz i chcesz).","Kontynuuj do przyjazdu s≈Çu≈ºb lub powrotu oddechu."],
        wypadek:["Zabezpiecz miejsce.","Oce≈Ñ liczbƒô poszkodowanych i zagro≈ºenia.","Wezwij 112.","Priorytet: oddech, krwotoki (ucisk).","Nie przestawiaj bez potrzeby."],
        pierwszopomoc:["ABC: dro≈ºno≈õƒá, oddech, krƒÖ≈ºenie.","Pozycja bezpieczna przy oddechu.","Ucisk krwotok√≥w.","Oparzenia: ch≈Çodzenie 20 min.","Wezwij pomoc, gdy masz wƒÖtpliwo≈õci."]
      },
      en:{
        zadlawienie:["Encourage coughing ‚Äî if effective, observe.","If not effective: 5 back blows.","Then 5 abdominal thrusts.","Alternate 5‚Üî5 until success.","If unconscious: CPR 30:2, call 112/911, AED."],
        reanimacja:["Check safety, response, breathing (‚â§10 s).","No breathing: call 112/911.","Compressions 100‚Äì120/min, depth 5‚Äì6 cm, center chest.","30 compressions + 2 breaths (if trained).","Continue until help arrives/returns breathing."],
        wypadek:["Make scene safe.","Assess casualties/hazards.","Call 112/911.","Priority: breathing, bleeding (direct pressure).","Do not move unnecessarily."],
        pierwszopomoc:["ABC: airway, breathing, circulation.","Recovery position if breathing.","Control bleeding.","Burns: cool 20 min.","When in doubt ‚Äî call for help."]
      }
    };
    const L = ()=> (window.__getLang && window.__getLang()) || 'pl';

    function openPorada(key, title){
      poradaTitle.textContent = title || (L()==='en'?'Advice':'Porada');
      svgWrap.innerHTML=''; const src=IMG[key];
      if(src){ const img=new Image(); img.src=src; img.alt=title||key; svgWrap.appendChild(img); }
      stepsOl.innerHTML=''; (STEPS[L()]?.[key]||[]).forEach(txt=>{ const li=document.createElement('li'); li.textContent=txt; stepsOl.appendChild(li); });
      videoWrap.innerHTML=''; videoWrap.appendChild(videoPh.cloneNode(true));
      poradaModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
    }
    function closePorada(){ poradaModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }

    const nav = document.querySelector('nav.situations');
    if(nav && !nav.dataset.bhPoradaBound){
      nav.dataset.bhPoradaBound='1';
      nav.addEventListener('click', function(e){
        const a = e.target.closest('a.pill.pill--green[data-porada]');
        if(!a) return;
        e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
        const key   = a.getAttribute('data-porada');
        const title = a.textContent.trim();
        openPorada(key, title);
      }, true);
    }

    poradaClose.addEventListener('click', closePorada);
    poradaModal.addEventListener('click', (e)=>{ if(e.target===poradaModal) closePorada(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && poradaModal.getAttribute('aria-hidden')==='false') closePorada(); });
  })();
  </script>

  <!-- WYSZUKIWARKA -->
  <script>
  (function(){
    const input = document.getElementById('bhSearch');
    const icon  = document.getElementById('bhSearchIcon');
    if(!input || input.dataset.bhSearchBound) return; input.dataset.bhSearchBound='1';

    const PARTS = [
      {id:'oko',       label:'Oko',        alias:['oko','oczy','wzrok']},
      {id:'nos',       label:'Nos',        alias:['nos','zatoki','katar']},
      {id:'gardlo',    label:'Gard≈Ço',     alias:['gardlo','gard≈Ço','angina','chrypka']},
      {id:'glowa',     label:'G≈Çowa',      alias:['glowa','g≈Çowa','migrena','b√≥l g≈Çowy']},
      {id:'klatka',    label:'Klatka piersiowa', alias:['klatka','pier≈õ','serce b√≥l','mostek']},
      {id:'pluca',     label:'P≈Çuca',      alias:['p≈Çuca','pluca','duszno≈õƒá','astma']},
      {id:'brzuch',    label:'Brzuch',     alias:['brzuch','≈ºo≈ÇƒÖdek','zoladek','wzdƒôcia','biegunka']},
      {id:'nerki',     label:'Nerki',      alias:['nerki','kolka','lƒôd≈∫wie','ledzwi']},
      {id:'plecy',     label:'Plecy',      alias:['plecy','krƒôgos≈Çup','kregoslup','rwa']},
      {id:'biodra',    label:'Biodra/Uda', alias:['biodro','biodra','udo','pachwina']},
      {id:'kolano',    label:'Kolano',     alias:['kolano','rzepka','≈ÇƒÖkotka','lakotka']},
      {id:'stopy',     label:'Stopy',      alias:['stopa','stopy','piƒôta','pieta','rozciƒôgno']},
      {id:'skora',     label:'Sk√≥ra',      alias:['skora','sk√≥ra','wysypka','≈õwiƒÖd','alergia']},
      {id:'serce',     label:'Serce',      alias:['serce','ko≈Çatania','kolatania','arytmia']},
      {id:'kaszel',    label:'Kaszel',     alias:['kaszel','kaszle']},
      {id:'goraczka',  label:'GorƒÖczka',   alias:['gorƒÖczka','goraczka','temperatura']},
      {id:'zadlawienie', label:'Zad≈Çawienie (SOS)', alias:['zad≈Çawienie','zadlawienie','zad≈Çawi≈Ç','zadlawil'] , sos:true},
      {id:'reanimacja',  label:'Reanimacja (RKO)',  alias:['reanimacja','rko','resuscytacja'] , sos:true},
      {id:'wypadek',     label:'Wypadek (SOS)',     alias:['wypadek','kolizja','potrƒÖcenie','potracenie'] , sos:true},
      {id:'pierwszopomoc',label:'Pierwsza pomoc',   alias:['pierwsza pomoc','pierwszopomoc','abc'] , sos:true}
    ];
    const GENDERS = [
      {id:'kobieta',label:'Kobieta'},{id:'mezczyzna',label:'Mƒô≈ºczyzna'},{id:'dziecko',label:'Dziecko'}
    ];

    const panel = document.createElement('div');
    panel.className = 'bh2025-suggest'; panel.setAttribute('role','listbox'); panel.setAttribute('aria-hidden','true');
    panel.innerHTML = `<div class="bh2025-sg-head">Podpowiedzi</div><ul class="bh2025-sg-list" id="bh2025List"></ul>`;
    input.parentElement.appendChild(panel);
    const list = panel.querySelector('#bh2025List');
    let results = [], active = -1;

    function buildUrls(hit){
      if(hit.sos){
        const url = `szczegoly.html?typ=porada&czesc=${encodeURIComponent(hit.id)}&label=${encodeURIComponent(hit.label)}`;
        return [{label: hit.label, url, sub:'SOS'}];
      }
      return GENDERS.map(g=>{
        const url = `szczegoly.html?typ=${g.id}&czesc=${encodeURIComponent(hit.id)}&label=${encodeURIComponent(hit.label)}`;
        return {label:`${hit.label} ‚Ä¢ ${g.label}`, url, sub:g.label};
      });
    }
    function search(q){
      const s=q.trim().toLowerCase(); if(!s) return [];
      const hits = PARTS.filter(p =>
        p.alias?.some(a => a.includes(s)) || p.id.includes(s) || p.label.toLowerCase().includes(s)
      ).slice(0,6);
      return hits.flatMap(buildUrls).slice(0,12);
    }
    function render(){
      list.innerHTML = ''; active = -1;
      results.forEach((r,idx)=>{
        const li = document.createElement('li');
        li.setAttribute('role','option'); li.className='bh2025-sg-item'; li.dataset.index = String(idx);
        li.innerHTML = `<span class="bh2025-sg-ico">üîé</span><span>${r.label}</span><span class="bh2025-sg-sub">${r.sub||''}</span>`;
        li.addEventListener('mouseenter', ()=>setActive(idx));
        li.addEventListener('mouseleave', ()=>setActive(-1));
        li.addEventListener('click', ()=>go(idx));
        list.appendChild(li);
      });
      panel.setAttribute('aria-hidden', results.length ? 'false':'true');
    }
    function setActive(i){
      active = i;
      list.querySelectorAll('.bh2025-sg-item').forEach((el,idx)=>{
        el.setAttribute('aria-selected', (idx===active)?'true':'false');
      });
    }
    function go(idx){
      const item = results[idx]; if(!item) return;
      window.location.href = item.url;
    }

    input.addEventListener('input', ()=>{ results = search(input.value); render(); });
    input.addEventListener('keydown', (e)=>{
      const shown = panel.getAttribute('aria-hidden')==='false';
      if(e.key==='ArrowDown'){ if(!shown){ results = search(input.value); render(); } setActive( (active+1+results.length)%results.length ); e.preventDefault(); }
      else if(e.key==='ArrowUp'){ if(!shown){ results = search(input.value); render(); } setActive( (active-1+results.length)%results.length ); e.preventDefault(); }
      else if(e.key==='Enter'){
        if(shown && active>=0){ e.preventDefault(); go(active); }
        else { if(!results.length){ results = search(input.value); } if(results[0]) go(0); }
      } else if(e.key==='Escape'){ panel.setAttribute('aria-hidden','true'); active=-1; }
    });
    document.addEventListener('click', (e)=>{ if(!panel.contains(e.target) && e.target!==input){ panel.setAttribute('aria-hidden','true'); active=-1; } });
    if(icon){ icon.addEventListener('click', ()=>{ results = search(input.value); if(results.length){ panel.setAttribute('aria-hidden','false'); render(); } }); }
  })();
  </script>

  <!-- Rejestracja Service Workera -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => console.log('SW zarejestrowany:', reg.scope))
        .catch(err => console.error('SW b≈ÇƒÖd:', err));
    }
  </script>

  <!-- Add to Home Screen (iOS/Android) -->
  <script src="assets/a2hs.js?v=1"></script>

  <!-- OSTATECZNY PATCH: ukrycie starego GT + kadrowanie + glow -->
  <style id="bh-final-patch">
    /* Ukryj resztki starego Google Translate je≈õli by siƒô wstrzyknƒÖ≈Ç */
    .goog-te-banner-frame.skiptranslate{display:none!important}
    .skiptranslate,.goog-te-gadget,.goog-te-combo,[id*="google_translate_element"]{display:none!important}

    /* Kadrowanie obrazk√≥w: twarz+szyja+ramiona */
    section.stack .card > a > img{
      width:100%; height:100%;
      object-fit:cover !important;
      object-position:50% 25% !important;
    }
    section.stack .card > a > img[src*="kobieta-model1"]{ object-position:50% 22% !important; transform:scale(0.95) }
    section.stack .card > a > img[src*="mezczyzna-model1"]{ object-position:50% 24% !important; transform:scale(0.95) }
    section.stack .card > a > img[src*="dziecko-model1"]{ object-position:50% 20% !important; transform:scale(0.92) }

    /* Panel podpowiedzi ‚Äì nie pokazuj gdy pusty */
    .bh2025-suggest[aria-hidden="true"]{display:none!important}

    /* Glow/puls dla akcji */
    :root{ --glow-green:34,227,160; --glow-red:255,107,107; --glow-amber:255,184,108; }
    #btn-hosp{
      border-color: rgba(var(--glow-red), .8)!important;
      box-shadow: 0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(var(--glow-red), .5) inset, 0 0 18px rgba(var(--glow-red), .35);
      animation: bhRedPulse 2.2s ease-in-out infinite;
    }
    #btn-apteka{
      border-color: rgba(var(--glow-green), .7)!important;
      box-shadow: 0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(var(--glow-green), .45) inset, 0 0 18px rgba(var(--glow-green), .35);
      animation: bhGreenPulse 2.4s ease-in-out infinite;
    }
    #btn-loc{
      border-color: rgba(var(--glow-amber), .75)!important;
      box-shadow: 0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(var(--glow-amber), .45) inset, 0 0 18px rgba(var(--glow-amber), .35);
      animation: bhAmberBreath 2.8s ease-in-out infinite;
    }
    @keyframes bhRedPulse{0%{box-shadow:0 0 0 0 rgba(var(--glow-red),.10),0 0 18px rgba(var(--glow-red),.35)}50%{box-shadow:0 0 0 8px rgba(var(--glow-red),.08),0 0 26px rgba(var(--glow-red),.55)}100%{box-shadow:0 0 0 0 rgba(var(--glow-red),.10),0 0 18px rgba(var(--glow-red),.35)}}
    @keyframes bhGreenPulse{0%{box-shadow:0 0 0 0 rgba(var(--glow-green),.10),0 0 18px rgba(var(--glow-green),.35)}50%{box-shadow:0 0 0 8px rgba(var(--glow-green),.08),0 0 26px rgba(var(--glow-green),.55)}100%{box-shadow:0 0 0 0 rgba(var(--glow-green),.10),0 0 18px rgba(var(--glow-green),.35)}}
    @keyframes bhAmberBreath{0%{box-shadow:0 0 0 0 rgba(var(--glow-amber),.08),0 0 18px rgba(var(--glow-amber),.35)}50%{box-shadow:0 0 0 8px rgba(var(--glow-amber),.06),0 0 26px rgba(var(--glow-amber),.55)}100%{box-shadow:0 0 0 0 rgba(var(--glow-amber),.08),0 0 18px rgba(var(--glow-amber),.35)}}
  </style>
<!-- BEGIN bh-patch:translator-oneblock -->
<script>
(function(){
  if (window.__bhPatchTranslatorOneBlock__) return;
  window.__bhPatchTranslatorOneBlock__ = 1;

  // ====== STYLE (wstrzykiwany, zero dodatkowych plik√≥w) ======
  (function injectStyle(){
    var css = `
:root {
  --bh-accent:#6c5ce7; --bh-bg:rgba(255,255,255,0.75);
  --bh-shadow:0 8px 20px rgba(0,0,0,0.12);
  --bh-radius:16px; --bh-blur:saturate(1.2) blur(6px);
  --bh-z:9999; --bh-font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans","Helvetica Neue",sans-serif;
}
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:var(--bh-z);font-family:var(--bh-font)}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:var(--bh-radius);box-shadow:var(--bh-shadow);cursor:pointer;color:#1f2937;user-select:none;-webkit-tap-highlight-color:transparent;transition:transform .12s ease,background .2s ease,border-color .2s ease}
.bh-translator-btn:hover{transform:translateY(-1px)}
.bh-translator-btn:active{transform:translateY(0)}
.bh-translator-btn .bh-icn{width:18px;height:18px;flex:0 0 auto;color:var(--bh-accent)}
.bh-translator-label{font-size:14px;line-height:1;font-weight:600}
.bh-translator-dd{position:absolute;right:0;margin-top:8px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:14px;box-shadow:var(--bh-shadow);min-width:200px;padding:8px;display:none}
.bh-translator-wrap[aria-expanded="true"] .bh-translator-dd{display:block}
.bh-dd-item{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;border-radius:10px;background:transparent;border:0;cursor:pointer;color:#111827;font-size:14px;font-weight:600}
.bh-dd-item:hover{background:rgba(108,92,231,.08)}
.bh-dd-item small{color:#6b7280;font-weight:500}
@media(max-width:480px){.bh-translator-btn{padding:8px 12px;gap:8px}.bh-translator-label{font-size:13px}.bh-translator-dd{min-width:180px}}
[data-bh-no-translate]{}
    `;
    var s = document.createElement('style');
    s.setAttribute('data-bh-style','translator');
    s.appendChild(document.createTextNode(css));
    document.head.appendChild(s);
  })();

  // ====== USTAWIENIA ======
  var STORE_KEY='bh-lang';
  var SUPPORTED=[{code:'pl',label:'Polski'},{code:'en',label:'English'},{code:'de',label:'Deutsch'},{code:'uk',label:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞'}];
  var EMBED={
    en:{"Szukaj":"Search","Telefon alarmowy":"Emergency phone","Pierwsza pomoc":"First Aid","Apteka":"Pharmacy","Szpital":"Hospital","Objawy":"Symptoms","Przyczyny":"Causes","Leki":"Medications","Na receptƒô":"Prescription","Bez recepty":"Over-the-counter","Kiedy siƒô niepokoiƒá":"When to worry","Czerwone flagi":"Red flags"},
    de:{"Szukaj":"Suche","Telefon alarmowy":"Notruf","Pierwsza pomoc":"Erste Hilfe","Apteka":"Apotheke","Szpital":"Krankenhaus","Objawy":"Symptome","Przyczyny":"Ursachen","Leki":"Medikamente","Na receptƒô":"Verschreibungspflichtig","Bez recepty":"Rezeptfrei","Kiedy siƒô niepokoiƒá":"Wann man sich sorgen sollte","Czerwone flagi":"Rote Flaggen"},
    uk:{"Szukaj":"–ü–æ—à—É–∫","Telefon alarmowy":"–ï–∫—Å—Ç—Ä–µ–Ω–∏–π –Ω–æ–º–µ—Ä","Pierwsza pomoc":"–ü–µ—Ä—à–∞ –¥–æ–ø–æ–º–æ–≥–∞","Apteka":"–ê–ø—Ç–µ–∫–∞","Szpital":"–õ—ñ–∫–∞—Ä–Ω—è","Objawy":"–°–∏–º–ø—Ç–æ–º–∏","Przyczyny":"–ü—Ä–∏—á–∏–Ω–∏","Leki":"–õ—ñ–∫–∏","Na receptƒô":"–ó–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º","Bez recepty":"–ë–µ–∑ —Ä–µ—Ü–µ–ø—Ç—É","Kiedy siƒô niepokoiƒá":"–ö–æ–ª–∏ –≤–∞—Ä—Ç–æ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—å","Czerwone flagi":"–¢—Ä–∏–≤–æ–∂–Ω—ñ –æ–∑–Ω–∞–∫–∏"}
  };
  var saved=localStorage.getItem(STORE_KEY);
  var browser=(navigator.language||'pl').slice(0,2).toLowerCase();
  var DEFAULT='pl';
  var initial=(saved && SUPPORTED.some(l=>l.code===saved))?saved:(SUPPORTED.some(l=>l.code===browser)?browser:DEFAULT);
  var active=DEFAULT, dict={};

  // ====== UI ======
  function createUI(){
    if (document.getElementById('bh-translator')) return;
    var wrap=document.createElement('div');
    wrap.className='bh-translator-wrap'; wrap.id='bh-translator';
    wrap.setAttribute('aria-expanded','false');

    var btn=document.createElement('button');
    btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML = `
      <svg class="bh-icn" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.03-9 9 4.03 9 9 9Z" stroke="currentColor" stroke-width="1.6"></path>
        <path d="M3 12h18M12 3c3 3.5 3 14 0 18M6 6c3.5 2 8.5 2 12 0M6 18c3.5-2 8.5-2 12 0" stroke="currentColor" stroke-width="1.2"></path>
      </svg>
      <span class="bh-translator-label" data-bh-no-translate>Lang: ${(initial||'pl').toUpperCase()}</span>
    `;

    var dd=document.createElement('div');
    dd.className='bh-translator-dd'; dd.setAttribute('role','menu');
    SUPPORTED.forEach(function(item){
      var el=document.createElement('button');
      el.type='button'; el.className='bh-dd-item'; el.setAttribute('data-lang',item.code);
      el.innerHTML=`<span>${item.label}</span><small>${item.code.toUpperCase()}</small>`;
      dd.appendChild(el);
    });

    wrap.appendChild(btn); wrap.appendChild(dd); document.body.appendChild(wrap);

    btn.addEventListener('click', function(){
      wrap.setAttribute('aria-expanded', wrap.getAttribute('aria-expanded')==='true'?'false':'true');
    });
    document.addEventListener('click', function(e){ if (!wrap.contains(e.target)) wrap.setAttribute('aria-expanded','false'); });
    dd.addEventListener('click', function(e){
      var b=e.target.closest('.bh-dd-item'); if(!b) return;
      var lang=b.getAttribute('data-lang'); wrap.setAttribute('aria-expanded','false'); setLanguage(lang);
    });
  }

  // ====== ≈ÅADOWANIE S≈ÅOWNIKA ======
  function loadDict(lang){
    return new Promise(function(resolve){
      if (lang==='pl') return resolve({});
      // pr√≥buj assets/i18n/{lang}.json; je≈õli brak ‚Äì wbudowany
      fetch('assets/i18n/'+lang+'.json', {cache:'no-store'})
        .then(function(r){ if(!r.ok) throw 0; return r.json(); })
        .then(function(json){ resolve(Object.assign({}, EMBED[lang]||{}, json)); })
        .catch(function(){ resolve(Object.assign({}, EMBED[lang]||{})); });
    });
  }

  // ====== T≈ÅUMACZENIE ======
  function norm(t){ return (t||'').replace(/\s+/g,' ').trim(); }
  function translateNodeText(node){
    var original=norm(node.textContent||''); if(!original) return;
    var t=dict[original]; if (t && t!==original) node.textContent=t;
  }
  function walkAndTranslate(container){
    var SKIP=function(el){ return el.closest('[data-bh-no-translate]') || el.closest('#bh-translator'); };
    // data-i18n (dok≈Çadne klucze)
    container.querySelectorAll ? container.querySelectorAll('[data-i18n]').forEach(function(el){
      if (SKIP(el)) return; var key=el.getAttribute('data-i18n'); var t=dict[key]; if (t) el.textContent=t;
    }) : null;
    // atrybuty
    container.querySelectorAll ? container.querySelectorAll('[data-i18n-attr]').forEach(function(el){
      if (SKIP(el)) return;
      var map=(el.getAttribute('data-i18n-attr')||'').split(',').map(function(s){return s.trim();});
      map.forEach(function(pair){
        var sp=pair.split('|'); var attr=(sp[0]||'').trim(); var key=(sp[1]||'').trim();
        if(!attr||!key) return; var t=dict[key]; if(t) el.setAttribute(attr,t);
      });
    }) : null;
    // proste elementy tekstowe
    var cand=container.querySelectorAll ? container.querySelectorAll('h1,h2,h3,h4,h5,h6,p,li,button,a,th,td,span,label,small,strong,em') : [];
    cand.forEach(function(el){
      if (SKIP(el)) return;
      if (el.childElementCount===0) translateNodeText(el);
    });
  }

  var moInstalled=false;
  function installObserver(){
    if (moInstalled) return; moInstalled=true;
    var mo=new MutationObserver(function(muts){
      if (active==='pl') return;
      muts.forEach(function(m){
        if (m.type==='childList'){
          m.addedNodes.forEach(function(n){ if(n.nodeType===1) walkAndTranslate(n); });
        } else if (m.type==='attributes' && m.target && m.target.matches && m.target.matches('[data-i18n-attr]')){
          walkAndTranslate(m.target);
        }
      });
    });
    mo.observe(document.documentElement,{childList:true,subtree:true,attributes:true,attributeFilter:['placeholder','title','aria-label']});
  }

  function setLanguage(lang){
    if (!SUPPORTED.some(function(l){return l.code===lang;})) return;
    active=lang; localStorage.setItem(STORE_KEY, lang);
    var label=document.querySelector('#bh-translator .bh-translator-label');
    if (label) label.textContent='Lang: '+lang.toUpperCase();

    if (lang==='pl'){ location.reload(); return; }
    loadDict(lang).then(function(d){ dict=d; walkAndTranslate(document); installObserver(); });
  }

  // ====== START ======
  function init(){
    createUI();
    // je≈õli u≈ºytkownik mia≈Ç wybrany jƒôzyk ‚Äì zastosuj
    if (initial!=='pl'){ setLanguage(initial); }
  }
  if (document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', init); }
  else { init(); }
})();
</script>
<!-- END bh-patch:translator-oneblock -->
<!-- BEGIN bh-patch:translator-hotfix -->
<script>
(function(){
  if (window.__bhPatchTranslatorHotfix__) return;
  window.__bhPatchTranslatorHotfix__ = 1;

  // ===== A) Anty-Google-Translate (baner/ramka/auto) =====
  (function neutralizeGoogleTranslate(){
    // 1) Meta "notranslate" ‚Äì blokuje podpowiedzi i auto-t≈Çumaczenie
    var hasMeta = document.querySelector('meta[name="google"][content*="notranslate"]');
    if (!hasMeta) {
      var m = document.createElement('meta');
      m.setAttribute('name','google'); m.setAttribute('content','notranslate');
      document.head.appendChild(m);
    }

    // 2) CSS: ukryj UI Google Translate (baner/tooltipy), nawet je≈õli ju≈º siƒô wstrzyknƒÖ≈Ç
    var css = `
.goog-te-banner-frame, .goog-te-gadget, .goog-tooltip, .goog-te-balloon-frame, #google_translate_element,
.VIpgJd-ZVi9od-ORHb, .VIpgJd-ZVi9od-l4eHX-hSRGPd, .VIpgJd-ZVi9od-ORHb-OEVmcd { display:none !important; visibility:hidden !important; }
body { top: 0 !important; }
`;
    var s = document.createElement('style');
    s.setAttribute('data-bh-style','anti-google-translate');
    s.appendChild(document.createTextNode(css));
    document.head.appendChild(s);

    // 3) Usu≈Ñ ju≈º wstrzykniƒôte elementy/klasy
    function purgeGT(){
      ['iframe.goog-te-banner-frame','#google_translate_element','.VIpgJd-ZVi9od-ORHb','.goog-te-gadget'].forEach(function(sel){
        document.querySelectorAll(sel).forEach(function(n){ try{ n.remove(); }catch(_){ n.style.display='none'; } });
      });
      document.documentElement.classList.remove('translated-ltr','translated-rtl');
      document.body.style.top = null;
      // Wyzeruj stan google translate je≈õli istnia≈Ç
      try { localStorage.removeItem('googtrans'); } catch(_){}
      try { sessionStorage.removeItem('googtrans'); } catch(_){}
      // Zneutralizuj globalny init je≈õli snippet google by≈Ç dodany
      window.googleTranslateElementInit = function(){};
      // Zablokuj ewentualne przysz≈Çe ≈Çadowanie element.js
      var _createElement = document.createElement;
      document.createElement = function(tag){
        var el = _createElement.call(document, tag);
        if (tag.toLowerCase()==='script') {
          var _setAttr = el.setAttribute;
          el.setAttribute = function(name, value){
            if (name==='src' && /translate_a\/element\.js/i.test(String(value||''))) {
              // zignoruj ≈Çadowanie skryptu google translate
              return;
            }
            return _setAttr.apply(el, arguments);
          };
        }
        return el;
      };
    }
    purgeGT();
    // Dodatkowo pr√≥buj czy≈õciƒá, je≈õli co≈õ do≈Çaduje siƒô dynamicznie
    var mo = new MutationObserver(function(){ purgeGT(); });
    mo.observe(document.documentElement, { childList:true, subtree:true });
  })();

  // ===== B) Wzmocnienie naszego t≈Çumacza (natychmiast po wyborze) =====
  (function reinforceBHTranslator(){
    // Je≈ºeli masz w projekcie poprzedni blok "translator-oneblock" / "bh-translator.js",
    // poni≈ºszy kod zadba o natychmiastowe t≈Çumaczenie i poprawne nas≈Çuchiwanie klikniƒôƒá.

    // 1) Gdy istnieje dropdown naszego t≈Çumacza ‚Äì dodaj tak≈ºe pointerup (mobile), plus focusem.
    function bindFastActions(){
      var dd = document.querySelector('#bh-translator .bh-translator-dd');
      var wrap = document.getElementById('bh-translator');
      if (!dd || !wrap) return;

      function onPick(e){
        var b = e.target.closest('.bh-dd-item'); if(!b) return;
        var lang = b.getAttribute('data-lang');
        wrap.setAttribute('aria-expanded','false');
        // Je≈õli mamy globalny setLanguage z naszego widgetu ‚Äì u≈ºyj.
        if (typeof window.setLanguage === 'function') {
          try { window.setLanguage(lang); } catch(_){}
          return;
        }
        // Je≈õli nie ‚Äì spr√≥buj odpaliƒá standardowƒÖ ≈õcie≈ºkƒô poprzedniego bloku.
        try {
          // Wersje wcze≈õniejsze mia≈Çy setLanguage w IIFE ‚Äì nie w globalu,
          // wiƒôc wymusimy ponowne t≈Çumaczenie przez zapis jƒôzyka i reload je≈õli PL
          localStorage.setItem('bh-lang', lang);
          if (lang === 'pl') { location.reload(); return; }
          // Spr√≥buj wywo≈Çaƒá ponowny skan (fallback bardzo defensywny)
          setTimeout(function(){
            var ev = new Event('bh-translate-rescan'); document.dispatchEvent(ev);
          }, 0);
        } catch(_){}
      }

      ['click','pointerup','keyup'].forEach(function(type){
        dd.addEventListener(type, function(e){
          if (type==='keyup' && e.key !== 'Enter') return;
          onPick(e);
        }, { passive:true });
      });
    }

    // 2) Uniwersalny "rescan" ‚Äì pod≈ÇƒÖcz do naszego wcze≈õniejszego kodu je≈õli s≈Çucha zdarze≈Ñ
    document.addEventListener('bh-translate-rescan', function(){
      try {
        // Je≈õli w poprzednim bloku jest funkcja walkAndTranslate dostƒôpna przez closure ‚Äì nie mamy do niej dostƒôpu,
        // ale je≈õli aktywny jest MutationObserver, wystarczy prowokacja minimalnej mutacji:
        var mark = document.createElement('span');
        mark.setAttribute('data-bh-no-translate','');
        document.body.appendChild(mark);
        requestAnimationFrame(function(){ mark.remove(); });
      } catch(_){}
    });

    // 3) Je≈ºeli UI t≈Çumacza jeszcze nie istnieje (np. tylko "oneblock" z innej strony go doda),
    // poczekaj na DOM i pod≈ÇƒÖcz zdarzenia.
    function whenReady(){
      bindFastActions();
      // Gwarantujemy, ≈ºe label siƒô od≈õwie≈ºy przy wej≈õciu miƒôdzy stronami
      var saved = localStorage.getItem('bh-lang');
      var label = document.querySelector('#bh-translator .bh-translator-label');
      if (label && saved) label.textContent = 'Lang: ' + saved.toUpperCase();
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', whenReady);
    } else {
      whenReady();
    }
  })();
})();
</script>
<!-- END bh-patch:translator-hotfix -->
<!-- BEGIN bh-patch:translator-fix-v2 -->
<script>
(function(){
  if (window.__bhPatchTranslatorFixV2__) return;
  window.__bhPatchTranslatorFixV2__ = 1;

  // ========== USTAWIENIA ==========
  var BH_STORE_KEY = 'bh-lang';
  var BH_SUPPORTED = [
    { code: 'pl', label: 'Polski' },
    { code: 'en', label: 'English' },
    { code: 'de', label: 'Deutsch' },
    { code: 'uk', label: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞' }
  ];

  // Minimalne s≈Çowniki wbudowane (mo≈ºesz rozbudowaƒá p√≥≈∫niej plikami assets/i18n/*.json)
  var BH_EMBED = {
    en: {
      "szukaj":"Search","telefon alarmowy":"Emergency phone","pierwsza pomoc":"First Aid","apteka":"Pharmacy","szpital":"Hospital",
      "objawy":"Symptoms","przyczyny":"Causes","leki":"Medications","na receptƒô":"Prescription","bez recepty":"Over-the-counter",
      "kiedy siƒô niepokoiƒá":"When to worry","czerwone flagi":"Red flags","lekarz":"Doctor","kontakt":"Contact","informacje":"Information"
    },
    de: {
      "szukaj":"Suche","telefon alarmowy":"Notruf","pierwsza pomoc":"Erste Hilfe","apteka":"Apotheke","szpital":"Krankenhaus",
      "objawy":"Symptome","przyczyny":"Ursachen","leki":"Medikamente","na receptƒô":"Verschreibungspflichtig","bez recepty":"Rezeptfrei",
      "kiedy siƒô niepokoiƒá":"Wann Sorgen machen","czerwone flagi":"Rote Flaggen","lekarz":"Arzt","kontakt":"Kontakt","informacje":"Informationen"
    },
    uk: {
      "szukaj":"–ü–æ—à—É–∫","telefon alarmowy":"–ï–∫—Å—Ç—Ä–µ–Ω–∏–π –Ω–æ–º–µ—Ä","pierwsza pomoc":"–ü–µ—Ä—à–∞ –¥–æ–ø–æ–º–æ–≥–∞","apteka":"–ê–ø—Ç–µ–∫–∞","szpital":"–õ—ñ–∫–∞—Ä–Ω—è",
      "objawy":"–°–∏–º–ø—Ç–æ–º–∏","przyczyny":"–ü—Ä–∏—á–∏–Ω–∏","leki":"–õ—ñ–∫–∏","na receptƒô":"–ó–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º","bez recepty":"–ë–µ–∑ —Ä–µ—Ü–µ–ø—Ç—É",
      "kiedy siƒô niepokoiƒá":"–ö–æ–ª–∏ –≤–∞—Ä—Ç–æ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—è","czerwone flagi":"–¢—Ä–∏–≤–æ–∂–Ω—ñ –æ–∑–Ω–∞–∫–∏","lekarz":"–õ—ñ–∫–∞—Ä","kontakt":"–ö–æ–Ω—Ç–∞–∫—Ç","informacje":"–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è"
    }
  };

  var BH_DEFAULT = 'pl';
  var savedLang = localStorage.getItem(BH_STORE_KEY);
  var browserLang = (navigator.language||'pl').slice(0,2).toLowerCase();
  var BH_INITIAL = (savedLang && BH_SUPPORTED.some(l=>l.code===savedLang)) ? savedLang :
                   (BH_SUPPORTED.some(l=>l.code===browserLang) ? browserLang : BH_DEFAULT);

  // ========== POMOCNICZE ==========
  function bhNorm(str){
    return String(str||'').toLowerCase()
      .replace(/\s+/g,' ')
      .replace(/[.,;:!?()[\]{}"‚Äû‚Äù‚Äö‚Äô'`/\\|<>~^%‚Ç¨$#@*+=\-‚Äì‚Äî]/g,'')
      .trim();
  }
  function bhTextOnly(el){
    // t≈Çumaczymy tylko proste tre≈õci (bez HTML dzieci), aby nie niszczyƒá z≈Ço≈ºonych blok√≥w
    return el && el.childElementCount === 0;
  }

  // ========== ZA≈ÅƒÑCZENIE / UTWORZENIE UI (je≈õli brak) ==========
  function ensureUI(){
    if (document.getElementById('bh-translator')) return;
    // Lekki styl (je≈õli poprzedni blok go nie wstrzyknƒÖ≈Ç)
    if (!document.querySelector('style[data-bh-style="translator-core"]')){
      var css = `
:root{--bh-accent:#6c5ce7;--bh-bg:rgba(255,255,255,.75);--bh-shadow:0 8px 20px rgba(0,0,0,.12);--bh-radius:16px;--bh-blur:saturate(1.2) blur(6px);--bh-z:9999;--bh-font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans","Helvetica Neue",sans-serif}
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:var(--bh-z);font-family:var(--bh-font)}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:var(--bh-radius);box-shadow:var(--bh-shadow);cursor:pointer;color:#1f2937;user-select:none;-webkit-tap-highlight-color:transparent;transition:transform .12s ease,background .2s ease,border-color .2s ease}
.bh-translator-btn:hover{transform:translateY(-1px)}.bh-translator-btn:active{transform:translateY(0)}
.bh-translator-btn .bh-icn{width:18px;height:18px;flex:0 0 auto;color:var(--bh-accent)}
.bh-translator-label{font-size:14px;line-height:1;font-weight:600}
.bh-translator-dd{position:absolute;right:0;margin-top:8px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:14px;box-shadow:var(--bh-shadow);min-width:200px;padding:8px;display:none}
.bh-translator-wrap[aria-expanded="true"] .bh-translator-dd{display:block}
.bh-dd-item{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;border-radius:10px;background:transparent;border:0;cursor:pointer;color:#111827;font-size:14px;font-weight:600}
.bh-dd-item:hover{background:rgba(108,92,231,.08)}.bh-dd-item small{color:#6b7280;font-weight:500}
@media(max-width:480px){.bh-translator-btn{padding:8px 12px;gap:8px}.bh-translator-label{font-size:13px}.bh-translator-dd{min-width:180px}}
      `;
      var st = document.createElement('style');
      st.setAttribute('data-bh-style','translator-core');
      st.appendChild(document.createTextNode(css));
      document.head.appendChild(st);
    }

    var wrap=document.createElement('div'); wrap.id='bh-translator'; wrap.className='bh-translator-wrap'; wrap.setAttribute('aria-expanded','false');
    var btn=document.createElement('button'); btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML = `
      <svg class="bh-icn" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.03-9 9 4.03 9 9 9Z" stroke="currentColor" stroke-width="1.6"></path>
        <path d="M3 12h18M12 3c3 3.5 3 14 0 18M6 6c3.5 2 8.5 2 12 0M6 18c3.5-2 8.5-2 12 0" stroke="currentColor" stroke-width="1.2"></path>
      </svg>
      <span class="bh-translator-label" data-bh-no-translate>Lang: ${(BH_INITIAL||'pl').toUpperCase()}</span>
    `;
    var dd=document.createElement('div'); dd.className='bh-translator-dd'; dd.setAttribute('role','menu');
    BH_SUPPORTED.forEach(function(l){
      var b=document.createElement('button'); b.type='button'; b.className='bh-dd-item'; b.setAttribute('data-lang',l.code);
      b.innerHTML = `<span>${l.label}</span><small>${l.code.toUpperCase()}</small>`;
      dd.appendChild(b);
    });
    wrap.appendChild(btn); wrap.appendChild(dd); document.body.appendChild(wrap);

    btn.addEventListener('click', function(){
      wrap.setAttribute('aria-expanded', wrap.getAttribute('aria-expanded')==='true'?'false':'true');
    });
    document.addEventListener('click', function(e){ if (!wrap.contains(e.target)) wrap.setAttribute('aria-expanded','false'); });

    // Delegacja na elementy listy (klik, pointer, Enter)
    dd.addEventListener('click', bhPickLang, {passive:true});
    dd.addEventListener('pointerup', bhPickLang, {passive:true});
    dd.addEventListener('keyup', function(e){ if(e.key==='Enter') bhPickLang(e); }, {passive:true});
    function bhPickLang(e){
      var b=e.target.closest('.bh-dd-item'); if(!b) return;
      wrap.setAttribute('aria-expanded','false');
      var code=b.getAttribute('data-lang'); if (!code) return;
      window.bhSetLanguage(code); // globalny, natychmiastowy
    }
  }

  // ========== ZA≈ÅADOWANIE S≈ÅOWNIKA (z pliku + wbudowany) ==========
  function bhLoadDict(lang){
    return new Promise(function(resolve){
      if (lang==='pl') return resolve({});
      fetch('assets/i18n/'+lang+'.json',{cache:'no-store'}).then(function(r){
        if (!r.ok) throw 0; return r.json();
      }).then(function(json){
        // scal: wbudowany (lowercase keys) + plik (preferuj plik)
        var base = BH_EMBED[lang]||{};
        var lcBase = {}; Object.keys(base).forEach(function(k){ lcBase[bhNorm(k)] = base[k]; });
        var lcFile = {}; Object.keys(json||{}).forEach(function(k){ lcFile[bhNorm(k)] = json[k]; });
        resolve(Object.assign({}, lcBase, lcFile));
      }).catch(function(){
        var base = BH_EMBED[lang]||{};
        var lc = {}; Object.keys(base).forEach(function(k){ lc[bhNorm(k)] = base[k]; });
        resolve(lc);
      });
    });
  }

  // ========== T≈ÅUMACZENIE ==========
  var bhActive = BH_DEFAULT;
  var bhDict = {};

  function bhTranslateTree(root){
    // 1) Dok≈Çadne klucze: data-i18n
    root.querySelectorAll && root.querySelectorAll('[data-i18n]').forEach(function(el){
      if (el.closest('#bh-translator')) return;
      var key = el.getAttribute('data-i18n');
      var t = bhDict[bhNorm(key)];
      if (t) el.textContent = t;
    });

    // 2) Atrybuty
    root.querySelectorAll && root.querySelectorAll('[data-i18n-attr]').forEach(function(el){
      if (el.closest('#bh-translator')) return;
      (el.getAttribute('data-i18n-attr')||'').split(',').map(function(s){return s.trim();}).forEach(function(pair){
        var sp = pair.split('|'); var attr=(sp[0]||'').trim(); var key=(sp[1]||'').trim();
        if(!attr || !key) return;
        var t = bhDict[bhNorm(key)];
        if (t) el.setAttribute(attr, t);
      });
    });

    // 3) Proste elementy tekstowe (bez dzieci) ‚Äì ostro≈ºnie, aby nie mieszaƒá zda≈Ñ
    var candidates = root.querySelectorAll ? root.querySelectorAll('h1,h2,h3,h4,h5,h6,p,li,button,a,th,td,span,label,small,strong,em,figcaption,legend,summary,dd,dt,caption') : [];
    candidates.forEach(function(el){
      if (el.closest('#bh-translator')) return;
      if (!bhTextOnly(el)) return;
      var k = bhNorm(el.textContent);
      if (!k) return;
      var t = bhDict[k];
      if (t && t !== el.textContent) el.textContent = t;
    });
  }

  var bhObserverInstalled = false;
  function bhInstallObserver(){
    if (bhObserverInstalled) return;
    bhObserverInstalled = true;
    var mo = new MutationObserver(function(muts){
      if (bhActive==='pl') return;
      muts.forEach(function(m){
        if (m.type==='childList'){
          m.addedNodes.forEach(function(n){ if (n.nodeType===1) bhTranslateTree(n); });
        }
      });
    });
    mo.observe(document.documentElement, { childList:true, subtree:true });
  }

  // ========== API GLOBALNE ==========
  window.bhSetLanguage = function(lang){
    if (!BH_SUPPORTED.some(function(l){return l.code===lang;})) return;
    bhActive = lang;
    localStorage.setItem(BH_STORE_KEY, lang);
    var label = document.querySelector('#bh-translator .bh-translator-label');
    if (label) label.textContent = 'Lang: ' + lang.toUpperCase();

    if (lang === 'pl'){
      // powr√≥t do oryginalnego PL ‚Äì najpewniej przez reload (bez baner√≥w, bo ju≈º zablokowane)
      location.reload();
      return;
    }
    // Za≈Çaduj s≈Çownik i przet≈Çumacz ca≈Çy dokument
    bhLoadDict(lang).then(function(dict){
      bhDict = dict || {};
      bhTranslateTree(document);
      bhInstallObserver();
    });
  };

  // ========== START ==========
  function bhInit(){
    ensureUI(); // je≈õli ju≈º jest ‚Äì tylko pod≈ÇƒÖczy zdarzenia
    // Je≈õli wcze≈õniej zapisano jƒôzyk, zastosuj bez klikania
    if (BH_INITIAL !== 'pl') {
      window.bhSetLanguage(BH_INITIAL);
    } else {
      // zsynchronizuj label, gdy kto≈õ wcze≈õniej zmieni≈Ç
      var saved = localStorage.getItem(BH_STORE_KEY);
      var lbl = document.querySelector('#bh-translator .bh-translator-label');
      if (lbl && saved) lbl.textContent = 'Lang: ' + saved.toUpperCase();
    }
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', bhInit); else bhInit();

  // ========== DODATKOWO: brak tooltip√≥w/banner√≥w (gdyby przeglƒÖdarka co≈õ pr√≥bowa≈Ça) ==========
  (function hardenNoGoogle(){
    var meta = document.querySelector('meta[name="google"][content*="notranslate"]');
    if (!meta) {
      var m = document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
    }
    var s = document.createElement('style'); s.setAttribute('data-bh-style','anti-google-translate'); s.textContent = `
.goog-te-banner-frame,.goog-te-gadget,.goog-tooltip,.goog-te-balloon-frame,#google_translate_element,
.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd{display:none !important;visibility:hidden !important}
body{top:0 !important}
`; document.head.appendChild(s);
    try { localStorage.removeItem('googtrans'); sessionStorage.removeItem('googtrans'); } catch(_){}
    window.googleTranslateElementInit = function(){};
  })();

})();
</script>
<!-- END bh-patch:translator-fix-v2 -->
</body>
</html>
