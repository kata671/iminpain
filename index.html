
<!doctype html>
<html lang="pl" data-lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Boli Help — Strona główna</title>
  <meta name="theme-color" content="#0e1230" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="/icons/icon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="/icons/icon-512.png">

  <!-- CSS (Twoje style bazowe) -->
  <link rel="stylesheet" href="assets/style.css?v=10" />

  <style>
    /* ===================== MOBILE: węższy, czytelniejszy widok tylko na stronie głównej ===================== */
    @media (max-width: 768px){
      body[data-page="home"] .container{
        width: 92vw !important;    /* w razie potrzeby zmień na 90vw / 88vw */
        max-width: none !important;
        margin-left: auto !important;
        margin-right: auto !important;
        padding-left: 14px !important;
        padding-right: 14px !important;
      }
      body[data-page="home"] .header .tools{
        flex-wrap: wrap;
        gap: 12px !important;
      }
      body[data-page="home"] .header .brand{ flex:1 1 100%; }
      body[data-page="home"] .header .tools .search{ flex:1 1 100%; min-width:0; }
    }
    @media (max-width: 420px){
      body[data-page="home"] .container{
        width: 88vw !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
      }
    }
  </style>
</head>

<body data-page="home">
  <!-- TŁO / SIATKA -->
  <div class="bh-wallpaper" aria-hidden="true"></div>
  <div class="bh-grid" aria-hidden="true"></div>
  <div class="bh-floor-fade" aria-hidden="true"></div>

  <div class="container">
    <header class="header">
      <div class="brand">
        <h1 data-i18n="brand_title">Boli Help</h1>
        <small data-i18n="brand_sub">Pomoc i pierwsza pomoc w nagłych sytuacjach</small>
      </div>
      <div class="tools" style="display:flex;align-items:center;gap:10px">
        <div class="search" role="search">
          <input id="bhSearch" type="search" placeholder="Szukaj objawu, części ciała lub tematu…" aria-label="Szukaj" />
          <svg id="bhSearchIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" style="cursor:pointer">
            <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
                  stroke="white" stroke-opacity=".7" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <!-- STARY TŁUMACZ USUNIĘTY (langpick) -->
      </div>
    </header>

    <div class="emergency-list" aria-label="Telefony alarmowe">
      <a href="tel:112">📞 112</a><a href="tel:999">🚑 999</a><a href="tel:998">🔥 998</a><a href="tel:997">👮 997</a>
    </div>

    <nav class="situations" aria-label="Sytuacje nagłe">
      <a class="pill pill--green" data-porada="zadlawienie" href="szczegoly.html?typ=porada&czesc=zadlawienie&label=Zad%C5%82awienie">
        <span class="ico">🫁</span><span data-i18n="pill_choke">Zadławienie</span>
      </a>
      <a class="pill pill--green" data-porada="reanimacja" href="szczegoly.html?typ=porada&czesc=reanimacja&label=Reanimacja">
        <span class="ico">🚑</span><span data-i18n="pill_cpr">Reanimacja</span>
      </a>
      <a class="pill pill--green" data-porada="wypadek" href="szczegoly.html?typ=porada&czesc=wypadek&label=Wypadek">
        <span class="ico">💥</span><span data-i18n="pill_accident">Wypadek</span>
      </a>
      <a class="pill pill--green" data-porada="pierwszopomoc" href="szczegoly.html?typ=porada&czesc=pierwszopomoc&label=Pierwsza%20pomoc">
        <span class="ico">❤️‍🩹</span><span data-i18n="pill_firstaid">Pierwsza pomoc</span>
      </a>
      <a class="pill pill--blue" href="gry.html">
        <span class="ico">🎮</span><span data-i18n="pill_games">Gry / Trening</span>
      </a>
      <a class="pill pill--blue" href="quizzes.html" id="btn-quizzes">
        <span class="ico">🧠</span><span data-i18n="pill_quizzes">Quizy</span>
      </a>
    </nav>

    <!-- QUIZ LAUNCHER USUNIĘTY -->

    <div class="actions" role="navigation" aria-label="Szybkie akcje">
      <button id="btn-112" class="btn btn--red btn--call" type="button">📞 112</button>
      <button id="btn-hosp" class="btn btn--hosp" type="button" data-i18n="btn_hosp">🏥 Szpitale / SOR</button>
      <a id="btn-apteka" class="btn" href="https://www.google.com/maps/search/apteka+otwarta+teraz/" target="_blank" rel="noopener">
        <span class="badge-round">apteka24</span></a>
      <button id="btn-loc" class="btn" type="button" data-i18n="btn_loc">📍 Zlokalizuj mnie</button>
    </div>

    <div class="subheadline" data-i18n="subheadline">Boli mnie — wybierz obszar bólu</div>

    <!-- 3 kafelki -->
    <section class="stack" aria-label="Wybór postaci"
      style="display:grid;gap:16px;grid-template-columns:repeat(3,1fr);align-items:stretch;">
      <article class="card">
        <a href="kobieta.html" class="card__link">
          <div class="card__imgwrap"><img src="img/kobieta-model1.png" alt="Kobieta — wybierz część ciała" onerror="this.src='img/placeholder.png'"/></div>
          <div class="caption"><h3 data-i18n="card_woman">Kobieta</h3><span class="arrow" aria-hidden="true">→</span></div>
        </a>
      </article>
      <article class="card">
        <a href="mezczyzna.html" class="card__link">
          <div class="card__imgwrap"><img src="img/mezczyzna-model1.png" alt="Mężczyzna — wybierz część ciała" onerror="this.src='img/placeholder.png'"/></div>
          <div class="caption"><h3 data-i18n="card_man">Mężczyzna</h3><span class="arrow" aria-hidden="true">→</span></div>
        </a>
      </article>
      <article class="card">
        <a href="dziecko.html" class="card__link">
          <div class="card__imgwrap"><img src="img/dziecko-model1.png" alt="Dziecko — wybierz część ciała" onerror="this.src='img/placeholder.png'"/></div>
          <div class="caption"><h3 data-i18n="card_child">Dziecko</h3><span class="arrow" aria-hidden="true">→</span></div>
        </a>
      </article>
    </section>
  </div>

  <!-- QUIZ MODAL USUNIĘTY -->

  <!-- Modal PORADA (zostaje) -->
  <div id="bh2025Porada" class="bh2025-porada" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="bh2025PoradaTitle">
    <div class="bh2025-porada__panel">
      <div class="bh2025-porada__head">
        <div class="bh2025-porada__title" id="bh2025PoradaTitle" data-i18n="advice_title">Porada</div>
        <div class="bh2025-chip" id="bh2025PoradaChip" data-i18n="advice_chip">SOS • instrukcja</div>
        <button class="bh2025-close--porada" type="button" id="bh2025PoradaClose" aria-label="Zamknij" data-i18n="close_btn">✕</button>
      </div>
      <div class="bh2025-porada__grid">
        <div class="bh2025-porada__svg" id="bh2025PoradaSvg" aria-label="Instrukcja obrazkowa"></div>
        <div class="bh2025-steps"><ol id="bh2025PoradaSteps"></ol></div>
      </div>
      <div class="bh2025-video">
        <div class="bh2025-muted" style="margin-bottom:8px;font-weight:800" data-i18n="video_head">Materiał wideo</div>
        <div id="bh2025VideoWrap"><div class="ph" id="bh2025VideoPh"><span>🎬</span><span data-i18n="video_hint">Dodaj plik: <code>assets/videos/&lt;nazwa&gt;.mp4</code> i zaktualizuj mapę poniżej.</span></div></div>
      </div>
    </div>
  </div>

  <!-- Skrypt bazowy strony -->
  <script src="assets/main.js?v=10"></script>

  <!-- I18N (lokalny) — pozostawiam, ale bez langpick w headerze -->
  <script>
  (function(){
    const I18N = {
      pl:{brand_title:"Boli Help",brand_sub:"Pomoc i pierwsza pomoc w nagłych sytuacjach",
          pill_choke:"Zadławienie",pill_cpr:"Reanimacja",pill_accident:"Wypadek",pill_firstaid:"Pierwsza pomoc",
          pill_games:"Gry / Trening", pill_quizzes:"Quizy",
          btn_hosp:"🏥 Szpitale / SOR",btn_loc:"📍 Zlokalizuj mnie",subheadline:"Boli mnie — wybierz obszar bólu",
          card_woman:"Kobieta",card_man:"Mężczyzna",card_child:"Dziecko",
          advice_title:"Porada",advice_chip:"SOS • instrukcja",video_head:"Materiał wideo",
          video_hint:"Dodaj plik: <code>assets/videos/&lt;nazwa&gt;.mp4</code> i zaktualizuj mapę poniżej."},
      en:{brand_title:"Boli Help",brand_sub:"Help & first aid in emergencies",
          pill_choke:"Choking",pill_cpr:"CPR",pill_accident:"Accident",pill_firstaid:"First aid",
          pill_games:"Games / Training", pill_quizzes:"Quizzes",
          btn_hosp:"🏥 Hospitals / ER",btn_loc:"📍 Locate me",subheadline:"It hurts — choose the body area",
          card_woman:"Woman",card_man:"Man",card_child:"Child",
          advice_title:"Advice",advice_chip:"SOS • instruction",video_head:"Video material",
          video_hint:"Add file: <code>assets/videos/&lt;name&gt;.mp4</code> and update the map below."}
    };
    function applyI18n(lang){
      const dict = I18N[lang] || I18N.pl;
      document.documentElement.setAttribute('lang', lang);
      document.documentElement.setAttribute('data-lang', lang);
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(dict[key]!==undefined){ el.innerHTML = dict[key]; }
      });
    }
    // domyślnie PL
    applyI18n('pl');
    window.__getLang = ()=> document.documentElement.getAttribute('data-lang') || 'pl';
  })();
  </script>

  <!-- PORADY (jak było) -->
  <script>
  (function(){
    const poradaModal  = document.getElementById('bh2025Porada');
    const poradaClose  = document.getElementById('bh2025PoradaClose');
    const poradaTitle  = document.getElementById('bh2025PoradaTitle');
    const svgWrap      = document.getElementById('bh2025PoradaSvg');
    const stepsOl      = document.getElementById('bh2025PoradaSteps');
    const videoWrap    = document.getElementById('bh2025VideoWrap');
    const videoPh      = document.getElementById('bh2025VideoPh');
    if(!poradaModal || poradaModal.dataset.bhBound) return; poradaModal.dataset.bhBound='1';

    const IMG = { zadlawienie: 'img/zadlawienie.png', reanimacja: 'img/reanimacja.png', wypadek: 'img/wypadek.png', pierwszopomoc: null };
    const STEPS = {
      pl:{
        zadlawienie:["Zachęcaj do kaszlu — jeśli skuteczny, obserwuj.","Brak skutecznego kaszlu: 5 uderzeń w plecy między łopatki.","Jeśli nieskuteczne: 5 uciśnięć nadbrzusza.","Na zmianę: 5 plecy ↔ 5 nadbrzusze, aż do skutku.","Utrata przytomności: RKO 30:2, 112, AED."],
        reanimacja:["Sprawdź bezpieczeństwo, reakcję i oddech (max 10 s).","Brak oddechu: zadzwoń 112.","Uciski: 100–120/min, głęb. 5–6 cm, środek mostka.","Po 30 uciśnięciach 2 oddechy (jeśli umiesz i chcesz).","Kontynuuj do przyjazdu służb lub powrotu oddechu."],
        wypadek:["Zabezpiecz miejsce.","Oceń liczbę poszkodowanych i zagrożenia.","Wezwij 112.","Priorytet: oddech, krwotoki (ucisk).","Nie przestawiaj bez potrzeby."],
        pierwszopomoc:["ABC: drożność, oddech, krążenie.","Pozycja bezpieczna przy oddechu.","Ucisk krwotoków.","Oparzenia: chłodzenie 20 min.","Wezwij pomoc, gdy masz wątpliwości."]
      },
      en:{
        zadlawienie:["Encourage coughing — if effective, observe.","If not effective: 5 back blows.","Then 5 abdominal thrusts.","Alternate 5↔5 until success.","If unconscious: CPR 30:2, call 112/911, AED."],
        reanimacja:["Check safety, response, breathing (≤10 s).","No breathing: call 112/911.","Compressions 100–120/min, depth 5–6 cm, center chest.","30 compressions + 2 breaths (if trained).","Continue until help arrives/returns breathing."],
        wypadek:["Make scene safe.","Assess casualties/hazards.","Call 112/911.","Priority: breathing, bleeding (direct pressure).","Do not move unnecessarily."],
        pierwszopomoc:["ABC: airway, breathing, circulation.","Recovery position if breathing.","Control bleeding.","Burns: cool 20 min.","When in doubt — call for help."]
      }
    };
    const L = ()=> (window.__getLang && window.__getLang()) || 'pl';

    function openPorada(key, title){
      poradaTitle.textContent = title || (L()==='en'?'Advice':'Porada');
      svgWrap.innerHTML=''; const src=IMG[key];
      if(src){ const img=new Image(); img.src=src; img.alt=title||key; svgWrap.appendChild(img); }
      stepsOl.innerHTML=''; (STEPS[L()]?.[key]||[]).forEach(txt=>{ const li=document.createElement('li'); li.textContent=txt; stepsOl.appendChild(li); });
      videoWrap.innerHTML=''; videoWrap.appendChild(videoPh.cloneNode(true));
      poradaModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
    }
    function closePorada(){ poradaModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }

    const nav = document.querySelector('nav.situations');
    if(nav && !nav.dataset.bhPoradaBound){
      nav.dataset.bhPoradaBound='1';
      nav.addEventListener('click', function(e){
        const a = e.target.closest('a.pill.pill--green[data-porada]');
        if(!a) return;
        e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
        const key   = a.getAttribute('data-porada');
        const title = a.textContent.trim();
        openPorada(key, title);
      }, true);
    }

    poradaClose.addEventListener('click', closePorada);
    poradaModal.addEventListener('click', (e)=>{ if(e.target===poradaModal) closePorada(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && poradaModal.getAttribute('aria-hidden')==='false') closePorada(); });
  })();
  </script>

  <!-- WYSZUKIWARKA (zostaje) -->
  <script>
  (function(){
    const input = document.getElementById('bhSearch');
    const icon  = document.getElementById('bhSearchIcon');
    if(!input || input.dataset.bhSearchBound) return; input.dataset.bhSearchBound='1';

    const PARTS = [
      {id:'oko',       label:'Oko',        alias:['oko','oczy','wzrok']},
      {id:'nos',       label:'Nos',        alias:['nos','zatoki','katar']},
      {id:'gardlo',    label:'Gardło',     alias:['gardlo','gardło','angina','chrypka']},
      {id:'glowa',     label:'Głowa',      alias:['glowa','głowa','migrena','ból głowy']},
      {id:'klatka',    label:'Klatka piersiowa', alias:['klatka','pierś','serce ból','mostek']},
      {id:'pluca',     label:'Płuca',      alias:['płuca','pluca','duszność','astma']},
      {id:'brzuch',    label:'Brzuch',     alias:['brzuch','żołądek','zoladek','wzdęcia','biegunka']},
      {id:'nerki',     label:'Nerki',      alias:['nerki','kolka','lędźwie','ledzwi']},
      {id:'plecy',     label:'Plecy',      alias:['plecy','kręgosłup','kregoslup','rwa']},
      {id:'biodra',    label:'Biodra/Uda', alias:['biodro','biodra','udo','pachwina']},
      {id:'kolano',    label:'Kolano',     alias:['kolano','rzepka','łąkotka','lakotka']},
      {id:'stopy',     label:'Stopy',      alias:['stopa','stopy','pięta','pieta','rozcięgno']},
      {id:'skora',     label:'Skóra',      alias:['skora','skóra','wysypka','świąd','alergia']},
      {id:'serce',     label:'Serce',      alias:['serce','kołatania','kolatania','arytmia']},
      {id:'kaszel',    label:'Kaszel',     alias:['kaszel','kaszle']},
      {id:'goraczka',  label:'Gorączka',   alias:['gorączka','goraczka','temperatura']},
      {id:'zadlawienie', label:'Zadławienie (SOS)', alias:['zadławienie','zadlawienie','zadławił','zadlawil'] , sos:true},
      {id:'reanimacja',  label:'Reanimacja (RKO)',  alias:['reanimacja','rko','resuscytacja'] , sos:true},
      {id:'wypadek',     label:'Wypadek (SOS)',     alias:['wypadek','kolizja','potrącenie','potracenie'] , sos:true},
      {id:'pierwszopomoc',label:'Pierwsza pomoc',   alias:['pierwsza pomoc','pierwszopomoc','abc'] , sos:true}
    ];
    const GENDERS = [
      {id:'kobieta',label:'Kobieta'},{id:'mezczyzna',label:'Mężczyzna'},{id:'dziecko',label:'Dziecko'}
    ];

    const panel = document.createElement('div');
    panel.className = 'bh2025-suggest'; panel.setAttribute('role','listbox'); panel.setAttribute('aria-hidden','true');
    panel.innerHTML = `<div class="bh2025-sg-head">Podpowiedzi</div><ul class="bh2025-sg-list" id="bh2025List"></ul>`;
    input.parentElement.appendChild(panel);
    const list = panel.querySelector('#bh2025List');
    let results = [], active = -1;

    function buildUrls(hit){
      if(hit.sos){
        const url = `szczegoly.html?typ=porada&czesc=${encodeURIComponent(hit.id)}&label=${encodeURIComponent(hit.label)}`;
        return [{label: hit.label, url, sub:'SOS'}];
      }
      return GENDERS.map(g=>{
        const url = `szczegoly.html?typ=${g.id}&czesc=${encodeURIComponent(hit.id)}&label=${encodeURIComponent(hit.label)}`;
        return {label:`${hit.label} • ${g.label}`, url, sub:g.label};
      });
    }
    function search(q){
      const s=q.trim().toLowerCase(); if(!s) return [];
      const hits = PARTS.filter(p =>
        p.alias?.some(a => a.includes(s)) || p.id.includes(s) || p.label.toLowerCase().includes(s)
      ).slice(0,6);
      return hits.flatMap(buildUrls).slice(0,12);
    }
    function render(){
      list.innerHTML = ''; active = -1;
      results.forEach((r,idx)=>{
        const li = document.createElement('li');
        li.setAttribute('role','option'); li.className='bh2025-sg-item'; li.dataset.index = String(idx);
        li.innerHTML = `<span class="bh2025-sg-ico">🔎</span><span>${r.label}</span><span class="bh2025-sg-sub">${r.sub||''}</span>`;
        li.addEventListener('mouseenter', ()=>setActive(idx));
        li.addEventListener('mouseleave', ()=>setActive(-1));
        li.addEventListener('click', ()=>go(idx));
        list.appendChild(li);
      });
      panel.setAttribute('aria-hidden', results.length ? 'false':'true');
    }
    function setActive(i){
      active = i;
      list.querySelectorAll('.bh2025-sg-item').forEach((el,idx)=>{
        el.setAttribute('aria-selected', (idx===active)?'true':'false');
      });
    }
    function go(idx){
      const item = results[idx]; if(!item) return;
      window.location.href = item.url;
    }

    input.addEventListener('input', ()=>{ results = search(input.value); render(); });
    input.addEventListener('keydown', (e)=>{
      const shown = panel.getAttribute('aria-hidden')==='false';
      if(e.key==='ArrowDown'){ if(!shown){ results = search(input.value); render(); } setActive( (active+1+results.length)%results.length ); e.preventDefault(); }
      else if(e.key==='ArrowUp'){ if(!shown){ results = search(input.value); render(); } setActive( (active-1+results.length)%results.length ); e.preventDefault(); }
      else if(e.key==='Enter'){
        if(shown && active>=0){ e.preventDefault(); go(active); }
        else { if(!results.length){ results = search(input.value); } if(results[0]) go(0); }
      } else if(e.key==='Escape'){ panel.setAttribute('aria-hidden','true'); active=-1; }
    });
    document.addEventListener('click', (e)=>{ if(!panel.contains(e.target) && e.target!==input){ panel.setAttribute('aria-hidden','true'); active=-1; } });
    if(icon){ icon.addEventListener('click', ()=>{ results = search(input.value); if(results.length){ panel.setAttribute('aria-hidden','false'); render(); } }); }
  })();
  </script>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => console.log('SW zarejestrowany:', reg.scope))
        .catch(err => console.error('SW błąd:', err));
    }
  </script>

  <!-- Add to Home Screen -->
  <script src="assets/a2hs.js?v=1"></script>

  <!-- NOWY, spójny translator (multi-lang, prawy górny róg) -->
  <script src="/assets/js/translator-unified.js?v=20" defer></script>

  <!-- HARD CLEAN: ostateczne usunięcie starego tłumacza + quizu (gdyby inne skrypty próbowały je dodać) -->
  <script>
  (function(){
    if (document.body.getAttribute('data-page') !== 'home') return;
    const css = document.createElement('style');
    css.textContent = `
      .goog-te-banner-frame.skiptranslate{display:none!important}
      body{top:0!important}
      #google_translate_element,[id*="google_translate_element"],
      .goog-te-gadget,.goog-te-gadget-simple,.goog-te-combo,
      .skiptranslate,iframe[id^="goog-gt-"],
      .language-switcher,.lang-switch,#lang-switch,
      .langpick,
      .bh2025-quiz-launch,#bh2025QuizModal{display:none!important}
    `;
    document.head.appendChild(css);

    document.querySelectorAll('script[src*="translate_a/element.js"]').forEach(s=>s.remove());
    try { window.googleTranslateElementInit = undefined; } catch(e){}

    const norm = s => (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/\s+/g,' ').trim();
    function clean(){
      ['#google_translate_element','[id*="google_translate_element"]','.goog-te-gadget','.goog-te-gadget-simple','.goog-te-combo','.goog-te-banner-frame','iframe[id^="goog-gt-"]','.skiptranslate','.language-switcher','.lang-switch','#lang-switch','.langpick','.bh2025-quiz-launch','#bh2025QuizModal']
        .forEach(sel=>document.querySelectorAll(sel).forEach(n=>n.remove()));
      document.querySelectorAll('select.goog-te-combo').forEach(sel=> sel.closest('*')?.remove());
      document.querySelectorAll('a,button').forEach(el=>{
        const t = norm(el.textContent);
        if (t.startsWith('sprawdz sie') || t.startsWith('sprawdź się')) el.remove();
      });
    }
    clean();
    let i=0; const iv=setInterval(()=>{ clean(); if(++i>150) clearInterval(iv); }, 100);
    const mo = new MutationObserver(clean);
    mo.observe(document.documentElement, { childList:true, subtree:true });
    setTimeout(()=>mo.disconnect(), 15000);
  })();
  </script>
</body>
</html>
