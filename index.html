<!doctype html>
<html lang="pl" data-lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boli Help ‚Äî Strona g≈Ç√≥wna</title>
  <meta name="theme-color" content="#0e1230" />

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="assets/style.css?v=10" />

  <style>
    html,body{height:100%}
    body[data-page="home"]{
      position:relative; background:#0e1230 !important; color:#eef2ff;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body[data-page="home"]::before,
    body[data-page="home"]::after,
    body[data-page="home"] .container::before,
    body[data-page="home"] .container::after{content:none !important;display:none !important}

    .bh-wallpaper,.bh-grid{position:fixed;inset:0;pointer-events:none}
    .bh-wallpaper{
      z-index:0;
      background:
        radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.30), transparent 60%),
        radial-gradient(36vw 30vh at 84% 10%, rgba(94,234,212,.22), transparent 60%),
        radial-gradient(40vw 44vh at 20% 88%, rgba(164,107,255,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
      filter: blur(10px) saturate(118%);
    }
    .bh-grid{
      z-index:1; opacity:.22;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='104' viewBox='0 0 120 104'%3E%3Cg fill='none' stroke='rgba(173,216,255,0.26)' stroke-width='1'%3E%3Cpolygon points='30,0 90,0 120,52 90,104 30,104 0,52'/%3E%3C/g%3E%3C/svg%3E");
      background-size:160px 138px; background-position:center;
    }
    .bh-floor-fade{ position:fixed; left:0; right:0; bottom:0; height:120px; z-index:2; pointer-events:none;
      background:linear-gradient(180deg, rgba(14,18,48,0), rgba(14,18,48,.35) 55%, rgba(14,18,48,.6)); }
    .container{position:relative;z-index:3;background:transparent !important;max-width:1100px;margin:0 auto;padding:0 16px}

    /* Siatka kart */
    @media (min-width:981px){ section.stack[style]{grid-template-columns:repeat(3,1fr) !important;} }
    @media (max-width:980px){ section.stack[style]{grid-template-columns:repeat(2,1fr) !important;} }
    @media (max-width:640px){ section.stack[style]{grid-template-columns:1fr !important;} }
    section.stack[style] > *{grid-column:auto !important;min-width:0 !important}

    .card{border-radius:18px;overflow:hidden;background:rgba(60,32,100,.32);border:1px solid rgba(164,107,255,.22);
      box-shadow:0 10px 22px rgba(255,110,199,.12), 0 0 0 1px rgba(164,107,255,.14) inset;min-height:240px}
    .card a{display:grid;grid-template-rows:minmax(180px,240px) auto;height:100%;text-decoration:none;color:inherit}
    .card img{width:100%;height:100%;object-fit:contain;object-position:center;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02))}
    .card .caption{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px 14px;
      border-top:1px solid rgba(164,107,255,.22);background:rgba(255,255,255,.04)}

    /* Zielone pigu≈Çki SOS */
    :root{ --bhG:34,227,160; --bhG2:20,160,120; }
    .situations .pill{
      display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:14px; text-decoration:none; font-weight:900;
      border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06); color:#fff; transition:.2s ease;
    }
    .situations .pill .ico{
      display:inline-grid; place-items:center; width:22px; height:22px; border-radius:6px;
      background: rgba(164,107,255,.18); box-shadow: inset 0 0 0 1px rgba(164,107,255,.25);
    }
    .situations .pill.pill--green{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)), rgba(var(--bhG2), .15);
      color:#ffffff; border:1px solid rgba(var(--bhG), .55);
      box-shadow:0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(var(--bhG), .25) inset, 0 0 18px rgba(var(--bhG), .18);
      backdrop-filter:saturate(125%) blur(4px);
    }
    .situations .pill.pill--green:hover,
    .situations .pill.pill--green:focus-visible{
      transform:translateY(-1px); border-color:rgba(var(--bhG), .85);
      box-shadow:0 14px 26px rgba(8,10,22,.45), 0 0 0 2px rgba(var(--bhG), .65), 0 0 26px rgba(var(--bhG), .45);
      outline:none;
    }
    /* Niebieska pigu≈Çka ‚Äì Gry / Trening */
    .situations .pill.pill--blue{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)), rgba(96,165,250,.18);
      border:1px solid rgba(59,130,246,.6);
      box-shadow:0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(59,130,246,.35) inset, 0 0 18px rgba(96,165,250,.30);
      color:#eaf2ff;
    }
    .situations .pill.pill--blue:hover,
    .situations .pill.pill--blue:focus-visible{
      transform:translateY(-1px); border-color:rgba(59,130,246,.9);
      box-shadow:0 14px 26px rgba(8,10,22,.45), 0 0 0 2px rgba(96,165,250,.65), 0 0 26px rgba(96,165,250,.5);
      outline:none;
    }

    /* apteka24 ‚Äì ≈õwiecƒÖcy badge */
    #btn-apteka .badge-round{
      background: rgba(var(--bhG), .18);
      color: #eafff7;
      border:1px solid rgba(var(--bhG), .55);
      box-shadow:0 6px 18px rgba(8,10,22,.35), inset 0 0 0 1px rgba(var(--bhG), .20), 0 0 14px rgba(var(--bhG), .30);
      font-weight:800; letter-spacing:.2px; border-radius:999px; padding:6px 10px; text-transform:none;
      animation: bh-green-pulse 2.4s ease-in-out infinite;
    }
    @keyframes bh-green-pulse{
      0%{ box-shadow:0 0 0 0 rgba(var(--bhG), .00), 0 0 12px rgba(var(--bhG), .18) }
      50%{ box-shadow:0 0 0 6px rgba(var(--bhG), .12), 0 0 22px rgba(var(--bhG), .35) }
      100%{ box-shadow:0 0 0 0 rgba(var(--bhG), .00), 0 0 12px rgba(var(--bhG), .18) }
    }

    /* Obrazek w PORADZIE (png) */
    .bh2025-porada__svg img{
      max-width:100%; height:auto; display:block; border-radius:12px;
      border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.04);
    }

    /* Modale ukryte (twardo) */
    .bh2025-modal[aria-hidden="true"],
    .bh2025-porada[aria-hidden="true"]{ display:none }

    /* Selektor jƒôzyka ‚Äì poprawiona czytelno≈õƒá */
    .langpick{display:flex;gap:8px;align-items:center;margin-left:12px}
    .langpick label{font-weight:800;color:#cfe2ff;font-size:13px}
    .langpick select{
      appearance:none;background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.24);
      color:#ffffff; /* PL/EN widoczne */
      border-radius:10px;padding:6px 10px;cursor:pointer;font-weight:900;letter-spacing:.3px
    }
    .langpick option{ color:#0e1230; background:#ffffff } /* lista rozwijana */
  </style>
</head>

<body data-page="home">
  <div class="bh-wallpaper" aria-hidden="true"></div>
  <div class="bh-grid" aria-hidden="true"></div>
  <div class="bh-floor-fade" aria-hidden="true"></div>

  <div class="container">
    <header class="header">
      <div class="brand">
        <h1 data-i18n="brand_title">Boli Help</h1>
        <small data-i18n="brand_sub">Pomoc i pierwsza pomoc w nag≈Çych sytuacjach</small>
      </div>
      <div class="tools" style="display:flex;align-items:center;gap:10px">
        <div class="search" role="search">
          <input type="search" placeholder="Szukaj objawu, czƒô≈õci cia≈Ça lub tematu‚Ä¶" aria-label="Szukaj" />
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
                  stroke="white" stroke-opacity=".7" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <!-- T≈Çumacz lokalny -->
        <div class="langpick" aria-label="Wybierz jƒôzyk">
          <label for="bhLang" data-i18n="lang_label">Wybierz jƒôzyk</label>
          <select id="bhLang" aria-label="Jƒôzyk">
            <option value="pl" selected>PL</option>
            <option value="en">EN</option>
          </select>
        </div>
      </div>
    </header>

    <div class="emergency-list" aria-label="Telefony alarmowe">
      <a href="tel:112">üìû 112</a><a href="tel:999">üöë 999</a><a href="tel:998">üî• 998</a><a href="tel:997">üëÆ 997</a>
    </div>

    <nav class="situations" aria-label="Sytuacje nag≈Çe">
      <a class="pill pill--green" data-porada="zadlawienie" href="#"><span class="ico">ü´Å</span><span data-i18n="pill_choke">Zad≈Çawienie</span></a>
      <a class="pill pill--green" data-porada="reanimacja" href="#"><span class="ico">üöë</span><span data-i18n="pill_cpr">Reanimacja</span></a>
      <a class="pill pill--green" data-porada="wypadek" href="#"><span class="ico">üí•</span><span data-i18n="pill_accident">Wypadek</span></a>
      <a class="pill pill--green" data-porada="pierwszopomoc" href="#"><span class="ico">‚ù§Ô∏è‚Äçü©π</span><span data-i18n="pill_firstaid">Pierwsza pomoc</span></a>
      <a class="pill pill--blue" href="gry.html"><span class="ico">üéÆ</span><span data-i18n="pill_games">Gry / Trening</span></a>
    </nav>

    <!-- Launcher mini-quizu -->
    <div class="bh2025-quiz-launch" aria-hidden="false">
      <button id="bh2025QuizOpen" class="bh2025-cta-quiz" type="button" aria-haspopup="dialog" aria-controls="bh2025QuizModal" data-i18n="quiz_open">
        Sprawd≈∫ siƒô: Pierwsza pomoc
      </button>
    </div>

    <div class="actions" role="navigation" aria-label="Szybkie akcje">
      <button id="btn-112" class="btn btn--red btn--call" type="button">üìû 112</button>
      <button id="btn-hosp" class="btn btn--hosp" type="button" data-i18n="btn_hosp">üè• Szpitale / SOR</button>
      <a id="btn-apteka" class="btn" href="https://www.google.com/maps/search/apteka+otwarta+teraz/" target="_blank" rel="noopener"><span class="badge-round">apteka24</span></a>
      <button id="btn-loc" class="btn" type="button" data-i18n="btn_loc">üìç Zlokalizuj mnie</button>
    </div>

    <div class="subheadline" data-i18n="subheadline">Boli mnie ‚Äî wybierz obszar b√≥lu</div>

    <!-- 3 kafelki -->
    <section class="stack" aria-label="Wyb√≥r postaci"
      style="display:grid;gap:16px;grid-template-columns:repeat(3,1fr);align-items:stretch;">
      <article class="card">
        <a href="kobieta.html">
          <img src="img/kobieta-model1.png" alt="Kobieta ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3 data-i18n="card_woman">Kobieta</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
      <article class="card">
        <a href="mezczyzna.html">
          <img src="img/mezczyzna-model1.png" alt="Mƒô≈ºczyzna ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3 data-i18n="card_man">Mƒô≈ºczyzna</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
      <article class="card">
        <a href="dziecko.html">
          <img src="img/dziecko-model1.png" alt="Dziecko ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3 data-i18n="card_child">Dziecko</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
    </section>
  </div>

  <!-- Modal QUIZ -->
  <div id="bh2025QuizModal" class="bh2025-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="bh2025QuizTitle">
    <div class="bh2025-modal__panel">
      <div class="bh2025-modal__head">
        <div>
          <div id="bh2025QuizTitle" class="bh2025-modal__title" data-i18n="quiz_title">Mini-quiz: czy wiesz co zrobiƒá?</div>
          <div class="bh2025-muted" id="bh2025QuizSubtitle" data-i18n="quiz_sub">3 szybkie pytania: zad≈Çawienie, reanimacja, pozycja bezpieczna.</div>
        </div>
        <button class="bh2025-close" type="button" id="bh2025QuizClose" aria-label="Zamknij" data-i18n="close_btn">‚úï</button>
      </div>
      <div class="bh2025-modal__body">
        <div class="bh2025-progress" aria-label="Postƒôp">
          <div class="bh2025-progress__bar"><span class="bh2025-progress__cursor" id="bh2025QuizCursor"></span></div>
          <div class="bh2025-progress__label"><span id="bh2025QuizStep">1</span>/3</div>
        </div>
        <div class="bh2025-q" id="bh2025QuizQuestion">‚Ä¶</div>
        <div class="bh2025-answers" id="bh2025QuizAnswers"></div>
        <div class="bh2025-actions">
          <button class="bh2025-ghost" type="button" id="bh2025QuizRestart" data-i18n="quiz_restart">Zacznij od nowa</button>
          <button class="bh2025-primary" type="button" id="bh2025QuizNext" data-i18n="quiz_next">Dalej</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal PORADA -->
  <div id="bh2025Porada" class="bh2025-porada" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="bh2025PoradaTitle">
    <div class="bh2025-porada__panel">
      <div class="bh2025-porada__head">
        <div class="bh2025-porada__title" id="bh2025PoradaTitle" data-i18n="advice_title">Porada</div>
        <div class="bh2025-chip" id="bh2025PoradaChip" data-i18n="advice_chip">SOS ‚Ä¢ instrukcja</div>
        <button class="bh2025-close--porada" type="button" id="bh2025PoradaClose" aria-label="Zamknij" data-i18n="close_btn">‚úï</button>
      </div>

      <div class="bh2025-porada__grid">
        <div class="bh2025-porada__svg" id="bh2025PoradaSvg" aria-label="Instrukcja obrazkowa"></div>
        <div class="bh2025-steps">
          <ol id="bh2025PoradaSteps"></ol>
        </div>
      </div>

      <div class="bh2025-video">
        <div class="bh2025-muted" style="margin-bottom:8px;font-weight:800" data-i18n="video_head">Materia≈Ç wideo</div>
        <div id="bh2025VideoWrap">
          <div class="ph" id="bh2025VideoPh">
            <span>üé¨</span>
            <span data-i18n="video_hint">Dodaj plik: <code>assets/videos/&lt;nazwa&gt;.mp4</code> i zaktualizuj mapƒô poni≈ºej.</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Skrypt bazowy strony -->
  <script src="assets/main.js?v=10"></script>

  <!-- I18N (lokalny, bezpieczny) -->
  <script>
  (function(){
    const I18N = {
      pl:{brand_title:"Boli Help",brand_sub:"Pomoc i pierwsza pomoc w nag≈Çych sytuacjach",lang_label:"Wybierz jƒôzyk",
          pill_choke:"Zad≈Çawienie",pill_cpr:"Reanimacja",pill_accident:"Wypadek",pill_firstaid:"Pierwsza pomoc",pill_games:"Gry / Trening",
          quiz_open:"Sprawd≈∫ siƒô: Pierwsza pomoc",quiz_title:"Mini-quiz: czy wiesz co zrobiƒá?",quiz_sub:"3 szybkie pytania: zad≈Çawienie, reanimacja, pozycja bezpieczna.",
          quiz_restart:"Zacznij od nowa",quiz_next:"Dalej",close_btn:"‚úï",
          btn_hosp:"üè• Szpitale / SOR",btn_loc:"üìç Zlokalizuj mnie",subheadline:"Boli mnie ‚Äî wybierz obszar b√≥lu",
          card_woman:"Kobieta",card_man:"Mƒô≈ºczyzna",card_child:"Dziecko",
          advice_title:"Porada",advice_chip:"SOS ‚Ä¢ instrukcja",video_head:"Materia≈Ç wideo",
          video_hint:"Dodaj plik: <code>assets/videos/&lt;nazwa&gt;.mp4</code> i zaktualizuj mapƒô poni≈ºej."},
      en:{brand_title:"Boli Help",brand_sub:"Help & first aid in emergencies",lang_label:"Choose language",
          pill_choke:"Choking",pill_cpr:"CPR",pill_accident:"Accident",pill_firstaid:"First aid",pill_games:"Games / Training",
          quiz_open:"Check yourself: First aid",quiz_title:"Mini-quiz: do you know what to do?",quiz_sub:"3 quick questions: choking, CPR, recovery position.",
          quiz_restart:"Restart",quiz_next:"Next",close_btn:"‚úï",
          btn_hosp:"üè• Hospitals / ER",btn_loc:"üìç Locate me",subheadline:"It hurts ‚Äî choose the body area",
          card_woman:"Woman",card_man:"Man",card_child:"Child",
          advice_title:"Advice",advice_chip:"SOS ‚Ä¢ instruction",video_head:"Video material",
          video_hint:"Add file: <code>assets/videos/&lt;name&gt;.mp4</code> and update the map below."}
    };

    window.__QUIZ_I18N = {
      pl:[
        {q:"Kto≈õ siƒô d≈Çawi i nie mo≈ºe m√≥wiƒá. Co robisz najpierw?",
         a:[{t:"Zachƒôcam do kaszlu, je≈õli nieskuteczny ‚Äî 5 uderze≈Ñ miƒôdzy ≈Çopatki",ok:true},
            {t:"Podajƒô wodƒô, ≈ºeby popchnƒÖƒá kƒôs",ok:false},
            {t:"Wk≈Çadam palec i ‚Äûna ≈õlepo‚Äù pr√≥bujƒô wyjƒÖƒá",ok:false}],
         hintOk:"Tak! Najpierw kaszel. Je≈õli nieskuteczny ‚Üí uderzenia w plecy.",
         hintBad:"Woda/‚Äûwymiatanie‚Äù palcem mo≈ºe pogorszyƒá sytuacjƒô."},
        {q:"Brak oddechu. Co z RKO u doros≈Çego?",
         a:[{t:"Ucisk klatki 100‚Äì120/min, g≈Çƒôboko≈õƒá ~5‚Äì6 cm, centrum mostka",ok:true},
            {t:"Ucisk delikatny 40/min, bez kontroli miejsca",ok:false},
            {t:"Czekam na karetkƒô bez ucisk√≥w",ok:false}],
         hintOk:"Tempo 100‚Äì120/min i ≈õrodek mostka sƒÖ kluczowe.",
         hintBad:"Za wolno/bez ucisk√≥w ‚Äî liczy siƒô szybka, prawid≈Çowa RKO."},
        {q:"Poszkodowany oddycha, ale nie reaguje. Co dalej?",
         a:[{t:"Uk≈Çadam w pozycji bezpiecznej i kontrolujƒô oddech",ok:true},
            {t:"Podajƒô nap√≥j i zostawiam w pozycji siedzƒÖcej",ok:false},
            {t:"K≈Çadƒô na plecach bez kontroli dro≈ºno≈õci",ok:false}],
         hintOk:"Pozycja bezpieczna i sta≈Ça kontrola oddechu.",
         hintBad:"P≈Çyny/siedzƒÖca/na plecach ‚Äî to nie jest bezpieczne."}
      ],
      en:[
        {q:"Someone is choking and can‚Äôt speak. What do you do first?",
         a:[{t:"Encourage coughing; if ineffective ‚Äî 5 back blows",ok:true},
            {t:"Give water to push food down",ok:false},
            {t:"Put a finger inside and sweep blindly",ok:false}],
         hintOk:"Yes! First cough. If ineffective ‚Üí back blows.",
         hintBad:"Water/blind finger sweep can make it worse."},
        {q:"No breathing. What about adult CPR?",
         a:[{t:"Compressions 100‚Äì120/min, depth ~5‚Äì6 cm, center of chest",ok:true},
            {t:"Gentle 40/min, no precise place",ok:false},
            {t:"Wait for ambulance without compressions",ok:false}],
         hintOk:"Rate 100‚Äì120/min and center of sternum are key.",
         hintBad:"Too slow / no compressions ‚Äî start proper CPR."},
        {q:"Casualty breathes but is unresponsive. What next?",
         a:[{t:"Place in recovery position and monitor breathing",ok:true},
            {t:"Give a drink and leave sitting",ok:false},
            {t:"Lay flat on back without airway control",ok:false}],
         hintOk:"Recovery position + continuous monitoring.",
         hintBad:"Drinks/sitting/on the back ‚Äî not safe now."}
      ]
    };

    window.__STEPS_I18N = {
      pl:{zadlawienie:["Zachƒôcaj do kaszlu ‚Äî je≈õli skuteczny, obserwuj.","Brak skutecznego kaszlu: 5 uderze≈Ñ w plecy miƒôdzy ≈Çopatki.","Je≈õli nieskuteczne: 5 uci≈õniƒôƒá nadbrzusza.","Na zmianƒô: 5 plecy ‚Üî 5 nadbrzusze, a≈º do skutku.","Utrata przytomno≈õci: RKO 30:2, wezwij 112, AED."],
          reanimacja:["Sprawd≈∫ bezpiecze≈Ñstwo, reakcjƒô i oddech (max 10 s).","Brak oddechu: zadzwo≈Ñ 112.","Uciski: 100‚Äì120/min, g≈Çƒôb. 5‚Äì6 cm, ≈õrodek mostka.","Po 30 uci≈õniƒôciach 2 oddechy (je≈õli umiesz i chcesz).","Kontynuuj do przyjazdu s≈Çu≈ºb lub powrotu oddechu."],
          wypadek:["Zabezpiecz miejsce.","Oce≈Ñ liczbƒô poszkodowanych i zagro≈ºenia.","Wezwij 112.","Priorytet: oddech, krwotoki (ucisk).","Nie przestawiaj bez potrzeby."],
          pierwszopomoc:["ABC: dro≈ºno≈õƒá, oddech, krƒÖ≈ºenie.","Pozycja bezpieczna przy oddechu.","Ucisk krwotok√≥w.","Oparzenia: ch≈Çodzenie 20 min.","Wezwij pomoc, gdy masz wƒÖtpliwo≈õci."]},
      en:{zadlawienie:["Encourage coughing ‚Äî if effective, observe.","If not effective: 5 back blows between shoulder blades.","If still not: 5 abdominal thrusts.","Alternate: 5 back blows ‚Üî 5 thrusts until success.","If unconscious: CPR 30:2, call 112/911, use AED."],
          reanimacja:["Check safety, response and breathing (max 10 s).","No breathing: call 112/911.","Compressions 100‚Äì120/min, depth 5‚Äì6 cm, center chest.","After 30 compressions give 2 rescue breaths (if trained).","Continue until help arrives or breathing returns."],
          wypadek:["Make the scene safe.","Assess casualties and hazards.","Call 112/911.","Priorities: breathing, severe bleeding (direct pressure).","Do not move unnecessarily."],
          pierwszopomoc:["ABC: airway, breathing, circulation.","Recovery position if breathing.","Control bleeding with direct pressure.","Burns: cool with water 20 min.","When in doubt ‚Äî call for help."]}
    };

    function applyI18n(lang){
      const dict = I18N[lang] || I18N.pl;
      document.documentElement.setAttribute('lang', lang);
      document.documentElement.setAttribute('data-lang', lang);
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(dict[key]!==undefined){ el.innerHTML = dict[key]; }
      });
    }

    // Inicjalizacja i prze≈ÇƒÖcznik
    const sel = document.getElementById('bhLang');
    if(sel && !sel.dataset.bhBound){
      sel.dataset.bhBound = '1';
      sel.addEventListener('change', ()=> applyI18n(sel.value));
      applyI18n(sel.value || 'pl');
    }
  })();
  </script>

  <!-- QUIZ (izolowany od innych skrypt√≥w) -->
  <script>
  (function(){
    const openBtn = document.getElementById('bh2025QuizOpen');
    const modal   = document.getElementById('bh2025QuizModal');
    const closeBtn= document.getElementById('bh2025QuizClose');
    const restart = document.getElementById('bh2025QuizRestart');
    const nextBtn = document.getElementById('bh2025QuizNext');
    const qEl     = document.getElementById('bh2025QuizQuestion');
    const aEl     = document.getElementById('bh2025QuizAnswers');
    const stepEl  = document.getElementById('bh2025QuizStep');
    const cursor  = document.getElementById('bh2025QuizCursor');
    if(!openBtn || !modal || openBtn.dataset.bhBound) return;
    openBtn.dataset.bhBound='1';

    function L(){ return document.documentElement.getAttribute('data-lang') || 'pl'; }
    function Q(){ return (window.__QUIZ_I18N && window.__QUIZ_I18N[L()]) || window.__QUIZ_I18N.pl; }

    let step=0, lock=false, chosen=[];
    function setProgress(total){ stepEl.textContent=(step+1); cursor.style.left=(6+(step/((total-1)||1))*88)+'%'; }
    function render(){
      const data=Q(), item=data[step];
      qEl.textContent=item.q; aEl.innerHTML=''; setProgress(data.length);
      item.a.forEach(opt=>{
        const b=document.createElement('button'); b.type='button'; b.className='bh2025-ans'; b.textContent=opt.t;
        b.addEventListener('click', ()=>{ if(lock) return; lock=true;
          const ok=!!opt.ok; chosen[step]=ok;
          b.classList.add(ok?'correct':'wrong');
          const n=document.createElement('div'); n.className='bh2025-muted'; n.style.marginTop='6px'; n.textContent= ok?item.hintOk:item.hintBad; b.after(n);
          try{ navigator.vibrate && navigator.vibrate(ok?80:160);}catch(_){}
          setTimeout(()=>lock=false,300);
        });
        aEl.appendChild(b);
      });
      const tNext= (L()==='en'?'Next':'Dalej'), tEnd=(L()==='en'?'Finish':'Zako≈Ñcz');
      nextBtn.textContent = step===data.length-1 ? tEnd : tNext;
    }
    function open(){
      const data=Q(); modal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
      step=0; chosen=new Array(data.length).fill(null); render();
    }
    function close(){ modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
    function award(score,total){
      const msg = (L()==='en'?`Great! Score: ${score}/${total}`:`Brawo! Wynik: ${score}/${total}`);
      const t=document.createElement('div');
      Object.assign(t.style,{position:'fixed',left:'50%',bottom:'26px',transform:'translateX(-50%)',
        background:'rgba(60,32,100,.85)',color:'#eef2ff',padding:'10px 14px',border:'1px solid rgba(164,107,255,.35)',
        borderRadius:'12px',boxShadow:'0 10px 26px rgba(8,10,22,.45)',fontWeight:'800',zIndex:10000});
      t.textContent=msg; document.body.appendChild(t); setTimeout(()=>t.remove(),2600);
    }

    // capture = true, ≈ºeby uprzedziƒá inne listenery
    openBtn.addEventListener('click', open, true);
    closeBtn.addEventListener('click', close);
    modal.addEventListener('click', (e)=>{ if(e.target===modal) close(); });
    restart.addEventListener('click', ()=>{ step=0; chosen=new Array(Q().length).fill(null); render(); });
    nextBtn.addEventListener('click', ()=>{
      const data=Q(); if(step<data.length-1){ step++; render(); }
      else{ const score=chosen.reduce((s,v)=>s+(v?1:0),0); award(score,data.length); close(); }
    });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && modal.getAttribute('aria-hidden')==='false') close(); });
  })();
  </script>

  <!-- PORADY (zielone pigu≈Çki) ‚Äî twarde blokowanie nawigacji i wstrzykniƒôƒá -->
  <script>
  (function(){
    const poradaModal  = document.getElementById('bh2025Porada');
    const poradaClose  = document.getElementById('bh2025PoradaClose');
    const poradaTitle  = document.getElementById('bh2025PoradaTitle');
    const svgWrap      = document.getElementById('bh2025PoradaSvg');
    const stepsOl      = document.getElementById('bh2025PoradaSteps');
    const videoWrap    = document.getElementById('bh2025VideoWrap');
    const videoPh      = document.getElementById('bh2025VideoPh');

    if(!poradaModal || poradaModal.dataset.bhBound) return;
    poradaModal.dataset.bhBound='1';

    const IMG = { zadlawienie: 'img/zadlawienie.png', reanimacja: 'img/reanimacja.png', wypadek: 'img/wypadek.png', pierwszopomoc: null };
    const L=()=>document.documentElement.getAttribute('data-lang')||'pl';

    function openPorada(key, title){
      poradaTitle.textContent = title || (L()==='en'?'Advice':'Porada');
      svgWrap.innerHTML=''; const src=IMG[key]; if(src){ const img=new Image(); img.src=src; img.alt=title||key; svgWrap.appendChild(img); }
      stepsOl.innerHTML=''; const steps=(window.__STEPS_I18N?.[L()]?.[key])||[];
      steps.forEach(txt=>{ const li=document.createElement('li'); li.textContent=txt; stepsOl.appendChild(li); });
      videoWrap.innerHTML=''; videoWrap.appendChild(videoPh.cloneNode(true));
      poradaModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
    }
    function closePorada(){ poradaModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }

    poradaClose.addEventListener('click', closePorada);
    poradaModal.addEventListener('click', (e)=>{ if(e.target===poradaModal) closePorada(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && poradaModal.getAttribute('aria-hidden')==='false') closePorada(); });

    const nav = document.querySelector('nav.situations');
    if(nav && !nav.dataset.bhBound){
      nav.dataset.bhBound='1';
      // CAPTURE + twarde blokowanie wszystkich dalszych handler√≥w
      nav.addEventListener('click', (e)=>{
        const a = e.target.closest('a[data-porada]');
        if(!a) return;
        e.preventDefault();
        e.stopPropagation();
        if(e.stopImmediatePropagation) e.stopImmediatePropagation();
        const key = a.getAttribute('data-porada');
        const title = a.querySelector('[data-i18n]')?.textContent?.trim() || a.textContent.trim();
        openPorada(key, title);
      }, true);
    }
  })();
  </script>
</body>
</html>
