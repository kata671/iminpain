<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boli Help ‚Äî Strona g≈Ç√≥wna</title>
  <meta name="theme-color" content="#0e1230" />

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="assets/style.css?v=10" />

  <style>
    html,body{height:100%}
    body[data-page="home"]{
      position:relative; background:#0e1230 !important; color:#eef2ff;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    /* wy≈ÇƒÖcz pseudo-t≈Ça tylko na home */
    body[data-page="home"]::before,
    body[data-page="home"]::after,
    body[data-page="home"] .container::before,
    body[data-page="home"] .container::after{content:none !important;display:none !important}

    /* TAPETA */
    .bh-wallpaper,.bh-grid{position:fixed;inset:0;pointer-events:none}
    .bh-wallpaper{
      z-index:0;
      background:
        radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.30), transparent 60%),
        radial-gradient(36vw 30vh at 84% 10%, rgba(94,234,212,.22), transparent 60%),
        radial-gradient(40vw 44vh at 20% 88%, rgba(164,107,255,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
      filter: blur(10px) saturate(118%);
    }
    .bh-grid{
      z-index:1; opacity:.22;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='104' viewBox='0 0 120 104'%3E%3Cg fill='none' stroke='rgba(173,216,255,0.26)' stroke-width='1'%3E%3Cpolygon points='30,0 90,0 120,52 90,104 30,104 0,52'/%3E%3C/g%3E%3C/svg%3E");
      background-size:160px 138px; background-position:center;
    }
    .bh-floor-fade{
      position:fixed; left:0; right:0; bottom:0; height:120px; z-index:2; pointer-events:none;
      background:linear-gradient(180deg, rgba(14,18,48,0), rgba(14,18,48,.35) 55%, rgba(14,18,48,.6));
    }
    .container{position:relative;z-index:3;background:transparent !important;max-width:1100px;margin:0 auto;padding:0 16px}

    /* 3 KAFELKI ‚Äì sztywno */
    @media (min-width:981px){ section.stack[style]{grid-template-columns:repeat(3,1fr) !important;} }
    @media (max-width:980px){ section.stack[style]{grid-template-columns:repeat(2,1fr) !important;} }
    @media (max-width:640px){ section.stack[style]{grid-template-columns:1fr !important;} }
    section.stack[style] > *{grid-column:auto !important;min-width:0 !important}

    .card{border-radius:18px;overflow:hidden;background:rgba(60,32,100,.32);border:1px solid rgba(164,107,255,.22);box-shadow:0 10px 22px rgba(255,110,199,.12), 0 0 0 1px rgba(164,107,255,.14) inset;min-height:240px}
    .card a{display:grid;grid-template-rows:minmax(180px,240px) auto;height:100%;text-decoration:none;color:inherit}
    .card img{width:100%;height:100%;object-fit:contain;object-position:center;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02))}
    .card .caption{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px 14px;border-top:1px solid rgba(164,107,255,.22);background:rgba(255,255,255,.04)}

    /* Zielone pigu≈Çki */
    :root{ --bhG:34,227,160; --bhG2:20,160,120; }
    .situations .pill{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;text-decoration:none;font-weight:900;letter-spacing:.2px}
    .situations .pill .ico{display:inline-grid;place-items:center;width:22px;height:22px;border-radius:6px}
    .situations .pill.pill--green{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)), rgba(var(--bhG2), .15);
      color:#eafff7; border:1px solid rgba(var(--bhG), .55);
      box-shadow:0 8px 20px rgba(8,10,22,.35), 0 0 0 1px rgba(var(--bhG), .25) inset, 0 0 18px rgba(var(--bhG), .18);
      backdrop-filter:saturate(125%) blur(4px);
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    }
    .situations .pill.pill--green .ico{
      background: rgba(var(--bhG), .18); box-shadow: inset 0 0 0 1px rgba(var(--bhG), .25);
    }
    .situations .pill.pill--green:hover{transform:translateY(-1px);border-color:rgba(var(--bhG), .85)}

    /* Niebieska pigu≈Çka: Gry / Trening */
    .situations .pill.pill--blue{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      color:#e6f0ff; border:1px solid rgba(164,107,255,.55);
      box-shadow:0 8px 22px rgba(94,234,212,.2), 0 0 22px rgba(164,107,255,.28);
    }
    .situations .pill.pill--blue .ico{
      background: rgba(164,107,255,.22); box-shadow: inset 0 0 0 1px rgba(164,107,255,.35);
    }

    /* QUIZ ‚Äì drobne poprawki czytelno≈õci + nowa odznaka + blokada wielokliku */
    .bh2025-answers .bh2025-ans{color:#eef2ff}
    .bh2025-answers .bh2025-ans[disabled]{opacity:.75; cursor:not-allowed; transform:none !important}
    .bh2025-quiz-badge{
      position:fixed; left:50%; top:22%; transform:translateX(-50%);
      z-index:10002; background:rgba(60,32,100,.9); color:#fff;
      border:1px solid rgba(164,107,255,.45); border-radius:14px;
      padding:14px 18px; box-shadow:0 16px 36px rgba(8,10,22,.6); font-weight:900; letter-spacing:.2px;
      display:flex; align-items:center; gap:12px;
    }
    .bh2025-quiz-badge .emj{font-size:26px; line-height:1}

    /* Apteka24 znaczek ‚Äì zachowujemy zielone glow (dzia≈Ça jak wcze≈õniej) */
    #btn-apteka .badge-round{
      background: rgba(var(--bhG), .18);
      color: #eafff7;
      border:1px solid rgba(var(--bhG), .55);
      box-shadow: 0 6px 18px rgba(8,10,22,.35), inset 0 0 0 1px rgba(var(--bhG), .20), 0 0 14px rgba(var(--bhG), .30);
      font-weight:800;
    }
  </style>
</head>

<body data-page="home">
  <div class="bh-wallpaper" aria-hidden="true"></div>
  <div class="bh-grid" aria-hidden="true"></div>
  <div class="bh-floor-fade" aria-hidden="true"></div>

  <div class="container">
    <header class="header">
      <div class="brand">
        <h1>Boli Help</h1>
        <small>Pomoc i pierwsza pomoc w nag≈Çych sytuacjach</small>
      </div>
      <div class="tools">
        <div class="search" role="search">
          <input type="search" placeholder="Szukaj objawu, czƒô≈õci cia≈Ça lub tematu‚Ä¶" aria-label="Szukaj" />
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
                  stroke="white" stroke-opacity=".7" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
      </div>
    </header>

    <div class="emergency-list" aria-label="Telefony alarmowe">
      <a href="tel:112">üìû 112</a><a href="tel:999">üöë 999</a><a href="tel:998">üî• 998</a><a href="tel:997">üëÆ 997</a>
    </div>

    <nav class="situations" aria-label="Sytuacje nag≈Çe">
      <!-- zielone: kierujƒÖ do szczeg√≥≈Ç√≥w; nic nie przechwytujemy JS -->
      <a class="pill pill--green" href="szczegoly.html?typ=porada&czesc=zadlawienie&label=Zad%C5%82awienie"><span class="ico">ü´Å</span>Zad≈Çawienie</a>
      <a class="pill pill--green" href="szczegoly.html?typ=porada&czesc=reanimacja&label=Reanimacja"><span class="ico">üöë</span>Reanimacja</a>
      <a class="pill pill--green" href="szczegoly.html?typ=porada&czesc=wypadek&label=Wypadek"><span class="ico">üí•</span>Wypadek</a>
      <a class="pill pill--green" href="szczegoly.html?typ=porada&czesc=pierwszopomoc&label=Pierwsza%20pomoc"><span class="ico">‚ù§Ô∏è‚Äçü©π</span>Pierwsza pomoc</a>
      <a class="pill pill--blue" href="gry.html"><span class="ico">üéÆ</span>Gry / Trening</a>
    </nav>

    <!-- Launcher mini-quizu -->
    <div class="bh2025-quiz-launch" aria-hidden="false" aria-label="Sekcja edukacyjna">
      <span class="dot" aria-hidden="true" style="width:9px;height:9px;border-radius:50%;background:#5eead4;box-shadow:0 0 12px #5eead4"></span>
      <button id="bh2025QuizOpen" class="bh2025-cta-quiz" type="button" aria-haspopup="dialog" aria-controls="bh2025QuizModal">
        Sprawd≈∫ siƒô: Pierwsza pomoc
      </button>
    </div>

    <div class="actions" role="navigation" aria-label="Szybkie akcje">
      <button id="btn-112" class="btn btn--red btn--call" type="button" aria-label="Zadzwo≈Ñ na 112">üìû 112</button>
      <button id="btn-hosp" class="btn btn--hosp" type="button" aria-label="Szpitale i SOR">üè• Szpitale / SOR</button>
      <a id="btn-apteka" class="btn" href="https://www.google.com/maps/search/apteka+otwarta+teraz/" target="_blank" rel="noopener"><span class="badge-round">apteka24</span></a>
      <button id="btn-loc" class="btn" type="button">üìç Zlokalizuj mnie</button>
    </div>

    <div class="subheadline">Boli mnie ‚Äî wybierz obszar b√≥lu</div>

    <!-- 3 kafelki ‚Äì sztywno -->
    <section class="stack" aria-label="Wyb√≥r postaci"
      style="display:grid;gap:16px;grid-template-columns:repeat(3,1fr);align-items:stretch;">
      <article class="card">
        <a href="kobieta.html">
          <img src="img/kobieta-model1.png" alt="Kobieta ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3>Kobieta</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
      <article class="card">
        <a href="mezczyzna.html">
          <img src="img/mezczyzna-model1.png" alt="Mƒô≈ºczyzna ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3>Mƒô≈ºczyzna</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
      <article class="card">
        <a href="dziecko.html">
          <img src="img/dziecko-model1.png" alt="Dziecko ‚Äî wybierz czƒô≈õƒá cia≈Ça" onerror="this.src='img/placeholder.png'"/>
          <div class="caption"><h3>Dziecko</h3><span class="arrow" aria-hidden="true">‚Üí</span></div>
        </a>
      </article>
    </section>
  </div>

  <!-- Modal QUIZ -->
  <div id="bh2025QuizModal" class="bh2025-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="bh2025QuizTitle">
    <div class="bh2025-modal__panel">
      <div class="bh2025-modal__head">
        <div>
          <div id="bh2025QuizTitle" class="bh2025-modal__title">Mini-quiz: czy wiesz co zrobiƒá?</div>
          <div class="bh2025-muted" id="bh2025QuizSubtitle">6 szybkich pyta≈Ñ: zad≈Çawienie, RKO, krwotok, oparzenie, uraz szyi.</div>
        </div>
        <button class="bh2025-close" type="button" id="bh2025QuizClose" aria-label="Zamknij">‚úï</button>
      </div>
      <div class="bh2025-modal__body">
        <div class="bh2025-progress" aria-label="Postƒôp">
          <div class="bh2025-progress__bar"><span class="bh2025-progress__cursor" id="bh2025QuizCursor"></span></div>
          <div class="bh2025-progress__label"><span id="bh2025QuizStep">1</span>/6</div>
        </div>
        <div class="bh2025-q" id="bh2025QuizQuestion">‚Ä¶</div>
        <div class="bh2025-answers" id="bh2025QuizAnswers"></div>
        <div class="bh2025-actions">
          <button class="bh2025-ghost" type="button" id="bh2025QuizRestart">Zacznij od nowa</button>
          <button class="bh2025-primary" type="button" id="bh2025QuizNext">Dalej</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Tw√≥j skrypt bazowy strony -->
  <script src="assets/main.js?v=10"></script>

  <!-- QUIZ (rozszerzony: 6 pyta≈Ñ, blokada wielokliku, wynik + odznaka) -->
  <script>
  (function(){
    const modal   = document.getElementById('bh2025QuizModal');
    const openBtn = document.getElementById('bh2025QuizOpen');
    const closeBtn= document.getElementById('bh2025QuizClose');
    const restart = document.getElementById('bh2025QuizRestart');
    const nextBtn = document.getElementById('bh2025QuizNext');
    const qEl     = document.getElementById('bh2025QuizQuestion');
    const aEl     = document.getElementById('bh2025QuizAnswers');
    const stepEl  = document.getElementById('bh2025QuizStep');
    const cursor  = document.getElementById('bh2025QuizCursor');
    if(!modal || modal.dataset.bhBoundNew) return; modal.dataset.bhBoundNew='1';

    const QA = {
      pl:[
        {q:"Kto≈õ siƒô d≈Çawi i nie mo≈ºe m√≥wiƒá. Co robisz najpierw?",
         a:[{t:"Zachƒôcam do kaszlu; je≈õli nieskuteczny ‚Äî 5 uderze≈Ñ w plecy",ok:true},
            {t:"Podajƒô wodƒô, ≈ºeby popchnƒÖƒá kƒôs",ok:false},
            {t:"‚ÄûNa ≈õlepo‚Äù palcem pr√≥bujƒô wyjƒÖƒá",ok:false}],
         hintOk:"Tak! Najpierw kaszel, potem plecy.", hintBad:"Woda/palec mogƒÖ pogorszyƒá."},
        {q:"Brak oddechu. Co z RKO u doros≈Çego?",
         a:[{t:"Ucisk 100‚Äì120/min, 5‚Äì6 cm, ≈õrodek mostka",ok:true},
            {t:"Delikatnie 40/min",ok:false},
            {t:"Czekam na karetkƒô",ok:false}],
         hintOk:"Tempo i miejsce sƒÖ kluczowe.", hintBad:"Zaczynamy prawid≈Çowe RKO."},
        {q:"Oddycha, ale nie reaguje. Co dalej?",
         a:[{t:"Pozycja bezpieczna + kontrola oddechu",ok:true},
            {t:"Podajƒô nap√≥j i sadzam",ok:false},
            {t:"K≈Çadƒô na plecach bez kontroli",ok:false}],
         hintOk:"Pozycja bezpieczna + nadz√≥r.", hintBad:"To nie jest bezpieczne."},
        {q:"Krwotok z przedramienia. Najlepszy pierwszy krok?",
         a:[{t:"Bezpo≈õredni ucisk ja≈Çowym opatrunkiem",ok:true},
            {t:"Przep≈Çukanie rany i czekanie",ok:false},
            {t:"Natychmiast zak≈Çadam stazƒô",ok:false}],
         hintOk:"Ucisk to podstawa.", hintBad:"Najpierw ucisk, staza nie zawsze."},
        {q:"Oparzenie wrzƒÖtkiem (≈õwie≈ºe, bez pƒôcherzy). Co robisz?",
         a:[{t:"Ch≈Çodzƒô bie≈ºƒÖcƒÖ wodƒÖ ~20 min",ok:true},
            {t:"Smarujƒô t≈ÇustƒÖ ma≈õciƒÖ",ok:false},
            {t:"Przyk≈Çadam l√≥d",ok:false}],
         hintOk:"Ch≈Çodzenie wodƒÖ, nie lodem ‚Äî bez ma≈õci.", hintBad:"L√≥d/ma≈õci ‚Äî nie."},
        {q:"Uraz szyi po kolizji. Poszkodowany przytomny. Co z pozycjƒÖ?",
         a:[{t:"Nie poruszam, stabilizujƒô g≈Çowƒô w osi",ok:true},
            {t:"Sadzam, ≈ºeby wygodniej oddycha≈Ç",ok:false},
            {t:"Przenoszƒô na pobocze",ok:false}],
         hintOk:"Stabilizacja i bezpiecze≈Ñstwo miejsca.", hintBad:"Nie przemieszczaj bez potrzeby."}
      ],
      en:[
        {q:"Someone is choking and can‚Äôt speak. What first?",
         a:[{t:"Encourage cough; if ineffective ‚Äî 5 back blows",ok:true},
            {t:"Give water to push it down",ok:false},
            {t:"Blind finger sweep",ok:false}],
         hintOk:"Yes ‚Äî cough, then back blows.", hintBad:"Water/finger sweep is risky."},
        {q:"No breathing. Adult CPR?",
         a:[{t:"100‚Äì120/min, 5‚Äì6 cm, center chest",ok:true},
            {t:"40/min gently",ok:false},
            {t:"Wait for EMS",ok:false}],
         hintOk:"Rate and position are key.", hintBad:"Start proper CPR."},
        {q:"Breathing but unresponsive. Next?",
         a:[{t:"Recovery position + monitor",ok:true},
            {t:"Give drink and leave sitting",ok:false},
            {t:"Lay flat on back",ok:false}],
         hintOk:"Recovery position.", hintBad:"Not safe now."},
        {q:"Forearm bleeding. Best first step?",
         a:[{t:"Direct pressure with dressing",ok:true},
            {t:"Rinse and wait",ok:false},
            {t:"Tourniquet immediately",ok:false}],
         hintOk:"Direct pressure first.", hintBad:"Tourniquet not always first."},
        {q:"Fresh scald burn, no blisters. You should‚Ä¶",
         a:[{t:"Cool under running water ~20 min",ok:true},
            {t:"Apply greasy ointment",ok:false},
            {t:"Use ice directly",ok:false}],
         hintOk:"Cool with water, not ice.", hintBad:"No ice/greasy creams."},
        {q:"Neck injury in a crash, patient conscious. Position?",
         a:[{t:"Don‚Äôt move; stabilize in-line",ok:true},
            {t:"Sit them up for comfort",ok:false},
            {t:"Carry to roadside",ok:false}],
         hintOk:"Stabilize and keep safe.", hintBad:"Avoid unnecessary moves."}
      ]
    };

    const L = ()=> (window.__getLang && window.__getLang()) || 'pl';
    const Q = ()=> QA[L()] || QA.pl;

    let step=0, chosen=[], answered=false;

    function shuffle(arr){
      const a=arr.slice(); for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
      return a;
    }
    function setProgress(total){ stepEl.textContent=(step+1); cursor.style.left=(6+(step/((total-1)||1))*88)+'%'; }

    function render(){
      const data=Q(), item=data[step]; answered=false;
      qEl.textContent=item.q; aEl.innerHTML=''; setProgress(data.length);
      const variants = shuffle(item.a);
      variants.forEach(opt=>{
        const b=document.createElement('button');
        b.type='button'; b.className='bh2025-ans'; b.textContent=opt.t;
        b.addEventListener('click', ()=>{
          if(answered) return;
          answered = true;
          const ok=!!opt.ok; chosen[step]=ok;

          // zablokuj wszystkie przyciski, poka≈º poprawnƒÖ
          [...aEl.querySelectorAll('.bh2025-ans')].forEach(btn=>{
            btn.disabled = true;
            const v = variants.find(v=>v.t===btn.textContent);
            if(v && v.ok) btn.classList.add('correct');
          });
          b.classList.toggle('wrong', !ok);

          // feedback
          const n=document.createElement('div');
          n.className='bh2025-muted'; n.style.marginTop='6px'; n.style.color='#eaf2ff';
          n.textContent = ok ? (item.hintOk||'‚úî') : (item.hintBad||'‚úñ');
          b.after(n);

          try{ navigator.vibrate && navigator.vibrate(ok?80:160);}catch(_){}
        });
        aEl.appendChild(b);
      });

      nextBtn.textContent = (L()==='en') ? (step===Q().length-1?'Finish':'Next') : (step===Q().length-1?'Zako≈Ñcz':'Dalej');
    }

    function open(){
      const data=Q(); modal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
      step=0; chosen=new Array(data.length).fill(null); render();
    }
    function close(){ modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }

    // konfetti
    function confetti(score, total){
      const c=document.createElement('canvas'); c.width=innerWidth; c.height=innerHeight;
      Object.assign(c.style,{position:'fixed',inset:'0',pointerEvents:'none',zIndex:10001});
      document.body.appendChild(c);
      const ctx=c.getContext('2d');
      let parts=Array.from({length: score===total? 160:110},()=>({
        x:Math.random()*c.width, y:-20,
        vx:-1+Math.random()*2, vy:2+Math.random()*2.5,
        size:3+Math.random()*4, rot:Math.random()*6, vr:-.2+Math.random()*.4,
        color: score===total ? ['#5eead4','#a46bff','#ffd16c'][Math.floor(Math.random()*3)] : 'rgba(255,255,255,.9)',
        life: 120
      }));
      (function tick(){
        ctx.clearRect(0,0,c.width,c.height);
        parts.forEach(p=>{
          p.x+=p.vx; p.y+=p.vy; p.rot+=p.vr; p.vy+=0.02; p.life--;
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot);
          ctx.fillStyle=p.color; ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size);
          ctx.restore();
        });
        parts=parts.filter(p=>p.life>0);
        if(parts.length) requestAnimationFrame(tick); else c.remove();
      })();
    }

    function showBadge(score,total){
      const good = score>=Math.ceil(total*0.8); // 5/6+
      const box=document.createElement('div'); box.className='bh2025-quiz-badge';
      const title = (L()==='en') ? (good?'Expert First Aid!':'Nice try!') : (good?'Ekspert pierwszej pomocy!':'Dobry wynik!');
      box.innerHTML = `<span class="emj">${good?'üèÖ':'üéâ'}</span><span>${title} ‚Äî ${score}/${total}</span>`;
      document.body.appendChild(box);
      setTimeout(()=>box.remove(), 3200);
    }

    function finish(){
      const data=Q(); const score=chosen.reduce((s,v)=>s+(v?1:0),0);
      confetti(score,data.length);
      showBadge(score,data.length);
      close();
    }

    // otwieranie/zamykanie
    if(openBtn && !openBtn.dataset.bhBound){
      openBtn.dataset.bhBound='1';
      openBtn.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation(); open(); }, true);
    }
    closeBtn.addEventListener('click', close);
    modal.addEventListener('click', (e)=>{ if(e.target===modal) close(); });
    restart.addEventListener('click', ()=>{ step=0; chosen=new Array(Q().length).fill(null); render(); });

    nextBtn.addEventListener('click', ()=>{
      if(chosen[step]===null){
        try{navigator.vibrate&&navigator.vibrate([40,40,40]);}catch(_){}
        const n=document.createElement('div');
        n.className='bh2025-muted'; n.style.marginTop='6px'; n.style.color='#ffd16c';
        n.textContent = (L()==='en')?'Choose an answer to continue‚Ä¶':'Wybierz odpowied≈∫, aby przej≈õƒá dalej‚Ä¶';
        if(!aEl.querySelector('.need-choose')){ n.classList.add('need-choose'); aEl.appendChild(n); }
        return;
      }
      if(step < Q().length-1){ step++; render(); }
      else { finish(); }
    });

    document.addEventListener('keydown', (e)=>{
      if(e.key==='Escape' && modal.getAttribute('aria-hidden')==='false') close();
      if(modal.getAttribute('aria-hidden')==='false'){
        const options=[...aEl.querySelectorAll('.bh2025-ans')];
        if(e.key==='ArrowDown'||e.key==='ArrowUp'){
          e.preventDefault();
          const focusable=options.filter(b=>!b.disabled);
          if(!focusable.length) return;
          const idx=focusable.indexOf(document.activeElement);
          const next=(e.key==='ArrowDown') ? (idx+1)%focusable.length : (idx-1+focusable.length)%focusable.length;
          focusable[next].focus();
        }
        if(e.key==='Enter' && document.activeElement && document.activeElement.classList.contains('bh2025-ans')){
          e.preventDefault(); document.activeElement.click();
        }
      }
    });
  })();
  </script>

  <!-- (opcjonalnie) Wyszukiwarka z podpowiedziami ‚Äì je≈õli u≈ºywacie w main.js, ten blok mo≈ºna pominƒÖƒá -->
  <!-- <script> ... wasz istniejƒÖcy skrypt suggest ... </script> -->
</body>
</html>
