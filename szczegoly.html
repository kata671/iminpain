<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SzczegÃ³Å‚y â€” objawy i pomoc</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#7a4dff" />
  <meta name="description" content="Przyczyny, objawy, leczenie i pierwsza pomoc dla wybranej czÄ™Å›ci ciaÅ‚a." />
  <style>
    /* â€”â€”â€” DODATKI TYLKO DLA TEJ STRONY â€”â€”â€” */
    .detail-hero {
      display:block; margin:10px auto 14px; max-width:min(960px, 95vw);
      border-radius:14px; overflow:hidden; border:1px solid var(--border);
      background: var(--card);
      box-shadow: 0 0 18px rgba(122,77,255,.28), 0 0 36px rgba(80,180,255,.18);
    }
    .detail-hero img {
      display:block; width:100%; height:auto; object-fit:cover;
      max-height: 320px; /* kompakt â€“ Å‚adnie mieÅ›ci siÄ™ na telefonie */
    }
    .mini-chips { display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin: 6px 0 2px; }
    .mini-chip {
      display:inline-flex; align-items:center; gap:6px; font-weight:700; font-size:.95rem;
      padding:6px 10px; border-radius:999px; border:1px solid var(--border); background: var(--card);
      box-shadow: var(--glow);
    }
    .mini-chip img.thumb { width:18px; height:18px; border-radius:4px; object-fit:cover; }
    .section h2 { display:flex; align-items:center; gap:8px; }
  </style>
</head>

<body class="bg-med">
  <!-- Quickbar (jak u Ciebie) -->
  <nav class="quickbar">
    <a href="tel:112">ğŸ“ 112</a>
    <a href="lokalizacja.html">ğŸ“ Lokalizacja</a>
    <a href="pierwsza-pomoc.html">â›‘ï¸ Pierwsza pomoc</a>
    <input id="search" type="search" placeholder="np. bÃ³l oka, nos..." />
    <button id="search-btn">ğŸ”</button>
    <button id="btn-voice" title="Szukaj gÅ‚osem">ğŸ¤</button>
    <button id="theme-toggle" class="theme-toggle" title="Jasny/Ciemny">â˜€ï¸/ğŸŒ™</button>
  </nav>

  <header class="site-header">
    <a class="back" href="javascript:history.back()">â† WrÃ³Ä‡</a>
    <h1 id="title">SzczegÃ³Å‚y</h1>
    <!-- drobne emotki + miniaturki (opcjonalne) -->
    <div class="mini-chips" id="miniChips" aria-label="Szybkie emotki">
      <!-- zawartoÅ›Ä‡ uzupeÅ‚nia skrypt -->
    </div>
  </header>

  <!-- HERO ZDJÄ˜CIE (automatycznie podmieniane) -->
  <figure class="detail-hero" id="detailHero" hidden>
    <!-- obraz(y) podstawia skrypt -->
  </figure>

  <main class="container">
    <!-- Tu Twoja treÅ›Ä‡: PRZYCZYNY / OBJAWY / POMOC / LEKI / LEKARZE ... -->
    <section class="section card" id="przyczyny">
      <h2>ğŸ§© Przyczyny</h2>
      <ul id="list-przyczyny">
        <li>â€”</li>
      </ul>
    </section>

    <section class="section card" id="objawy">
      <h2>ğŸ” Objawy</h2>
      <ul id="list-objawy">
        <li>â€”</li>
      </ul>
    </section>

    <section class="section card" id="pierwsza-pomoc">
      <h2>â›‘ï¸ Pierwsza pomoc</h2>
      <ul id="list-pp">
        <li>â€”</li>
      </ul>
    </section>

    <section class="section card" id="leki">
      <h2>ğŸ’Š Leki</h2>
      <div>
        <span class="pill pill-otc">Bez recepty</span>
        <span class="pill pill-rx">Na receptÄ™</span>
      </div>
      <ul id="list-leki">
        <li>â€”</li>
      </ul>
    </section>

    <section class="section card" id="lekarze">
      <h2>ğŸ©º Lekarze</h2>
      <ul id="list-lekarze">
        <li>â€”</li>
      </ul>
    </section>
  </main>

  <footer class="site-footer"><small>Â© 2025 â€¢ Boli-mnie.pl</small></footer>

  <script>
    // â€”â€” Parser ID z query (wspiera kilka form, np. glowa_k | kobieta-glowa | oczy_k itd.)
    const rawId = new URLSearchParams(location.search).get('id') || '';
    function normId(q){
      let id = q.toLowerCase().trim();
      id = id.replace(/\s+/g,'-');
      // zamiana podkreÅ›lnikÃ³w na myÅ›lnik
      id = id.replace(/_/g,'-');
      // normalizacja wariantÃ³w â€˜oczyâ€™ -> â€˜okoâ€™
      id = id.replace(/\boczy\b/g,'oko');
      return id;
    }
    const id = normId(rawId);

    // â€” Ustalenie osoby i czÄ™Å›ci ciaÅ‚a
    function whoPart(id){
      // moÅ¼liwe: 'kobieta-glowa', 'mezczyzna-glowa', 'dziecko-glowa'
      let osoba = null, part = null;
      const people = ['kobieta','mezczyzna','dziecko'];
      for(const p of people){
        if(id.startsWith(p+'-')){ osoba = p; part = id.slice(p.length+1); break; }
      }
      // alternatywa: 'glowa-k' / 'glowa-m' / 'glowa-d'
      if(!osoba){
        const m = id.match(/^(.*?)-(k|m|d)$/);
        if(m){
          part = m[1];
          osoba = m[2]==='k'?'kobieta':m[2]==='m'?'mezczyzna':'dziecko';
        }
      }
      return {osoba, part};
    }
    const ctx = whoPart(id);

    // â€” Mapy obrazÃ³w (portrety jako fallback dla "gÅ‚owa")
    const PORTRAIT = {
      kobieta: 'img/kobieta-final.png',
      mezczyzna: 'img/mezczyzna-final.png',
      dziecko: 'img/dziecko-final.png'
    };

    // â€” PrÃ³by zaÅ‚adowania obrazÃ³w do hero:
    // 1) dedykowana miniatura o nazwie dokÅ‚adnie jak id (np. img/kobieta-oko.png)
    // 2) jeÅ›li czÄ™Å›Ä‡ to "glowa" -> portret osoby
    const hero = document.getElementById('detailHero');
    const title = document.getElementById('title');

    function tryAppendImg(src){
      const img = new Image();
      img.loading = 'eager';
      img.decoding = 'async';
      img.alt = '';
      img.src = src + (src.includes('?')?'':'?v=1');
      img.onerror = ()=> img.remove();
      img.onload = ()=> { hero.hidden = false; };
      hero.appendChild(img);
    }

    // Ustaw tytuÅ‚ Å‚adnie (np. "GÅ‚owa â€” kobieta")
    function prettyTitle(osoba, part){
      const mapPart = { glowa:'GÅ‚owa', oko:'Oko', nos:'Nos', ucho:'Ucho', usta:'Usta' };
      const mapOsoba = { kobieta:'kobieta', mezczyzna:'mÄ™Å¼czyzna', dziecko:'dziecko' };
      const p = mapPart[part] || part || 'SzczegÃ³Å‚y';
      const o = mapOsoba[osoba] || '';
      return o ? `${p} â€” ${o}` : p;
    }

    // uruchom
    (function init(){
      title.textContent = prettyTitle(ctx.osoba, ctx.part);

      // 1) sprÃ³buj dedykowany plik 1:1 (jeÅ›li kiedyÅ› go dodasz)
      if(id){
        tryAppendImg(`img/${id}.png`);
      }
      // 2) dla "gÅ‚owa" pokaÅ¼ portret (spÃ³jny z TwojÄ… stronÄ… gÅ‚Ã³wnÄ…)
      if(ctx.part === 'glowa' && ctx.osoba && PORTRAIT[ctx.osoba]){
        tryAppendImg(PORTRAIT[ctx.osoba]);
      }

      // MINIMALNE PRZYKÅADOWE TREÅšCI (moÅ¼esz podmieniÄ‡ wÅ‚asnymi)
      const P = document.getElementById('list-przyczyny');
      const O = document.getElementById('list-objawy');
      const PP = document.getElementById('list-pp');
      const Leki = document.getElementById('list-leki');
      const Lekarze = document.getElementById('list-lekarze');

      // czyÅ›cimy â€â€”â€
      [P,O,PP,Leki,Lekarze].forEach(ul=>ul.innerHTML='');

      if(ctx.part === 'glowa'){
        P.innerHTML = `
          <li>NapiÄ™ciowe bÃ³le gÅ‚owy (stres, przeciÄ…Å¼enie miÄ™Å›ni karku)</li>
          <li>Migrena (czasem z aurÄ…: mroczki, Å›wiatÅ‚owstrÄ™t)</li>
          <li>Zatokowy bÃ³l (infekcja, alergia)</li>
        `;
        O.innerHTML = `
          <li>TÄ™py ucisk / pulsujÄ…cy bÃ³l, nadwraÅ¼liwoÅ›Ä‡ na Å›wiatÅ‚o/dÅºwiÄ™k</li>
          <li>MdÅ‚oÅ›ci, czasem wymioty</li>
          <li>Przy zatokach: nasilenie przy pochylaniu, katar</li>
        `;
        PP.innerHTML = `
          <li>Odpoczynek w cichym, zaciemnionym miejscu</li>
          <li>Nawodnienie, zimny okÅ‚ad na czoÅ‚o/kark</li>
          <li>W razie potrzeby leki OTC (np. ibuprofen/paracetamol wg ulotki)</li>
        `;
        Leki.innerHTML = `
          <li><span class="pill pill-otc">Bez recepty</span> paracetamol, ibuprofen, naproksen</li>
          <li><span class="pill pill-rx">Na receptÄ™</span> tryptany, leki profilaktyczne (wg lekarza)</li>
        `;
        Lekarze.innerHTML = `
          <li>POZ / Lekarz rodzinny</li>
          <li>Neurolog (migrena, przewlekÅ‚e bÃ³le)</li>
          <li>Laryngolog (podejrzenie zapalenia zatok)</li>
        `;
      } else {
        // domyÅ›lne wypeÅ‚nienie dla innych czÄ™Å›ci (zostawione â€szablonowoâ€)
        P.innerHTML = `<li>NajczÄ™stsze przyczyny w tej okolicy ciaÅ‚a.</li>`;
        O.innerHTML = `<li>NajczÄ™stsze objawy do obserwacji.</li>`;
        PP.innerHTML = `<li>NajwaÅ¼niejsze kroki pierwszej pomocy.</li>`;
        Leki.innerHTML = `<li><span class="pill pill-otc">Bez recepty</span> â€” wg wskazaÅ„.</li><li><span class="pill pill-rx">Na receptÄ™</span> â€” wg lekarza.</li>`;
        Lekarze.innerHTML = `<li>WÅ‚aÅ›ciwa specjalizacja wg objawÃ³w.</li>`;
      }

      // MAÅE MINIATURKI PRZY EMOTKACH (opcjonalne chipsy)
      // dodajemy 1 maÅ‚y podglÄ…d jeÅ›li to gÅ‚owa
      const chips = document.getElementById('miniChips');
      const chip = (label, src) => {
        const a = document.createElement('a');
        a.className = 'mini-chip';
        a.href = location.href;
        a.innerHTML = `${label}`;
        if(src){
          const img = document.createElement('img');
          img.className = 'thumb';
          img.src = src;
          img.alt = '';
          img.loading = 'lazy';
          a.prepend(img);
        }
        return a;
      };
      if(ctx.part === 'glowa'){
        const small = PORTRAIT[ctx.osoba] || '';
        chips.appendChild( chip('ğŸ§  GÅ‚owa', small) );
      }
    })();
  </script>
</body>
</html>
