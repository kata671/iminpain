<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Szczeg√≥≈Çy</title>

  <link rel="stylesheet" href="style.css?v=details-restore" />

  <style>
    /* tylko kosmetyka ‚Äì nic przy tapecie nie ruszamy */
    body.szczegoly-page .detail-hero{max-width:980px;margin:24px auto;display:grid;gap:16px}
    body.szczegoly-page #content .card{margin-bottom:12px}
    body.szczegoly-page #content h3{margin:.4rem 0}
  </style>
</head>
<body class="bg-med szczegoly-page">

  <nav class="quickbar">
    <a href="index.html">üè† Start</a>
    <a href="pierwsza-pomoc.html">‚õëÔ∏è Pierwsza pomoc</a>
    <a href="lokalizacja.html">üìç Lokalizacja</a>
  </nav>

  <header class="site-header">
    <h1 id="title">Szczeg√≥≈Çy</h1>
    <p class="subtitle" id="subtitle"></p>
  </header>

  <main class="container">
    <section class="detail-hero">
      <img id="hero" src="" alt="" />
      <div id="content"></div>
    </section>
  </main>

  <footer class="site-footer"><small>¬© 2025 ‚Ä¢ Bolihelp.com</small></footer>

  <!-- Twoje ≈∫r√≥d≈Ça danych (je≈õli istniejƒÖ) -->
  <script src="content.js?v=1" defer></script>
  <script src="details.js?v=1" defer></script>
  <script src="szczegoly.js?v=1" defer></script>

  <script>
  (function(){
    // pobierz id z query string
    const params = new URLSearchParams(location.search);
    const id = params.get('id') || '';

    // pr√≥by odczytu danych z r√≥≈ºnych miejsc (w zale≈ºno≈õci co masz w repo)
    function getDataById(key){
      // 1) z globalnej mapy JS (content.js)
      if (window.DETAILED_CONDITIONS && window.DETAILED_CONDITIONS[key]) {
        return window.DETAILED_CONDITIONS[key];
      }
      if (window.CONDITIONS && window.CONDITIONS[key]) {
        return window.CONDITIONS[key];
      }
      // 2) z elementu globalnego utworzonego przez details.js / szczegoly.js
      if (window.DETAILS && window.DETAILS[key]) {
        return window.DETAILS[key];
      }
      return null;
    }

    function renderFallback(){
      document.getElementById('title').textContent = 'Brak danych';
      document.getElementById('subtitle').textContent = 'Nie znaleziono opisu dla: ' + id;
      document.getElementById('hero').style.display = 'none';
      document.getElementById('content').innerHTML =
        '<div class="card"><p>Spr√≥buj wr√≥ciƒá i wybraƒá inny obszar lub od≈õwie≈º stronƒô.</p></div>';
    }

    function render(data){
      // tytu≈Ç, podtytu≈Ç, obraz
      document.getElementById('title').textContent = data.title || 'Szczeg√≥≈Çy';
      document.getElementById('subtitle').textContent = data.subtitle || '';
      if (data.image){
        const img = document.getElementById('hero');
        img.src = data.image;
        img.alt = data.title || '';
      } else {
        document.getElementById('hero').style.display = 'none';
      }

      // sekcje tre≈õci
      const ctn = document.getElementById('content');
      const blocks = [];

      function section(label, arr){
        if (!arr || !arr.length) return;
        blocks.push(
          '<div class="card"><h3>'+label+'</h3><ul>' +
          arr.map(li => '<li>'+li+'</li>').join('') +
          '</ul></div>'
        );
      }

      section('Objawy', data.symptoms);
      section('Mo≈ºliwe przyczyny', data.causes);
      section('Pierwsza pomoc', data.firstAid);
      section('Kiedy do lekarza', data.whenToSeeDoctor);
      section('Leki ‚Äî Bez recepty', data.otc);
      section('Leki ‚Äî Na receptƒô', data.rx);
      section('Profilaktyka', data.prevention);
      section('Badania/Diagnostyka', data.diagnostics);

      if (!blocks.length){
        blocks.push('<div class="card"><p>Brak szczeg√≥≈Çowych danych.</p></div>');
      }
      ctn.innerHTML = blocks.join('');
    }

    // Poczekaj chwilƒô a≈º content.js/szczegoly.js siƒô za≈ÇadujƒÖ (defer)
    function tryRender(attempts){
      const data = getDataById(id);
      if (data){ render(data); return; }
      if (attempts <= 0){ renderFallback(); return; }
      setTimeout(()=>tryRender(attempts-1), 60);
    }
    tryRender(20); // ~1.2s ≈ÇƒÖcznie

  })();
  </script>
</body>
</html>
