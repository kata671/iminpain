<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boli Help ‚Äî Szczeg√≥≈Çy</title>
  <meta name="theme-color" content="#0e1230" />
  <style>
    :root{
      --bg:#0e1230; --text:#eef2ff; --muted:#b8c2e0;
      --card: rgba(60,32,100,.30); --stroke: rgba(164,107,255,.18);
      --accent:#a46bff; --pink:#ff6ec7; --teal:#5eead4;
      --ok:#70e1b1; --warn:#ffd16c; --danger:#ff6b6b;
      --radius:16px; --gap:14px; --speed:.24s;
      --c-symptoms: rgba(94,234,212,.55);
      --c-causes:   rgba(164,107,255,.55);
      --c-firstaid: rgba(112,225,177,.55);
      --c-otc:      rgba(255,184,108,.65);
      --c-rx:       rgba(255,107,107,.70);
      --c-rehab:    rgba(94,234,212,.65);
      --c-myths:    rgba(164,107,255,.65);
      --c-faq:      rgba(94,234,212,.55);
      --c-dx:       rgba(164,107,255,.65);
      --c-docs:     rgba(94,234,212,.65);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--text);
      font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}

    .bg-anim{position:fixed; inset:0; z-index:-3; pointer-events:none;
      background:
        radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.26), transparent 60%),
        radial-gradient(36vw 30vh at 84% 10%, rgba(94,234,212,.22), transparent 60%),
        radial-gradient(40vw 44vh at 20% 88%, rgba(164,107,255,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
      filter: blur(10px) saturate(118%);
    }
    .grid-bg{position:fixed; inset:0; z-index:-2; pointer-events:none; opacity:.22;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='104' viewBox='0 0 120 104'%3E%3Cg fill='none' stroke='rgba(173,216,255,0.26)' stroke-width='1'%3E%3Cpolygon points='30,0 90,0 120,52 90,104 30,104 0,52'/%3E%3C/g%3E%3C/svg%3E");
      background-size:160px 138px; background-position:center;}
    #bh-particles{ position:fixed; inset:0; z-index:-1; opacity:.85; pointer-events:none }

    header.app{ max-width:1100px; margin:16px auto 0; padding:16px 16px 8px; }
    main{ max-width:1100px; margin:0 auto 72px; padding:0 16px 24px; }

    .bh-backbar{max-width:1100px; margin:8px auto 0; padding:0 16px;}
    #bhReturnTop{
      appearance:none; border:1px solid rgba(164,107,255,.28); background:rgba(60,32,100,.28);
      color:#eef2ff; font-weight:800; letter-spacing:.2px; padding:10px 14px; border-radius:12px; cursor:pointer;
      box-shadow:0 6px 16px rgba(8,10,22,.35), inset 0 0 0 1px rgba(164,107,255,.12), 0 0 8px rgba(164,107,255,.45);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    #bhReturnTop:hover{ transform:translateY(-1px); border-color:rgba(164,107,255,.55); box-shadow:0 10px 20px rgba(8,10,22,.45), 0 0 14px rgba(164,107,255,.65), inset 0 0 0 1px rgba(164,107,255,.18) }
    #bhReturnTop:focus-visible{ outline:2px solid rgba(164,107,255,.75); outline-offset:2px }

    .hero{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--stroke); border-radius:var(--radius); padding:16px;
      backdrop-filter: blur(6px) saturate(120%); box-shadow: 0 18px 48px rgba(8,10,22,.55), 0 0 22px rgba(164,107,255,.18);}
    .hero-top{ display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    .crumbs{font-weight:800; letter-spacing:.2px; color:#cfe2ff}
    .label{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background: rgba(164,107,255,.18); border:1px solid var(--stroke); font-weight:800; letter-spacing:.3px; }
    .hero-note{ margin-top:10px; color:#b8c2e0; font-size:13px; }
    .legend{ color:#d6e4ff; font-weight:700; margin-top:6px; font-size:13px }

    /* KROKI ‚Äì asystent */
    .steps{display:grid; grid-template-columns:repeat(4,1fr); gap:8px; margin:14px 0 0}
    .step{position:relative; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.05); font-weight:900; letter-spacing:.2px; color:#dfe6ff; text-align:center}
    .step.active{border-color:rgba(94,234,212,.55); box-shadow:0 0 0 2px rgba(94,234,212,.35), 0 8px 18px rgba(8,10,22,.35)}
    .step.done{opacity:.9}
    .step small{display:block; font-weight:700; color:#9fb6ff}

    .tabs{ display:flex; flex-wrap:wrap; gap:8px; margin:16px 0 8px; }
    .tab{ padding:9px 13px; border-radius:10px; font-weight:800; letter-spacing:.2px; cursor:pointer; user-select:none;
      background: transparent; border:1px solid rgba(255,255,255,.16); color:#e9efff;
      transition: box-shadow var(--speed), transform var(--speed), border-color var(--speed), background var(--speed);}
    .tab:hover{ transform: translateY(-1px); }
    .tab[data-variant="symptoms"]{ border-color: rgba(94,234,212,.25) }
    .tab[data-variant="causes"]  { border-color: rgba(164,107,255,.25) }
    .tab[data-variant="firstaid"]{ border-color: rgba(112,225,177,.25) }
    .tab[data-variant="otc"]     { border-color: rgba(255,184,108,.28) }
    .tab[data-variant="rx"]      { border-color: rgba(255,107,107,.35) }
    .tab[data-variant="rehab"]   { border-color: rgba(94,234,212,.28) }
    .tab[data-variant="myths"]   { border-color: rgba(164,107,255,.28) }
    .tab[data-variant="faq"]     { border-color: rgba(94,234,212,.25) }
    .tab[data-variant="dx"]      { border-color: rgba(164,107,255,.45); position:relative }
    .tab[data-variant="docs"]    { border-color: rgba(94,234,212,.45); position:relative }

    .tab[aria-selected="true"][data-variant="symptoms"]{ border-color: var(--c-symptoms); box-shadow:0 0 0 2px var(--c-symptoms), 0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="causes"]  { border-color: var(--c-causes);   box-shadow:0 0 0 2px var(--c-causes),   0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="firstaid"]{ border-color: var(--c-firstaid); box-shadow:0 0 0 2px var(--c-firstaid), 0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="otc"]     { border-color: var(--c-otc);      box-shadow:0 0 0 2px var(--c-otc),      0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="rx"]      { border-color: var(--c-rx);       box-shadow:0 0 0 2px var(--c-rx),       0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="rehab"]   { border-color: var(--c-rehab);    box-shadow:0 0 0 2px var(--c-rehab),    0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="myths"]   { border-color: var(--c-myths);    box-shadow:0 0 0 2px var(--c-myths),    0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="faq"]     { border-color: var(--c-faq);      box-shadow:0 0 0 2px var(--c-faq),      0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="dx"]      { border-color: var(--c-dx);       box-shadow:0 0 0 2px var(--c-dx),       0 8px 22px rgba(0,0,0,.25) }
    .tab[aria-selected="true"][data-variant="docs"]    { border-color: var(--c-docs);     box-shadow:0 0 0 2px var(--c-docs),     0 8px 22px rgba(0,0,0,.25) }

    .tab[data-badge]:after{
      content: attr(data-badge);
      position:absolute; top:-7px; right:-7px; font-size:11px; font-weight:900;
      background:rgba(94,234,212,.22); border:1px solid rgba(94,234,212,.55); color:#d9fffa;
      padding:2px 6px; border-radius:999px;
    }
    .tab-attn{ box-shadow:0 0 0 2px rgba(164,107,255,.45), 0 0 18px rgba(164,107,255,.28); }
    .tab-attn::before{
      content:""; position:absolute; inset:-6px; border-radius:12px;
      box-shadow:0 0 0 0 rgba(164,107,255,.38); animation:ping 1.6s ease-out infinite;
    }
    @keyframes ping{ 0%{box-shadow:0 0 0 0 rgba(164,107,255,.38)} 80%{box-shadow:0 0 0 14px rgba(164,107,255,0)} 100%{box-shadow:0 0 0 0 rgba(164,107,255,0)} }

    .cards{ margin-top:8px }
    .card{ display:none; background: var(--card); border:1px solid var(--stroke); border-radius:var(--radius);
      padding:16px 16px 14px; backdrop-filter: blur(10px) saturate(125%); box-shadow: 0 14px 34px rgba(8,10,22,.42);
      transition: transform var(--speed), box-shadow var(--speed), border-color var(--speed); color:var(--text); }
    .card[aria-hidden="false"]{ display:block; animation:fadeIn .28s ease both }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none} }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 18px 48px rgba(8,10,22,.55), 0 0 22px rgba(164,107,255,.18) }
    .card h3{ position:relative; margin:.15rem 0 .85rem; font-size:16px; font-weight:900; letter-spacing:.3px; color:#e6f0ff }
    .card h3::after{ content:""; display:block; height:1px; margin-top:.55rem;
      background:linear-gradient(90deg, rgba(207,226,255,.55), rgba(255,255,255,.08) 45%, transparent); }

    .card[data-type="symptoms"]{border-color: rgba(94,234,212,.55)}
    .card[data-type="causes"]  {border-color: rgba(164,107,255,.55)}
    .card[data-type="firstaid"]{border-color: rgba(112,225,177,.55)}
    .card[data-type="otc"]     {border-color: rgba(255,184,108,.65)}
    .card[data-type="rx"]      {border-color: rgba(255,107,107,.70)}
    .card[data-type="rehab"]   {border-color: rgba(94,234,212,.65); background: linear-gradient(180deg, rgba(94,234,212,.08), rgba(255,255,255,.04));}
    .card[data-type="myths"]   {border-color: rgba(164,107,255,.65)}
    .card[data-type="faq"]     {border-color: rgba(94,234,212,.55)}
    .card[data-type="dx"]      {border-color: rgba(164,107,255,.65)}
    .card[data-type="docs"]    {border-color: rgba(94,234,212,.65)}

    ul.clean{ list-style:none; margin:0; padding:0 }
    ul.clean li{ position:relative; padding:10px 12px 10px 36px; border-radius:10px; margin-bottom:7px;
      border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.03); color:#f6f8ff; }
    .cb{ position:absolute; left:10px; top:50%; transform:translateY(-50%); width:18px; height:18px; border-radius:4px;
      border:1px solid rgba(255,255,255,.35); background:rgba(255,255,255,.05); display:inline-block }
    .cb.checked{ background:#fff; box-shadow:0 0 0 2px rgba(164,107,255,.25) inset }
    .li-checked{ outline:1px solid rgba(164,107,255,.45); background: rgba(164,107,255,.10) }

    .more-wrap{ margin-top:10px }
    .more-btn{ display:inline-block; margin-top:8px; padding:10px 14px; border-radius:10px; font-weight:800;
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); cursor:pointer; color:#e9efff;
      transition: box-shadow var(--speed);}
    .more-btn:hover{ box-shadow:0 0 0 2px rgba(255,110,199,.32), 0 0 14px rgba(255,110,199,.18) }
    .more-content{ overflow:hidden; max-height:0; transition:max-height .3s ease; }
    .more-content.open{ max-height:1200px }

    .subhead{ margin:.9rem 0 .5rem; font-weight:900; color:#e6f0ff; }

    .risk-mini{ display:flex; align-items:center; gap:10px; margin:.15rem 0 .35rem }
    .risk-mini small{ color:#d6e4ff; font-weight:800 }
    .riskbar{ position:relative; width:200px; height:12px; border-radius:999px; overflow:hidden;
      outline:1px solid rgba(255,255,255,.16);
      background: linear-gradient(90deg, var(--ok), var(--warn), var(--danger)); }
    .cursor{ position:absolute; top:50%; transform:translate(-50%,-50%); width:16px; height:16px; border-radius:50%;
      background:#fff; transition:left .25s ease; }
    .riskbar.high .cursor{ animation:pulse 1s infinite }
    @keyframes pulse{ 0%{ box-shadow:0 0 0 0 rgba(255,107,107,.45)} 70%{ box-shadow:0 0 0 14px rgba(255,107,107,0)} 100%{ box-shadow:0 0 0 0 rgba(255,107,107,0)} }
    .strip{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.16); padding:.7rem 1rem; border-radius:.8rem; margin:.6rem 0; }
    .strip--warn{ background: linear-gradient(180deg, rgba(255,184,108,.18), rgba(255,255,255,.04)); border-color: rgba(255,184,108,.55); }
    .strip--warn.alert{ box-shadow:0 0 0 2px rgba(255,107,107,.35), 0 10px 28px rgba(255,20,20,.18); border-color: rgba(255,107,107,.8) }
    .cta{ display:inline-block; padding:8px 12px; border-radius:10px; font-weight:900; background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.18); text-decoration:none; color:var(--text); }

    /* HINT w Objawach */
    .dx-hint{ display:none; margin-top:10px; border-radius:10px; padding:10px 12px;
      background:rgba(164,107,255,.12); border:1px solid rgba(164,107,255,.35); color:#e9e6ff; }
    .dx-hint.show{ display:block }
    .dx-hint button{ margin-left:8px; padding:8px 10px; border-radius:10px; font-weight:900; cursor:pointer;
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); color:#fff }

    /* Choroby ‚Äì dopasowania */
    .dx-list li{ display:flex; gap:10px; align-items:flex-start; }
    .dx-ico{ width:22px; height:22px; display:grid; place-items:center; border-radius:6px;
      background:rgba(164,107,255,.18); border:1px solid rgba(164,107,255,.35) }
    .dx-meta{ margin-left:auto; display:flex; flex-direction:column; align-items:flex-end; gap:6px; min-width:160px }
    .conf-wrap{ width:120px; height:8px; border-radius:999px; outline:1px solid rgba(255,255,255,.16); overflow:hidden;
      background:linear-gradient(90deg, rgba(94,234,212,.25), rgba(164,107,255,.25)); }
    .conf-bar{ height:100%; width:0%; background:linear-gradient(90deg, rgba(94,234,212,.65), rgba(164,107,255,.65)) }
    .dx-badge{ font-size:12px; padding:4px 8px; border-radius:999px; font-weight:900; letter-spacing:.2px; }
    .dx-badge.poz{ background:rgba(94,234,212,.18); border:1px solid rgba(94,234,212,.45); color:#d9fffa }
    .dx-badge.sor{ background:rgba(255,107,107,.20); border:1px solid rgba(255,107,107,.65); color:#ffe6e6 }
    .dx-note{ color:#cfe2ff; font-size:13px; margin:.15rem 0 .35rem }
    .dx-match{ font-size:12px; color:#cfe2ff; margin-top:6px }

    /* Lekarze */
    .docs-note{ color:#cfe2ff; font-size:13px; margin:.15rem 0 .35rem }
    .doc-badge{ font-size:12px; padding:4px 8px; border-radius:999px; font-weight:900; letter-spacing:.2px; }
    .doc-badge.poz{ background:rgba(94,234,212,.18); border:1px solid rgba(94,234,212,.45); color:#d9fffa }
    .doc-badge.sor{ background:rgba(255,107,107,.20); border:1px solid rgba(255,107,107,.65); color:#ffe6e6 }
    .doc-cta{ margin-top:6px; display:inline-block; padding:8px 10px; border-radius:10px; font-weight:900;
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); color:#fff; text-decoration:none; }

    .sr-only{ position:absolute !important; left:-9999px !important; }
  </style>
</head>
<body>
  <div class="bg-anim" aria-hidden="true"></div>
  <div class="grid-bg" aria-hidden="true"></div>
  <canvas id="bh-particles" aria-hidden="true"></canvas>

  <div class="bh-backbar">
    <button id="bhReturnTop" type="button" aria-label="Wr√≥ƒá do poprzedniej strony">‚Üê Wr√≥ƒá</button>
  </div>

  <header class="app" aria-label="Nawigacja lokalna">
    <div class="hero" role="region" aria-label="Nag≈Ç√≥wek szczeg√≥≈Ç√≥w">
      <div class="hero-top">
        <div class="crumbs" id="crumbs">Boli Help / <span id="crumb-typ">‚Äî</span> / <span id="crumb-label">Szczeg√≥≈Çy</span></div>
        <div class="label"><span id="label-icon" aria-hidden="true">‚óè</span><span id="label-text"><b>‚Äî</b></span></div>
      </div>

      <!-- KROKI -->
      <div class="steps" aria-label="Asystent krok√≥w">
        <div class="step" id="step-1">1. Objawy<small>Zaznacz</small></div>
        <div class="step" id="step-2">2. Choroby<small>Zobacz podpowiedzi</small></div>
        <div class="step" id="step-3">3. Lekarze<small>Gdzie i≈õƒá?</small></div>
        <div class="step" id="step-4">4. Co dalej<small>112/SOR lub dom</small></div>
      </div>

      <div class="tabs" role="tablist" aria-label="Sekcje tre≈õci">
        <button class="tab" data-variant="symptoms" role="tab" aria-selected="true"  data-target="#s-objawy">Objawy</button>
        <button class="tab" data-variant="causes"   role="tab" aria-selected="false" data-target="#s-przyczyny">Przyczyny</button>
        <button class="tab" data-variant="firstaid" role="tab" aria-selected="false" data-target="#s-aid">Pierwsza pomoc</button>
        <button class="tab" data-variant="otc"      role="tab" aria-selected="false" data-target="#s-otc">Leki OTC</button>
        <button class="tab" data-variant="rx"       role="tab" aria-selected="false" data-target="#s-rx">Leki na receptƒô</button>
        <button class="tab" data-variant="rehab"    role="tab" aria-selected="false" data-target="#s-rehab">Rehabilitacja / Profilaktyka</button>
        <button class="tab" data-variant="myths"    role="tab" aria-selected="false" data-target="#s-mity">Mity vs Fakty</button>
        <button class="tab" data-variant="faq"      role="tab" aria-selected="false" data-target="#s-faq">FAQ</button>
        <button class="tab" data-variant="dx"       role="tab" aria-selected="false" data-target="#s-dx">Choroby (beta)</button>
        <button class="tab" data-variant="docs"     role="tab" aria-selected="false" data-target="#s-docs">Lekarze</button>
      </div>

      <p class="hero-note">Edukacyjnie, nie diagnostycznie. W nag≈Çej, ciƒô≈ºkiej dolegliwo≈õci lub przy czerwonych flagach ‚Äî skorzystaj z <b>112</b> lub SOR.</p>
      <p class="legend">Zaznacz <strong>objawy</strong> ‚Äî pasek <b>Ryzyko</b> oraz karty <b>Choroby</b>/<b>Lekarze</b> dopasujƒÖ siƒô automatycznie.</p>
    </div>
  </header>

  <main>
    <section class="cards" aria-label="Karty z informacjami szczeg√≥≈Çowymi">
      <!-- OBJAWY -->
      <article class="card" data-type="symptoms" id="s-objawy" aria-labelledby="h-obj" role="tabpanel" aria-hidden="false">
        <h3 id="h-obj">Objawy</h3>
        <ul class="clean" id="symp-common"></ul>
        <div class="more-wrap" id="mw-symp-common" hidden>
          <div class="more-content" id="mc-symp-common"></div>
          <button class="more-btn" data-more="symp-common">Poka≈º wiƒôcej</button>
        </div>

        <div class="subhead">Kiedy siƒô niepokoiƒá (czerwone flagi)</div>
        <div class="risk-mini" aria-label="Szacowany poziom ryzyka">
          <small>Ryzyko: <span id="risk-label">niskie</span></small>
          <span class="riskbar" id="riskbar"><span class="cursor" id="risk-cursor-card" style="left:0%"></span></span>
        </div>
        <ul class="clean" id="urgent"></ul>
        <div class="more-wrap" id="mw-urgent" hidden>
          <div class="more-content" id="mc-urgent"></div>
          <button class="more-btn" data-more="urgent">Poka≈º wiƒôcej</button>
        </div>
        <div class="strip strip--warn" id="urgent-strip">
          Masz objawy alarmowe? <strong>Nie zwlekaj.</strong>
          <a class="cta" id="cta-112" href="tel:112" aria-label="Zadzwo≈Ñ na numer alarmowy 112">Zadzwo≈Ñ 112</a>
        </div>

        <!-- HINT po zaznaczeniu objaw√≥w -->
        <div id="dx-hint" class="dx-hint" role="status" aria-live="polite">
          Masz zaznaczone objawy. Zobacz edukacyjne podpowiedzi w <strong>Choroby</strong> lub przejd≈∫ do <strong>Lekarze</strong>.
          <button type="button" id="dx-open">Choroby</button>
          <button type="button" id="docs-open">Lekarze</button>
        </div>
      </article>

      <!-- PRZYCZYNY -->
      <article class="card" data-type="causes" id="s-przyczyny" role="tabpanel" aria-hidden="true">
        <h3 id="h-cause">Przyczyny</h3>
        <ul class="clean" id="causes"></ul>
        <div class="more-wrap" id="mw-causes" hidden>
          <div class="more-content" id="mc-causes"></div>
          <button class="more-btn" data-more="causes">Poka≈º wiƒôcej</button>
        </div>
      </article>

      <!-- PIERWSZA POMOC -->
      <article class="card" data-type="firstaid" id="s-aid" role="tabpanel" aria-hidden="true">
        <h3 id="h-aid">Pierwsza pomoc</h3>
        <ul class="clean" id="firstaid"></ul>
        <div class="more-wrap" id="mw-firstaid" hidden>
          <div class="more-content" id="mc-firstaid"></div>
          <button class="more-btn" data-more="firstaid">Poka≈º wiƒôcej</button>
        </div>
      </article>

      <!-- OTC -->
      <article class="card" data-type="otc" id="s-otc" role="tabpanel" aria-hidden="true">
        <h3 id="h-otc">Leki bez recepty (OTC)</h3>
        <ul class="clean" id="meds-otc"></ul>
        <div class="more-wrap" id="mw-meds-otc" hidden>
          <div class="more-content" id="mc-meds-otc"></div>
          <button class="more-btn" data-more="meds-otc">Poka≈º wiƒôcej</button>
        </div>
      </article>

      <!-- RX -->
      <article class="card" data-type="rx" id="s-rx" role="tabpanel" aria-hidden="true">
        <h3 id="h-rx">Leki na receptƒô (informacyjnie)</h3>
        <ul class="clean" id="meds-rx"></ul>
        <div class="more-wrap" id="mw-meds-rx" hidden>
          <div class="more-content" id="mc-meds-rx"></div>
          <button class="more-btn" data-more="meds-rx">Poka≈º wiƒôcej</button>
        </div>
      </article>

      <!-- REHAB -->
      <article class="card" data-type="rehab" id="s-rehab" role="tabpanel" aria-hidden="true">
        <h3 id="h-rehab">Rehabilitacja / Profilaktyka</h3>
        <ul class="clean" id="rehab"></ul>
        <div class="more-wrap" id="mw-rehab" hidden>
          <div class="more-content" id="mc-rehab"></div>
          <button class="more-btn" data-more="rehab">Poka≈º wiƒôcej</button>
        </div>
      </article>

      <!-- MITY -->
      <article class="card" data-type="myths" id="s-mity" role="tabpanel" aria-hidden="true">
        <h3 id="h-mity">Mity vs Fakty</h3>
        <ul class="clean" id="myths"></ul>
      </article>

      <!-- FAQ -->
      <article class="card" data-type="faq" id="s-faq" role="tabpanel" aria-hidden="true">
        <h3 id="h-faq">FAQ</h3>
        <ul class="clean" id="faq"></ul>
      </article>

      <!-- CHOROBY -->
      <article class="card" data-type="dx" id="s-dx" role="tabpanel" aria-hidden="true">
        <h3 id="h-dx">Choroby (beta)</h3>
        <p class="dx-note">Podpowiedzi edukacyjne z zaznaczonych objaw√≥w. Nie zastƒôpujƒÖ konsultacji.</p>
        <ul class="clean dx-list" id="dx-list"></ul>
      </article>

      <!-- LEKARZE -->
      <article class="card" data-type="docs" id="s-docs" role="tabpanel" aria-hidden="true">
        <h3 id="h-docs">Lekarze</h3>
        <p class="docs-note">Kolejno≈õƒá: <b>POZ</b> (lekarz rodzinny) ‚Üí specjali≈õci powiƒÖzani z problemem. Czerwone flagi kierujƒÖ do <b>SOR/112</b>.</p>
        <ul class="clean" id="docs-list"></ul>
      </article>
    
<div class="card fade-in" id="statystyki">
  <h3>üìä Statystyki i ciekawostki medyczne</h3>
  <ul class="checklist">
    <li>‚úÖ Ponad 70% przypadk√≥w b√≥lu brzucha ma pod≈Ço≈ºe funkcjonalne, nie chorobowe.</li>
    <li>‚úÖ Mƒô≈ºczy≈∫ni zg≈ÇaszajƒÖ objawy o 40% rzadziej ni≈º kobiety ‚Äì mimo podobnych dolegliwo≈õci.</li>
    <li>‚úÖ Stres odpowiada nawet za 60% zg≈Çosze≈Ñ b√≥lowych bez uszkodze≈Ñ fizycznych.</li>
    <li>‚úÖ A≈º 90% pacjent√≥w szuka objaw√≥w w internecie przed wizytƒÖ u lekarza.</li>
    <li>‚úÖ Tylko 1 na 10 przypadk√≥w b√≥lu klatki piersiowej to faktyczny zawa≈Ç serca.</li>
    <li>‚úÖ Objawy psychiczne (lƒôk, panika) mogƒÖ dawaƒá silne objawy somatyczne: b√≥l serca, duszno≈õci.</li>
    <li>‚úÖ B√≥l lewej rƒôki to tylko jeden z wielu objaw√≥w zawa≈Çu ‚Äì wa≈ºny jest kontekst!</li>
    <li>‚úÖ Wiƒôkszo≈õƒá dzieci z b√≥lem brzucha nie wymaga interwencji ‚Äì to stres lub dieta.</li>
  </ul>
</div>

<style>
  .fade-in {
    animation: fadeInUp 1s ease-in-out;
  }
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .card#statystyki {
    background: rgba(20, 30, 60, 0.95);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    padding: 1.8rem;
    margin-bottom: 2rem;
    box-shadow: 0 0 16px rgba(48,213,200,0.4);
  }
  .card#statystyki h3 {
    color: #30d5c8;
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }
  .card#statystyki ul.checklist {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .card#statystyki ul.checklist li {
    margin-bottom: 0.75rem;
    font-size: 1.05rem;
    line-height: 1.5;
    position: relative;
    padding-left: 1.6rem;
    color: #ffffff;
  }
  .card#statystyki ul.checklist li::before {
    content: '‚úî';
    position: absolute;
    left: 0;
    color: #7fffd4;
    font-weight: bold;
  }
</style>

</section>
  </main>
  <script>
    /* Wr√≥ƒá + start od g√≥ry */
    try{ if('scrollRestoration' in history){ history.scrollRestoration = 'manual'; } }catch(e){}
    window.addEventListener('DOMContentLoaded', function(){
      window.scrollTo(0,0);
      document.getElementById('bhReturnTop')?.addEventListener('click', function(){
        if (document.referrer && document.referrer.includes(location.host)) history.back();
        else window.location.href = 'index.html';
      });
    });

    /* Router & parametry */
    const qs = new URLSearchParams(location.search);
    const RAW_TYP   = (qs.get('typ')||'kobieta').toLowerCase();
    const RAW_CZESC = (qs.get('czesc')||'glowa').toLowerCase();
    const RAW_LABEL = (qs.get('label')||RAW_CZESC).toString();

    const ALIAS = { 'oko':'oczy','klatka-piersiowa':'klatka','watroba':'brzuch','zoladek':'brzuch','ramie':'plecy','d≈Ço≈Ñ':'plecy','dlon':'plecy','udo':'biodra' };
    const TYP = RAW_TYP; const CZESC = ALIAS[RAW_CZESC] || RAW_CZESC; const LABEL = RAW_LABEL;

    document.getElementById('crumb-typ').textContent = TYP;
    document.getElementById('crumb-label').textContent = LABEL;
    document.getElementById('label-text').innerHTML = '<b>'+ LABEL + '</b> ‚Ä¢ ' + TYP;

    /* Taby */
    const tabs = Array.from(document.querySelectorAll('.tab'));
    const panels = Array.from(document.querySelectorAll('.card[role="tabpanel"]'));
    function showPanel(targetSel){
      panels.forEach(p=>{ const active = ('#'+p.id)===targetSel; p.setAttribute('aria-hidden', active? 'false':'true'); });
      tabs.forEach(t=>{ const on = t.getAttribute('data-target')===targetSel; t.setAttribute('aria-selected', on?'true':'false'); if(on) t.focus({preventScroll:true}); });
      document.querySelector(targetSel)?.scrollIntoView({behavior:'smooth', block:'start'});
      // kroki UI
      if(targetSel==='#s-objawy') activateStep(1);
      if(targetSel==='#s-dx')     activateStep(2);
      if(targetSel==='#s-docs')   activateStep(3);
    }
    tabs.forEach(t=>{
      t.addEventListener('click', ()=> showPanel(t.getAttribute('data-target')));
      t.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); t.click(); } });
    });
    (function tabsKeyboard(){
      const order = tabs;
      tabs.forEach((t,i)=>{
        t.addEventListener('keydown',e=>{
          if(e.key==='ArrowRight'){ e.preventDefault(); order[(i+1)%order.length].focus(); }
          if(e.key==='ArrowLeft'){ e.preventDefault(); order[(i-1+order.length)%order.length].focus(); }
        });
      });
    })();

    /* Kroki ‚Äì lekkie sterowanie */
    const stepEls = [null, document.getElementById('step-1'), document.getElementById('step-2'), document.getElementById('step-3'), document.getElementById('step-4')];
    function activateStep(n){
      stepEls.forEach((el,i)=>{ if(!el) return; el.classList.toggle('active', i===n); el.classList.toggle('done', i<n); });
    }
    activateStep(1);

    /* Bazy skr√≥t√≥w */
    const BASE = {
      rehabCommon:["Sen i regeneracja ‚Äî 7‚Äì9 h","Nawodnienie ‚Äî ma≈Çe porcje","Lekka aktywno≈õƒá 20‚Äì30 min","Ergonomia ‚Äî przerwy co 30‚Äì45 min","Oddech przeponowy ‚Äî 5 min","Higiena cyfrowa ‚Äî 20-20-20"],
      otcPain:[{t:"Paracetamol ‚Äî b√≥l/gorƒÖczka",audience:"all"},{t:"Ibuprofen ‚Äî b√≥l/zapalenie (nie przy wrzodach/ciƒÖ≈ºy)",audience:"adult"},{t:"S√≥l fizjologiczna/nawil≈ºanie",audience:"all"},{t:"Przeciwhistaminowe ‚Äî po konsultacji",audience:"all"}],
      urgentCommon:["Nag≈Ça, silna, narastajƒÖca dolegliwo≈õƒá","Utrata przytomno≈õci/drgawki","Trudno≈õci w oddychaniu lub sinica","Krwawienie nie do opanowania","GorƒÖczka >39¬∞C mimo leczenia","Nowe objawy neurologiczne"],
      mythsCommon:[{m:"Antybiotyk na przeziƒôbienie",f:"Wiƒôkszo≈õƒá przeziƒôbie≈Ñ to wirusy."},{m:"B√≥l trzeba przeczekaƒá",f:"Nawodnienie i odpoczynek pomagajƒÖ."},{m:"Im wiƒôcej lek√≥w, tym lepiej",f:"Lepiej mniej, ale w≈Ça≈õciwie dobranych."}],
      faqCommon:[{q:"Co w domu?",a:"Pierwsza pomoc + obserwacja czerwonych flag."},{q:"Kiedy do lekarza?",a:"Gdy silne/utrzymujƒÖce siƒô 48‚Äì72h lub flagi."},{q:"≈ÅƒÖczenie OTC?",a:"Nie duplikuj substancji czynnych."}]
    };

    /* Tre≈õci (jak wcze≈õniej), ryzyko start 0% */
    const CONTENT = {
      glowa:{label:"G≈Çowa (b√≥l)",risk:0, symptoms:["Ucisk obustronny","PulsujƒÖcy jednostronny","Nadwra≈ºliwo≈õƒá na ≈õwiat≈Ço/d≈∫wiƒôk","Sztywno≈õƒá karku"],causes:["Napiƒôcie/stres","Migrena","Nadu≈ºycie lek√≥w","Sen/ekrany"],firstaid:["Nawodnienie, odpoczynek","Masa≈º skroni","Ch≈Çodny/ciep≈Çy ok≈Çad","Kr√≥tki spacer"],otc:[...BASE.otcPain],rx:["Tryptany","Profilaktyka migreny"],rehab:[...BASE.rehabCommon,"Dzienniczek b√≥lu","ƒÜwiczenia karku"],urgent:["Nag≈Çy najgorszy b√≥l","GorƒÖczka + sztywno≈õƒá karku","Uraz g≈Çowy + zaburzenia",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      nos:{label:"Nos",risk:0,symptoms:["Katar wodnisty/gƒôsty","Zatkanie, upo≈õledzenie wƒôchu","Kichanie/≈õwiƒÖd (alergia)","B√≥l zatok","Krwawienie z nosa"],causes:["Przeziƒôbienie","Alergia","Zapalenie zatok","Suche powietrze","Krzywa przegroda, polipy","Uraz"],firstaid:["Nawil≈ºanie NaCl","Nawil≈º powietrze, wietrz","Krwawienie: pochyl, ucisk 10 min","Ch≈Çodny ok≈Çad"],otc:["Aerozole z solƒÖ","Krople obkurczajƒÖce (kr√≥tkotrwale)","P/histaminowe","Preparaty do zatok"],rx:["Donosowe GKS","Antybiotyk przy bakteryjnych"],rehab:[...BASE.rehabCommon,"Irygacje nosa","Unikanie dymu/zapach√≥w"],urgent:["Krwawienie >20 min","Wysoka gorƒÖczka + silny b√≥l zatok","Uraz/deformacja/wyciek p≈Çynu",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      klatka:{label:"Klatka piersiowa",risk:0,symptoms:["Ucisk/ciƒô≈ºar","B√≥l przy oddychaniu/ucisku","Zgaga/pieczenie","Duszno≈õƒá, zimny pot"],causes:["Miƒô≈õniowe","Refluks","Wie≈Ñcowa/OZW","Op≈Çucna/osierdzie"],firstaid:["Odpoczynek","Przy ucisku i duszno≈õci ‚Äî 112/SOR","P√≥≈ÇsiedzƒÖco"],otc:[{t:"P/b√≥lowe wg ulotki",audience:"adult"},"Na refluks"],rx:[{t:"Nitrogliceryna wg zalece≈Ñ",audience:"adult"},"Leczenie kardiologiczne"],rehab:[...BASE.rehabCommon,"Redukcja ryzyka: ruch/dieta/sen","Stopniowy powr√≥t do aktywno≈õci"],urgent:["Ucisk do lewej rƒôki/szczƒôki + pot","Duszno≈õƒá spoczynkowa","Omdlenie/ko≈Çatanie",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      pluca:{label:"P≈Çuca/Duszno≈õƒá",risk:0,symptoms:["Duszno≈õƒá","Kaszel suchy/mokry","≈öwisty","Zmƒôczenie"],causes:["Infekcje","Astma/POChP","Alergie","Zatorowo≈õƒá"],firstaid:["Wolny oddech, d≈Çugi wydech","P√≥≈ÇsiedzƒÖco","Nawodnienie, wietrzenie"],otc:["Syropy (dob√≥r z farmaceutƒÖ)","Inhalacje NaCl"],rx:["Celowane po diagnozie"],rehab:[...BASE.rehabCommon,"ƒÜwiczenia oddechowe"],urgent:["Duszno≈õƒá spoczynkowa","B√≥l w klatce + duszno≈õƒá","Sinica/krwioplucie",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      brzuch:{label:"Brzuch",risk:0,symptoms:["B√≥l (lokalizacja r√≥≈ºna)","Wzdƒôcia, nudno≈õci, biegunka/zaparcie","Twardy brzuch (alarm)"],causes:["Niestrawno≈õƒá","IBS","Wyrostek/kamica","Zaparcia"],firstaid:["Nawadnianie ma≈Çymi porcjami","Termofor (gdy brak ostrego brzucha)","Odpoczynek"],otc:["Os≈Çonowe/przeciwwzdƒôciowe","Na zgagƒô/kwas",{t:"Drotaweryna (doro≈õli)",audience:"adult"}],rx:["PPI/antybiotyk wg rozpoznania"],rehab:[...BASE.rehabCommon,"Regularne posi≈Çki, mniej przetworzonej","Dzienniczek objaw√≥w/dieta"],urgent:["Twardy brzuch, silny b√≥l","Krew w stolcu/wymiotach",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      serce:{label:"Serce",risk:0,symptoms:["Ko≈Çatanie","Zawroty/os≈Çabienie","B√≥l klatki, duszno≈õƒá"],causes:["Stres/odwodnienie","Zaburzenia rytmu","Wie≈Ñcowa"],firstaid:["Odpoczynek, spokojny oddech","Nawodnienie"],otc:["Brak uniwersalnych OTC"],rx:["EKG + leczenie"],rehab:[...BASE.rehabCommon,"Trening tlenowy po ocenie","Stres, sen"],urgent:["Ko≈Çatanie z omdleniem","B√≥l z duszno≈õciƒÖ",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      biodra:{label:"Biodra",risk:0,symptoms:["B√≥l pachwiny/biodra","Trzaski/sztywno≈õƒá","Ograniczenie ruchu"],causes:["PrzeciƒÖ≈ºenie/kaletka","Zmiany przeciƒÖ≈ºeniowe","Nier√≥wnowaga"],firstaid:["Odpoczynek wzglƒôdny","Ch≈Çodzenie/ciep≈Ço","RozciƒÖganie"],otc:[...BASE.otcPain],rx:["P/zapalne"],rehab:[...BASE.rehabCommon,"Aktywacja po≈õladkowych"],urgent:["Uraz + brak obciƒÖ≈ºania",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      kolano:{label:"Kolano",risk:0,symptoms:["B√≥l przodu kolana","Obrzƒôk po wysi≈Çku/urazie","Niestabilno≈õƒá"],causes:["PrzeciƒÖ≈ºenie rzepki","Uraz wiƒôzade≈Ç/≈ÇƒÖkotek","Zapalenie ≈õciƒôgien"],firstaid:["RICE","Unikaj b√≥lu, wracaj stopniowo","Elastyczna stabilizacja"],otc:[...BASE.otcPain],rx:["Wg ortopedy/fizjo"],rehab:[...BASE.rehabCommon,"Wzmacnianie czworog≈Çowych"],urgent:["Uraz z ‚Äûtrzaskiem‚Äù + obrzƒôk",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      stopy:{label:"Stopy",risk:0,symptoms:["B√≥l piƒôty/przodostopia","Odciski/pƒôcherze","Sztywno≈õƒá poranna"],causes:["Obuwie/obciƒÖ≈ºenia","Rozciƒôgno/≈õciƒôgna","Biomechanika"],firstaid:["Lepsze obuwie, wk≈Çadki","Ch≈Çodzenie, rolowanie","Stopniowe obciƒÖ≈ºenia"],otc:[...BASE.otcPain],rx:["Fizjoterapia"],rehab:[...BASE.rehabCommon,"ƒÜwiczenia st√≥p","RozciƒÖganie Achillesa"],urgent:["Ostry b√≥l + obrzƒôk, brak chodu",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      skora:{label:"Sk√≥ra",risk:0,symptoms:["Wysypka/≈õwiƒÖd","Sucho≈õƒá/pƒôkanie","Pƒôcherze/sƒÖczenie"],causes:["Alergia/AZS","UkƒÖszenia/podra≈ºnienia","Infekcje"],firstaid:["Ch≈Çodzenie, delikatne mycie","Emolienty","Usu≈Ñ alergen"],otc:["Emolienty/bariera","P/histaminowe doustne","Antyseptyki miejscowe"],rx:["Sterydy/antybiotyki miejscowe"],rehab:[...BASE.rehabCommon,"Letni prysznic","Bawe≈Çna, delikatne detergenty"],urgent:["Szybko szerzƒÖca siƒô wysypka + gorƒÖczka","Obrzƒôk twarzy/warg/jƒôzyka",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      kaszel:{label:"Kaszel",risk:0,symptoms:["Suchy/mokry","Duszno≈õƒá, chrypka"],causes:["Infekcje","Alergie/dra≈ºnienie","Refluks"],firstaid:["Nawadnianie, nawil≈ºanie","Unikaj dymu","Mi√≥d (‚â•1 r.≈º.)"],otc:["Syropy (dob√≥r z farmaceutƒÖ)","Inhalacje NaCl"],rx:["Leczenie przyczynowe"],rehab:[...BASE.rehabCommon,"ƒÜwiczenia oddechowe"],urgent:["Duszno≈õƒá spoczynkowa/sinica/krwioplucie",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      goraczka:{label:"GorƒÖczka",risk:0,symptoms:["Temp., dreszcze","B√≥le miƒô≈õni/g≈Çowy"],causes:["Wirusy/bakterie","Zapalenia"],firstaid:["Nawodnienie, lekki ubi√≥r","Letnie ok≈Çady/kƒÖpiel (bez alkoholu)"],otc:[{t:"Paracetamol/ibuprofen wg ulotki",audience:"all"}],rx:["Celowane po diagnozie"],rehab:[...BASE.rehabCommon,"Odpoczynek"],urgent:[">39¬∞C mimo leczenia","Sztywno≈õƒá karku, silny b√≥l g≈Çowy",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]},
      zadlawienie:{label:"Zad≈Çawienie",risk:0,symptoms:["Nag≈Ça duszno≈õƒá","Chwytanie za szyjƒô","Bez/skƒÖpokaszlowy napad"],causes:["Kƒôs/ma≈Çe przedmioty"],firstaid:["Skuteczny kaszel ‚Äî zachƒôcaj","Doros≈Çy: 5 uderze≈Ñ plec√≥w ‚Üí Heimlich","Dziecko >1 r.≈º.: 5 plec√≥w ‚Üí 5 nadbrzusza","Niemowlƒô: 5 plec√≥w ‚Üí 5 uci≈õniƒôƒá klatki","Utrata przytomno≈õci: RKO 30:2, 112, AED"],otc:["‚Äî"],rx:["‚Äî"],rehab:[...BASE.rehabCommon,"Edukacja i profilaktyka"],urgent:["Ka≈ºde ciƒô≈ºkie zad≈Çawienie ‚Äî 112"],myths:[{m:"‚ÄûPalcem w ciemno‚Äù",f:"Ryzyko wepchniƒôcia g≈Çƒôbiej."}],faq:[...BASE.faqCommon]},
      ciaza:{label:"CiƒÖ≈ºa",risk:0,symptoms:["Nudno≈õci/wymioty","Zgaga/zaparcia","B√≥l krzy≈ºa/kurcze","Obrzƒôki","Zawroty"],causes:["Hormony","Zmiana postawy/ucisk","Niedobory"],firstaid:["Ma≈Çe, czƒôste posi≈Çki","Nawodnienie; imbir (po konsultacji)","Ruszaj siƒô ≈Çagodnie","Zgaga: unie≈õ wezg≈Çowie"],otc:["Witaminy wg zalece≈Ñ"],rx:["Tylko po ocenie lekarskiej"],rehab:[...BASE.rehabCommon,"ƒÜwiczenia w ciƒÖ≈ºy","Fizjo uroginekologiczna","Pozycje odciƒÖ≈ºajƒÖce"],urgent:["Krwawienie, silny b√≥l","Nag≈Çy obrzƒôk twarzy/b√≥l g≈Çowy","Zmniejszone ruchy p≈Çodu","Silna duszno≈õƒá/b√≥l w klatce",...BASE.urgentCommon.slice(2)],myths:[...BASE.mythsCommon],faq:[...BASE.faqCommon]}
    };

    const FALLBACK = { label: LABEL || CZESC, risk: 0, ...CONTENT.glowa };
    const entry = CONTENT[CZESC] || FALLBACK;
    document.getElementById('label-text').innerHTML = '<b>'+ (entry.label||LABEL) + '</b> ‚Ä¢ ' + TYP;

    /* Ryzyko ‚Äì start 0% */
    const isChild = (TYP === 'dziecko');
    const allowItem = (item)=>{ if(typeof item==='string') return true; const aud=(item.audience||'all'); return isChild ? aud!=='adult' : aud!=='child'; };
    const textOf = (item)=> typeof item === 'string' ? item : item.t;

    const HIGH_RISK_PHRASES=["duszno≈õƒá","sinica","utrata przytomno≈õci","krwawienie","nag≈Ça","najgorszy b√≥l","omdlenie","krwioplucie","twardy brzuch"];
    const MID_RISK_PHRASES=["gorƒÖczka","sztywno≈õƒá karku","silny b√≥l","utrzymujƒÖce siƒô","zaburzenia widzenia","zawroty"];

    function weightFor(text,bucket){
      const s=(text||"").toLowerCase();
      if(bucket==='urgent') return 35;
      if(HIGH_RISK_PHRASES.some(k=>s.includes(k))) return 20;
      if(MID_RISK_PHRASES.some(k=>s.includes(k)))  return 10;
      if(bucket==='symptoms') return 6;
      return 0;
    }

    /* Zapamiƒôtywanie wybor√≥w (per czƒô≈õƒá cia≈Ça + typ) */
    const MEMO_KEY = `bh:symptoms:${TYP}:${CZESC}`;
    function saveSelections(){
      try{
        const selected = Array.from(document.querySelectorAll('#symp-common li.li-checked')).map(li=>li.textContent.trim());
        const urgent   = Array.from(document.querySelectorAll('#urgent li.li-checked')).map(li=>li.textContent.trim());
        localStorage.setItem(MEMO_KEY, JSON.stringify({selected, urgent}));
      }catch(_){}
    }
    function restoreSelections(){
      try{
        const raw = localStorage.getItem(MEMO_KEY); if(!raw) return;
        const data = JSON.parse(raw)||{};
        const mark = (ulId, texts=[])=>{
          const lis = Array.from(document.querySelectorAll(`#${ulId} li`));
          lis.forEach(li=>{
            const txt = li.textContent.trim();
            if(texts.includes(txt)){
              const cb = li.querySelector('.cb');
              if(!cb.classList.contains('checked')) cb.click(); // u≈ºywamy istniejƒÖcej logiki
            }
          });
        };
        // najpierw objawy widoczne, potem rozwiniƒôte
        mark('symp-common', data.selected||[]);
        mark('urgent', data.urgent||[]);
      }catch(_){}
    }

    let selectedWeights=0, selectedCount=0;

    function updateRisk(){
      const base=0;
      const val =Math.max(0,Math.min(100,base+selectedWeights));
      const c=document.getElementById('risk-cursor-card');
      const bar=document.getElementById('riskbar');
      const lbl=document.getElementById('risk-label');
      if(c){ c.style.left = val + '%'; }
      if(lbl){ let t="niskie"; if(val>=70) t="wysokie"; else if(val>=40) t="umiarkowane"; lbl.textContent=t; }
      if(bar){
        const high=val>=70; bar.classList.toggle('high',high);
        const strip=document.getElementById('urgent-strip'); const cta=document.getElementById('cta-112');
        strip?.classList.toggle('alert',high); cta?.classList.toggle('cta-alert',high);
        if(high && navigator.vibrate){ try{ navigator.vibrate(120);}catch(_){} }
      }
      // badge na zak≈Çadkach
      const hint = document.getElementById('dx-hint');
      const dxTab = document.querySelector('.tab[data-variant="dx"]');
      const docsTab = document.querySelector('.tab[data-variant="docs"]');
      const dxMatches = computeDx().filter(x=>x._score>0 || x.badge==='sor').length;
      const docsMatches = computeDocs().length;
      hint?.classList.toggle('show', selectedCount>0);
      if(dxTab){ dxTab.classList.toggle('tab-attn', selectedCount>0); dxTab.setAttribute('data-badge', selectedCount>0 ? String(dxMatches) : ''); }
      if(docsTab){ docsTab.classList.toggle('tab-attn', selectedCount>0); docsTab.setAttribute('data-badge', selectedCount>0 ? String(docsMatches) : ''); }
      // kroki ‚Äì je≈õli sƒÖ zaznaczenia, krok 2 ‚Äûzapalony‚Äù
      activateStep(selectedCount>0 ? 2 : 1);
    }

    /* Renderery list */
    function renderListInteractive(baseId,arr,bucket,threshold=7){
      const list=document.getElementById(baseId);
      const wrap=document.getElementById('mw-'+baseId);
      const moreContent=document.getElementById('mc-'+baseId);
      if(!list) return;
      list.innerHTML=''; const visible=[];
      (arr||[]).forEach(it=>{ if(allowItem(it)) visible.push(textOf(it)); });
      const head=visible.slice(0,threshold); const tail=visible.slice(threshold);

      function makeLi(txt){
        const li=document.createElement('li');
        const cb=document.createElement('span'); cb.className='cb'; cb.setAttribute('role','checkbox'); cb.setAttribute('aria-checked','false');
        li.appendChild(cb);
        const w=weightFor(txt,bucket); li.dataset.weight=String(w);
        li.appendChild(document.createTextNode(txt));

        function toggle(){
          const on=cb.classList.toggle('checked'); li.classList.toggle('li-checked',on); cb.setAttribute('aria-checked',on?'true':'false');
          selectedWeights += (on? +w : -w);
          selectedCount  += (on? 1 : -1);
          updateRisk();
          saveSelections();
          try{ document.dispatchEvent(new CustomEvent('bh:symptoms-changed')); }catch(_){}
        }
        li.addEventListener('click',e=>{ if(e.target!==cb) toggle(); });
        cb.addEventListener('click',e=>{ e.stopPropagation(); toggle(); });
        return li;
      }

      head.forEach(t=>list.appendChild(makeLi(t)));
      if(tail.length && wrap && moreContent){
        wrap.hidden=false; moreContent.innerHTML='';
        const ul=document.createElement('ul'); ul.className='clean'; tail.forEach(t=>ul.appendChild(makeLi(t)));
        moreContent.appendChild(ul);
        const btn=wrap.querySelector('.more-btn'); let open=false;
        btn.onclick=()=>{ open=!open; moreContent.classList.toggle('open',open); btn.textContent=open?'Poka≈º mniej':'Poka≈º wiƒôcej'; };
      }else if(wrap){ wrap.hidden=true; }
    }

    function renderListPlain(baseId,arr,threshold=7){
      const list=document.getElementById(baseId);
      const wrap=document.getElementById('mw-'+baseId);
      const moreContent=document.getElementById('mc-'+baseId);
      if(!list) return;
      list.innerHTML=''; const visible=[];
      (arr||[]).forEach(it=>{ if(allowItem(it)) visible.push(textOf(it)); });
      const head=visible.slice(0,threshold); const tail=visible.slice(threshold);
      function makeLi(txt){ const li=document.createElement('li'); const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden'; li.appendChild(cb); li.appendChild(document.createTextNode(txt)); return li; }
      head.forEach(t=>list.appendChild(makeLi(t)));
      if(tail.length && wrap && moreContent){
        wrap.hidden=false; moreContent.innerHTML='';
        const ul=document.createElement('ul'); ul.className='clean'; tail.forEach(t=>ul.appendChild(makeLi(t)));
        moreContent.appendChild(ul);
        const btn=wrap.querySelector('.more-btn'); let open=false;
        btn.onclick=()=>{ open=!open; moreContent.classList.toggle('open',open); btn.textContent=open?'Poka≈º mniej':'Poka≈º wiƒôcej'; };
      }else if(wrap){ wrap.hidden=true; }
    }

    function fillPairs(id,arr){
      const ul=document.getElementById(id); if(!ul) return;
      ul.innerHTML=''; (arr||[]).forEach(x=>{
        const li=document.createElement('li'); const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        li.appendChild(cb);
        const m=document.createElement('div'); const f=document.createElement('div');
        m.innerHTML='<strong>Mit:</strong> '+(x.m||'‚Äî'); f.innerHTML='<strong>Fakt:</strong> '+(x.f||'‚Äî');
        ul.appendChild(li); li.appendChild(m); li.appendChild(f);
      });
    }

    function fillFAQ(id,arr){
      const ul=document.getElementById(id); if(!ul) return;
      ul.innerHTML=''; (arr||[]).forEach(x=>{
        const li=document.createElement('li'); const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        li.appendChild(cb);
        li.innerHTML += '<strong>'+ (x.q||'Pytanie') +'</strong><div style="margin-top:4px;color:#b8c2e0">'+ (x.a||'Odpowied≈∫') +'</div>';
        ul.appendChild(li);
      });
    }

    /* Render sekcji */
    renderListInteractive('symp-common', entry.symptoms, 'symptoms');
    renderListInteractive('urgent',      entry.urgent||[],   'urgent', 6);
    renderListPlain('causes',   entry.causes||[]);
    renderListPlain('firstaid', entry.firstaid||[]);
    renderListPlain('meds-otc', entry.otc||[]);
    renderListPlain('meds-rx',  entry.rx||[]);
    renderListPlain('rehab',    entry.rehab||[]);
    fillPairs('myths', entry.myths||[]);
    fillFAQ('faq',     entry.faq||[]);

    selectedWeights=0; selectedCount=0; updateRisk(); showPanel('#s-objawy');

    /* ===== Choroby (beta) z podpowiedziami trafionych objaw√≥w ===== */
    const DX_RULES = {
      glowa: [
        {name:"B√≥l napiƒôciowy g≈Çowy", keys:["ucisk obustronny","stres","ekran"], advice:"POZ / higiena snu, ergonomia", badge:"poz"},
        {name:"Migrena", keys:["pulsujƒÖcy jednostronny","≈õwiat≈Ço","d≈∫wiƒôk","nudno≈õci"], advice:"POZ; przy nawrotach neurolog", badge:"poz"},
        {name:"Zapalenie opon ‚Äî pilnie", keys:["sztywno≈õƒá karku","wysoka gorƒÖczka","najgorszy b√≥l"], advice:"Objawy alarmowe ‚Äî SOR/112", badge:"sor"}
      ],
      nos: [
        {name:"Nie≈ºyt nosa (wirusowy)", keys:["katar","zatkanie","kichanie"], advice:"POZ / objawowo, s√≥l", badge:"poz"},
        {name:"Zapalenie zatok", keys:["b√≥l zatok","gorƒÖczka","wydzielina"], advice:"POZ; rozwa≈º antybiotyk wg oceny", badge:"poz"}
      ],
      klatka: [
        {name:"Refluks/zgaga", keys:["zgaga","pieczenie"], advice:"POZ; dieta, PPI wg zalece≈Ñ", badge:"poz"},
        {name:"OZW/Zawa≈Ç ‚Äî pilnie", keys:["ucisk","zimny pot","duszno≈õƒá"], advice:"SOR/112", badge:"sor"}
      ],
      pluca: [
        {name:"Infekcja dr√≥g oddechowych", keys:["kaszel","gorƒÖczka"], advice:"POZ / nawodnienie", badge:"poz"},
        {name:"Astma/POChP zaostrzenie", keys:["≈õwisty","duszno≈õƒá"], advice:"POZ pilnie; ciƒô≈ºka duszno≈õƒá ‚Üí SOR", badge:"poz"}
      ],
      brzuch: [
        {name:"Niestrawno≈õƒá/IBS", keys:["wzdƒôcia","biegunka","zaparcie"], advice:"POZ; dieta, dzienniczek", badge:"poz"},
        {name:"Ostry brzuch ‚Äî pilnie", keys:["twardy brzuch","silny b√≥l"], advice:"SOR/112", badge:"sor"}
      ],
      serce: [
        {name:"Zaburzenia rytmu", keys:["ko≈Çatanie","zawroty"], advice:"POZ ‚Üí EKG, elektrolity", badge:"poz"},
        {name:"OZW ‚Äî pilnie", keys:["b√≥l klatki","duszno≈õƒá"], advice:"SOR/112", badge:"sor"}
      ],
      oczy: [
        {name:"Zapalenie spoj√≥wek", keys:["zaczerwienienie","≈Çzawienie","wydzielina"], advice:"POZ; higiena rƒÖk, sztuczne ≈Çzy", badge:"poz"},
        {name:"Uraz/chemikalia ‚Äî pilnie", keys:["uraz","chemikalia"], advice:"SOR/okulista pilnie", badge:"sor"}
      ],
      biodra: [
        {name:"PrzeciƒÖ≈ºenie/kaletka", keys:["b√≥l","sztywno≈õƒá","trzaski"], advice:"POZ/Fizjo; odciƒÖ≈ºenie i ƒáwiczenia", badge:"poz"}
      ],
      kolano: [
        {name:"Zesp√≥≈Ç b√≥lu rzepki", keys:["b√≥l przodu kolana","obrzƒôk"], advice:"Fizjo/POZ; stopniowe obciƒÖ≈ºanie", badge:"poz"}
      ],
      skora: [
        {name:"AZS/alergia", keys:["wysypka","≈õwiƒÖd"], advice:"POZ; emolienty, eliminacja czynnika", badge:"poz"}
      ]
    };

    function gatherSelectedTexts(){
      const from = (ulId)=> Array.from(document.querySelectorAll('#'+ulId+' li.li-checked'))
                                  .map(li=> li.textContent.trim().toLowerCase());
      return { symp: from('symp-common'), urgent: from('urgent') };
    }

    function computeDx(){
      try{
        const {symp, urgent} = gatherSelectedTexts();
        const picked = (symp.concat(urgent)).map(s=>s.toLowerCase());
        const rules = DX_RULES[CZESC] || [];
        const hits = [];

        const urgentHit = ["duszno≈õƒá","sinica","utrata przytomno≈õci","twardy brzuch","krwawienie","najgorszy b√≥l"].some(k=>picked.some(p=>p.includes(k)));
        if(urgentHit){
          hits.push({_score:999, name:"Objawy alarmowe", advice:"Zadzwo≈Ñ 112 / SOR", badge:"sor", ico:"‚ö†Ô∏è", _max:1, _match:[]});
        }

        rules.forEach(r=>{
          const keys = (r.keys||[]).map(k=>String(k).toLowerCase());
          const matched = keys.filter(k=> picked.some(p=> p.includes(k)));
          const score = matched.length;
          if(score>0){
            hits.push({_score:score, name:r.name, advice:r.advice, badge:r.badge, ico: r.badge==='sor'?'‚ö†Ô∏è':'ü©∫', _max: keys.length, _match: matched});
          }
        });

        if(!hits.length){
          hits.push({_score:0, name:"Za ma≈Ço danych", advice:"Zaznacz objawy w zak≈Çadce ‚ÄûObjawy‚Äù", badge:"poz", ico:"‚ÑπÔ∏è", _max:1, _match:[]});
        }

        hits.sort((a,b)=> b._score - a._score);
        return hits.slice(0,5);
      }catch(_){
        return [{_score:0, name:"Chwilowy b≈ÇƒÖd", advice:"Od≈õwie≈º stronƒô lub zaznacz objawy ponownie.", badge:"poz", ico:"‚ÑπÔ∏è", _max:1, _match:[]}];
      }
    }

    function renderDx(){
      const ul = document.getElementById('dx-list'); if(!ul) return;
      const items = computeDx();
      ul.innerHTML = '';
      items.forEach(it=>{
        const li = document.createElement('li');
        const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        const ico=document.createElement('span'); ico.className='dx-ico'; ico.textContent = it.ico || 'ü©∫';

        const text=document.createElement('div');
        const matchTxt = it._match && it._match.length ? ` (trafienia: ${it._match.length})` : '';
        text.innerHTML = `<strong title="${(it._match||[]).join(', ')}">${it.name}${matchTxt}</strong><div style="color:#b8c2e0;margin-top:4px">${it.advice}</div>`;

        const meta=document.createElement('div'); meta.className='dx-meta';
        const confWrap=document.createElement('div'); confWrap.className='conf-wrap';
        const confBar=document.createElement('div'); confBar.className='conf-bar';
        const ratio = it._max ? Math.min(100, Math.round((it._score/it._max)*100)) : (it._score>=999?100:0);
        confBar.style.width = ratio + '%';
        confBar.title = it._match && it._match.length ? `PasujƒÖce objawy: ${it._match.join(', ')}` : 'Brak dopasowa≈Ñ';
        confWrap.appendChild(confBar);

        const badge=document.createElement('span'); badge.className='dx-badge '+(it.badge==='sor'?'sor':'poz'); badge.textContent = it.badge==='sor'?'pilnie SOR':'POZ';
        const hint=document.createElement('div'); hint.className='dx-match'; hint.textContent = it._match && it._match.length ? `Pasuje: ${it._match.join(', ')}` : '';

        meta.appendChild(confWrap); meta.appendChild(badge);

        li.appendChild(cb); li.appendChild(ico); li.appendChild(text); li.appendChild(meta);
        if(hint.textContent) li.appendChild(hint);
        ul.appendChild(li);
      });
      // po od≈õwie≈ºeniu sekcji ‚Äì krok 2 aktywny
      activateStep(2);
    }

    /* ===== Lekarze ===== */
    function computeDocs(){
      const {symp, urgent} = gatherSelectedTexts();
      const picked = (symp.concat(urgent)).map(s=>s.toLowerCase());
      const urgentHit = ["duszno≈õƒá","sinica","utrata przytomno≈õci","twardy brzuch","krwawienie","najgorszy b√≥l"].some(k=>picked.some(p=>p.includes(k)));

      const list = [];
      if(urgentHit){ list.push({name:"SOR / 112", why:"Czerwone flagi ‚Äî pilna pomoc", badge:"sor", ico:"üöë"}); }

      list.push({name:"POZ ‚Äî lekarz rodzinny", why:"Pierwszy kontakt, wstƒôpna ocena, skierowania", badge:"poz", ico:"ü©∫"});

      const specByPart = {
        glowa:["Neurolog","Laryngolog (zatoki)","Okulista (gdy zaburzenia widzenia)"],
        nos:["Laryngolog (otolaryngolog)","Alergolog"],
        oczy:["Okulista"],
        klatka:["Kardiolog","Pulmonolog","Gastroenterolog (refluks)"],
        pluca:["Pulmonolog","Alergolog"],
        serce:["Kardiolog"],
        brzuch:["Gastroenterolog","Chirurg (ostry brzuch)"],
        nerki:["Nefrolog","Urolog"],
        plecy:["Ortopeda","Fizjoterapeuta"],
        biodra:["Ortopeda","Fizjoterapeuta"],
        kolano:["Ortopeda","Fizjoterapeuta"],
        stopy:["Ortopeda","Fizjoterapeuta"],
        skora:["Dermatolog"],
        kaszel:["Pulmonolog","Alergolog"],
        goraczka:["POZ (diagnostyka przyczyny)"],
        zadlawienie:["POZ po incydencie / SOR przy objawach"],
        ciaza:["POZ","Ginekolog/po≈Ço≈ºna"]
      };
      (specByPart[CZESC]||[]).forEach(s=> list.push({name:s, why:"Specjalista adekwatny do problemu", badge:"poz", ico:"üè•"}));

      return list;
    }

    function renderDocs(){
      const ul = document.getElementById('docs-list'); if(!ul) return;
      const items = computeDocs();
      ul.innerHTML = '';
      items.forEach(it=>{
        const li = document.createElement('li');
        const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        const title = document.createElement('div');
        title.innerHTML = `<strong>${it.name}</strong><div style="color:#b8c2e0;margin-top:4px">${it.why}</div>`;
        const badge=document.createElement('span'); badge.className='doc-badge '+(it.badge==='sor'?'sor':'poz'); badge.textContent = (it.badge==='sor'?'pilnie SOR':'POZ/specjalista');

        // Mini-CTA: przygotowanie + mapy
        const prep = document.createElement('a'); prep.href="#"; prep.className="doc-cta"; prep.textContent="Jak siƒô przygotowaƒá na wizytƒô?";
        prep.addEventListener('click', (e)=>{ e.preventDefault(); alert("Zbierz: listƒô objaw√≥w i czas trwania, leki, choroby przewlek≈Çe, alergie, pomiary (temp./ci≈õnienie), wyniki bada≈Ñ."); });

        const ctas = document.createElement('div'); ctas.style.marginTop='6px';
        const sor = document.createElement('a'); sor.className='doc-cta'; sor.href='https://www.google.com/maps/search/SOR+blisko+mnie'; sor.target='_blank'; sor.rel='noopener'; sor.textContent='Znajd≈∫ SOR w pobli≈ºu';
        const apteka = document.createElement('a'); apteka.className='doc-cta'; apteka.href='https://www.google.com/maps/search/apteka+24h+blisko+mnie'; apteka.target='_blank'; apteka.rel='noopener'; apteka.textContent='Znajd≈∫ aptekƒô 24h';
        ctas.appendChild(sor); ctas.appendChild(document.createTextNode(' ')); ctas.appendChild(apteka);

        const right = document.createElement('div'); right.style.marginLeft='auto'; right.appendChild(badge);
        li.appendChild(cb); li.appendChild(title); li.appendChild(right); li.appendChild(prep); li.appendChild(ctas);
        ul.appendChild(li);
      });
      // krok 3 aktywny
      activateStep(3);
    }

    /* Spiƒôcie interakcji */
    document.addEventListener('bh:symptoms-changed', ()=>{ renderDx(); renderDocs(); updateRisk(); });
    document.querySelector('[data-variant="dx"]')?.addEventListener('click', renderDx);
    document.querySelector('[data-variant="docs"]')?.addEventListener('click', renderDocs);

    // przyciski skr√≥t√≥w w Objawach
    document.getElementById('dx-open')?.addEventListener('click', ()=>{
      renderDx(); showPanel('#s-dx');
      document.querySelector('.tab[data-variant="dx"]')?.classList.remove('tab-attn');
    });
    document.getElementById('docs-open')?.addEventListener('click', ()=>{
      renderDocs(); showPanel('#s-docs');
      document.querySelector('.tab[data-variant="docs"]')?.classList.remove('tab-attn');
    });

    // Przywr√≥cenie zapamiƒôtanych objaw√≥w po wyrenderowaniu list
    window.addEventListener('load', ()=>{ restoreSelections(); });

    /* Particles */
    (function particles(){
      const c=document.getElementById('bh-particles'); if(!c) return;
      const prefersReduced=window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches;
      const dpr=Math.min(2,window.devicePixelRatio||1);
      const ctx=c.getContext('2d'); let W,H,dots=[];
      function targetCount(){ const t=Math.floor((innerWidth*innerHeight)/12000); return Math.max(90,Math.min(220,t)); }
      function resize(){
        W=c.width=Math.floor(innerWidth*dpr); H=c.height=Math.floor(innerHeight*dpr);
        c.style.width=innerWidth+'px'; c.style.height=innerHeight+'px';
        const N=targetCount(); dots=Array.from({length:N},()=>({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.18*dpr,vy:(Math.random()-.5)*.18*dpr,r:(Math.random()*1.7+0.9)*dpr,a:Math.random()*.6+.25}));
      }
      function step(){
        ctx.clearRect(0,0,W,H);
        for(const p of dots){
          p.x+=p.vx; p.y+=p.vy;
          if(p.x<0||p.x>W) p.vx*=-1;
          if(p.y<0||p.y>H) p.vy*=-1;
          ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          const g=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*3.2);
          g.addColorStop(0,`rgba(164,107,255,${0.26*p.a})`); g.addColorStop(1,`rgba(94,234,212,0)`); ctx.fillStyle=g; ctx.fill();
        }
        if(!prefersReduced) requestAnimationFrame(step);
      }
      addEventListener('resize',resize,{passive:true}); resize(); step();
    })();
  </script>
<script src="/assets/js/translator-unified.js?v=1" defer></script>
<!-- BEGIN bh-patch:translator-oneblock -->
<script>
(function(){
  if (window.__bhPatchTranslatorOneBlock__) return;
  window.__bhPatchTranslatorOneBlock__ = 1;

  // ====== STYLE (wstrzykiwany, zero dodatkowych plik√≥w) ======
  (function injectStyle(){
    var css = `
:root {
  --bh-accent:#6c5ce7; --bh-bg:rgba(255,255,255,0.75);
  --bh-shadow:0 8px 20px rgba(0,0,0,0.12);
  --bh-radius:16px; --bh-blur:saturate(1.2) blur(6px);
  --bh-z:9999; --bh-font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans","Helvetica Neue",sans-serif;
}
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:var(--bh-z);font-family:var(--bh-font)}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:var(--bh-radius);box-shadow:var(--bh-shadow);cursor:pointer;color:#1f2937;user-select:none;-webkit-tap-highlight-color:transparent;transition:transform .12s ease,background .2s ease,border-color .2s ease}
.bh-translator-btn:hover{transform:translateY(-1px)}
.bh-translator-btn:active{transform:translateY(0)}
.bh-translator-btn .bh-icn{width:18px;height:18px;flex:0 0 auto;color:var(--bh-accent)}
.bh-translator-label{font-size:14px;line-height:1;font-weight:600}
.bh-translator-dd{position:absolute;right:0;margin-top:8px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:14px;box-shadow:var(--bh-shadow);min-width:200px;padding:8px;display:none}
.bh-translator-wrap[aria-expanded="true"] .bh-translator-dd{display:block}
.bh-dd-item{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;border-radius:10px;background:transparent;border:0;cursor:pointer;color:#111827;font-size:14px;font-weight:600}
.bh-dd-item:hover{background:rgba(108,92,231,.08)}
.bh-dd-item small{color:#6b7280;font-weight:500}
@media(max-width:480px){.bh-translator-btn{padding:8px 12px;gap:8px}.bh-translator-label{font-size:13px}.bh-translator-dd{min-width:180px}}
[data-bh-no-translate]{}
    `;
    var s = document.createElement('style');
    s.setAttribute('data-bh-style','translator');
    s.appendChild(document.createTextNode(css));
    document.head.appendChild(s);
  })();

  // ====== USTAWIENIA ======
  var STORE_KEY='bh-lang';
  var SUPPORTED=[{code:'pl',label:'Polski'},{code:'en',label:'English'},{code:'de',label:'Deutsch'},{code:'uk',label:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞'}];
  var EMBED={
    en:{"Szukaj":"Search","Telefon alarmowy":"Emergency phone","Pierwsza pomoc":"First Aid","Apteka":"Pharmacy","Szpital":"Hospital","Objawy":"Symptoms","Przyczyny":"Causes","Leki":"Medications","Na receptƒô":"Prescription","Bez recepty":"Over-the-counter","Kiedy siƒô niepokoiƒá":"When to worry","Czerwone flagi":"Red flags"},
    de:{"Szukaj":"Suche","Telefon alarmowy":"Notruf","Pierwsza pomoc":"Erste Hilfe","Apteka":"Apotheke","Szpital":"Krankenhaus","Objawy":"Symptome","Przyczyny":"Ursachen","Leki":"Medikamente","Na receptƒô":"Verschreibungspflichtig","Bez recepty":"Rezeptfrei","Kiedy siƒô niepokoiƒá":"Wann man sich sorgen sollte","Czerwone flagi":"Rote Flaggen"},
    uk:{"Szukaj":"–ü–æ—à—É–∫","Telefon alarmowy":"–ï–∫—Å—Ç—Ä–µ–Ω–∏–π –Ω–æ–º–µ—Ä","Pierwsza pomoc":"–ü–µ—Ä—à–∞ –¥–æ–ø–æ–º–æ–≥–∞","Apteka":"–ê–ø—Ç–µ–∫–∞","Szpital":"–õ—ñ–∫–∞—Ä–Ω—è","Objawy":"–°–∏–º–ø—Ç–æ–º–∏","Przyczyny":"–ü—Ä–∏—á–∏–Ω–∏","Leki":"–õ—ñ–∫–∏","Na receptƒô":"–ó–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º","Bez recepty":"–ë–µ–∑ —Ä–µ—Ü–µ–ø—Ç—É","Kiedy siƒô niepokoiƒá":"–ö–æ–ª–∏ –≤–∞—Ä—Ç–æ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—å","Czerwone flagi":"–¢—Ä–∏–≤–æ–∂–Ω—ñ –æ–∑–Ω–∞–∫–∏"}
  };
  var saved=localStorage.getItem(STORE_KEY);
  var browser=(navigator.language||'pl').slice(0,2).toLowerCase();
  var DEFAULT='pl';
  var initial=(saved && SUPPORTED.some(l=>l.code===saved))?saved:(SUPPORTED.some(l=>l.code===browser)?browser:DEFAULT);
  var active=DEFAULT, dict={};

  // ====== UI ======
  function createUI(){
    if (document.getElementById('bh-translator')) return;
    var wrap=document.createElement('div');
    wrap.className='bh-translator-wrap'; wrap.id='bh-translator';
    wrap.setAttribute('aria-expanded','false');

    var btn=document.createElement('button');
    btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML = `
      <svg class="bh-icn" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.03-9 9 4.03 9 9 9Z" stroke="currentColor" stroke-width="1.6"></path>
        <path d="M3 12h18M12 3c3 3.5 3 14 0 18M6 6c3.5 2 8.5 2 12 0M6 18c3.5-2 8.5-2 12 0" stroke="currentColor" stroke-width="1.2"></path>
      </svg>
      <span class="bh-translator-label" data-bh-no-translate>Lang: ${(initial||'pl').toUpperCase()}</span>
    `;

    var dd=document.createElement('div');
    dd.className='bh-translator-dd'; dd.setAttribute('role','menu');
    SUPPORTED.forEach(function(item){
      var el=document.createElement('button');
      el.type='button'; el.className='bh-dd-item'; el.setAttribute('data-lang',item.code);
      el.innerHTML=`<span>${item.label}</span><small>${item.code.toUpperCase()}</small>`;
      dd.appendChild(el);
    });

    wrap.appendChild(btn); wrap.appendChild(dd); document.body.appendChild(wrap);

    btn.addEventListener('click', function(){
      wrap.setAttribute('aria-expanded', wrap.getAttribute('aria-expanded')==='true'?'false':'true');
    });
    document.addEventListener('click', function(e){ if (!wrap.contains(e.target)) wrap.setAttribute('aria-expanded','false'); });
    dd.addEventListener('click', function(e){
      var b=e.target.closest('.bh-dd-item'); if(!b) return;
      var lang=b.getAttribute('data-lang'); wrap.setAttribute('aria-expanded','false'); setLanguage(lang);
    });
  }

  // ====== ≈ÅADOWANIE S≈ÅOWNIKA ======
  function loadDict(lang){
    return new Promise(function(resolve){
      if (lang==='pl') return resolve({});
      // pr√≥buj assets/i18n/{lang}.json; je≈õli brak ‚Äì wbudowany
      fetch('assets/i18n/'+lang+'.json', {cache:'no-store'})
        .then(function(r){ if(!r.ok) throw 0; return r.json(); })
        .then(function(json){ resolve(Object.assign({}, EMBED[lang]||{}, json)); })
        .catch(function(){ resolve(Object.assign({}, EMBED[lang]||{})); });
    });
  }

  // ====== T≈ÅUMACZENIE ======
  function norm(t){ return (t||'').replace(/\s+/g,' ').trim(); }
  function translateNodeText(node){
    var original=norm(node.textContent||''); if(!original) return;
    var t=dict[original]; if (t && t!==original) node.textContent=t;
  }
  function walkAndTranslate(container){
    var SKIP=function(el){ return el.closest('[data-bh-no-translate]') || el.closest('#bh-translator'); };
    // data-i18n (dok≈Çadne klucze)
    container.querySelectorAll ? container.querySelectorAll('[data-i18n]').forEach(function(el){
      if (SKIP(el)) return; var key=el.getAttribute('data-i18n'); var t=dict[key]; if (t) el.textContent=t;
    }) : null;
    // atrybuty
    container.querySelectorAll ? container.querySelectorAll('[data-i18n-attr]').forEach(function(el){
      if (SKIP(el)) return;
      var map=(el.getAttribute('data-i18n-attr')||'').split(',').map(function(s){return s.trim();});
      map.forEach(function(pair){
        var sp=pair.split('|'); var attr=(sp[0]||'').trim(); var key=(sp[1]||'').trim();
        if(!attr||!key) return; var t=dict[key]; if(t) el.setAttribute(attr,t);
      });
    }) : null;
    // proste elementy tekstowe
    var cand=container.querySelectorAll ? container.querySelectorAll('h1,h2,h3,h4,h5,h6,p,li,button,a,th,td,span,label,small,strong,em') : [];
    cand.forEach(function(el){
      if (SKIP(el)) return;
      if (el.childElementCount===0) translateNodeText(el);
    });
  }

  var moInstalled=false;
  function installObserver(){
    if (moInstalled) return; moInstalled=true;
    var mo=new MutationObserver(function(muts){
      if (active==='pl') return;
      muts.forEach(function(m){
        if (m.type==='childList'){
          m.addedNodes.forEach(function(n){ if(n.nodeType===1) walkAndTranslate(n); });
        } else if (m.type==='attributes' && m.target && m.target.matches && m.target.matches('[data-i18n-attr]')){
          walkAndTranslate(m.target);
        }
      });
    });
    mo.observe(document.documentElement,{childList:true,subtree:true,attributes:true,attributeFilter:['placeholder','title','aria-label']});
  }

  function setLanguage(lang){
    if (!SUPPORTED.some(function(l){return l.code===lang;})) return;
    active=lang; localStorage.setItem(STORE_KEY, lang);
    var label=document.querySelector('#bh-translator .bh-translator-label');
    if (label) label.textContent='Lang: '+lang.toUpperCase();

    if (lang==='pl'){ location.reload(); return; }
    loadDict(lang).then(function(d){ dict=d; walkAndTranslate(document); installObserver(); });
  }

  // ====== START ======
  function init(){
    createUI();
    // je≈õli u≈ºytkownik mia≈Ç wybrany jƒôzyk ‚Äì zastosuj
    if (initial!=='pl'){ setLanguage(initial); }
  }
  if (document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', init); }
  else { init(); }
})();
</script>
<!-- END bh-patch:translator-oneblock -->
<!-- BEGIN bh-patch:translator-hotfix -->
<script>
(function(){
  if (window.__bhPatchTranslatorHotfix__) return;
  window.__bhPatchTranslatorHotfix__ = 1;

  // ===== A) Anty-Google-Translate (baner/ramka/auto) =====
  (function neutralizeGoogleTranslate(){
    // 1) Meta "notranslate" ‚Äì blokuje podpowiedzi i auto-t≈Çumaczenie
    var hasMeta = document.querySelector('meta[name="google"][content*="notranslate"]');
    if (!hasMeta) {
      var m = document.createElement('meta');
      m.setAttribute('name','google'); m.setAttribute('content','notranslate');
      document.head.appendChild(m);
    }

    // 2) CSS: ukryj UI Google Translate (baner/tooltipy), nawet je≈õli ju≈º siƒô wstrzyknƒÖ≈Ç
    var css = `
.goog-te-banner-frame, .goog-te-gadget, .goog-tooltip, .goog-te-balloon-frame, #google_translate_element,
.VIpgJd-ZVi9od-ORHb, .VIpgJd-ZVi9od-l4eHX-hSRGPd, .VIpgJd-ZVi9od-ORHb-OEVmcd { display:none !important; visibility:hidden !important; }
body { top: 0 !important; }
`;
    var s = document.createElement('style');
    s.setAttribute('data-bh-style','anti-google-translate');
    s.appendChild(document.createTextNode(css));
    document.head.appendChild(s);

    // 3) Usu≈Ñ ju≈º wstrzykniƒôte elementy/klasy
    function purgeGT(){
      ['iframe.goog-te-banner-frame','#google_translate_element','.VIpgJd-ZVi9od-ORHb','.goog-te-gadget'].forEach(function(sel){
        document.querySelectorAll(sel).forEach(function(n){ try{ n.remove(); }catch(_){ n.style.display='none'; } });
      });
      document.documentElement.classList.remove('translated-ltr','translated-rtl');
      document.body.style.top = null;
      // Wyzeruj stan google translate je≈õli istnia≈Ç
      try { localStorage.removeItem('googtrans'); } catch(_){}
      try { sessionStorage.removeItem('googtrans'); } catch(_){}
      // Zneutralizuj globalny init je≈õli snippet google by≈Ç dodany
      window.googleTranslateElementInit = function(){};
      // Zablokuj ewentualne przysz≈Çe ≈Çadowanie element.js
      var _createElement = document.createElement;
      document.createElement = function(tag){
        var el = _createElement.call(document, tag);
        if (tag.toLowerCase()==='script') {
          var _setAttr = el.setAttribute;
          el.setAttribute = function(name, value){
            if (name==='src' && /translate_a\/element\.js/i.test(String(value||''))) {
              // zignoruj ≈Çadowanie skryptu google translate
              return;
            }
            return _setAttr.apply(el, arguments);
          };
        }
        return el;
      };
    }
    purgeGT();
    // Dodatkowo pr√≥buj czy≈õciƒá, je≈õli co≈õ do≈Çaduje siƒô dynamicznie
    var mo = new MutationObserver(function(){ purgeGT(); });
    mo.observe(document.documentElement, { childList:true, subtree:true });
  })();

  // ===== B) Wzmocnienie naszego t≈Çumacza (natychmiast po wyborze) =====
  (function reinforceBHTranslator(){
    // Je≈ºeli masz w projekcie poprzedni blok "translator-oneblock" / "bh-translator.js",
    // poni≈ºszy kod zadba o natychmiastowe t≈Çumaczenie i poprawne nas≈Çuchiwanie klikniƒôƒá.

    // 1) Gdy istnieje dropdown naszego t≈Çumacza ‚Äì dodaj tak≈ºe pointerup (mobile), plus focusem.
    function bindFastActions(){
      var dd = document.querySelector('#bh-translator .bh-translator-dd');
      var wrap = document.getElementById('bh-translator');
      if (!dd || !wrap) return;

      function onPick(e){
        var b = e.target.closest('.bh-dd-item'); if(!b) return;
        var lang = b.getAttribute('data-lang');
        wrap.setAttribute('aria-expanded','false');
        // Je≈õli mamy globalny setLanguage z naszego widgetu ‚Äì u≈ºyj.
        if (typeof window.setLanguage === 'function') {
          try { window.setLanguage(lang); } catch(_){}
          return;
        }
        // Je≈õli nie ‚Äì spr√≥buj odpaliƒá standardowƒÖ ≈õcie≈ºkƒô poprzedniego bloku.
        try {
          // Wersje wcze≈õniejsze mia≈Çy setLanguage w IIFE ‚Äì nie w globalu,
          // wiƒôc wymusimy ponowne t≈Çumaczenie przez zapis jƒôzyka i reload je≈õli PL
          localStorage.setItem('bh-lang', lang);
          if (lang === 'pl') { location.reload(); return; }
          // Spr√≥buj wywo≈Çaƒá ponowny skan (fallback bardzo defensywny)
          setTimeout(function(){
            var ev = new Event('bh-translate-rescan'); document.dispatchEvent(ev);
          }, 0);
        } catch(_){}
      }

      ['click','pointerup','keyup'].forEach(function(type){
        dd.addEventListener(type, function(e){
          if (type==='keyup' && e.key !== 'Enter') return;
          onPick(e);
        }, { passive:true });
      });
    }

    // 2) Uniwersalny "rescan" ‚Äì pod≈ÇƒÖcz do naszego wcze≈õniejszego kodu je≈õli s≈Çucha zdarze≈Ñ
    document.addEventListener('bh-translate-rescan', function(){
      try {
        // Je≈õli w poprzednim bloku jest funkcja walkAndTranslate dostƒôpna przez closure ‚Äì nie mamy do niej dostƒôpu,
        // ale je≈õli aktywny jest MutationObserver, wystarczy prowokacja minimalnej mutacji:
        var mark = document.createElement('span');
        mark.setAttribute('data-bh-no-translate','');
        document.body.appendChild(mark);
        requestAnimationFrame(function(){ mark.remove(); });
      } catch(_){}
    });

    // 3) Je≈ºeli UI t≈Çumacza jeszcze nie istnieje (np. tylko "oneblock" z innej strony go doda),
    // poczekaj na DOM i pod≈ÇƒÖcz zdarzenia.
    function whenReady(){
      bindFastActions();
      // Gwarantujemy, ≈ºe label siƒô od≈õwie≈ºy przy wej≈õciu miƒôdzy stronami
      var saved = localStorage.getItem('bh-lang');
      var label = document.querySelector('#bh-translator .bh-translator-label');
      if (label && saved) label.textContent = 'Lang: ' + saved.toUpperCase();
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', whenReady);
    } else {
      whenReady();
    }
  })();
})();
</script>
<!-- END bh-patch:translator-hotfix -->
<!-- BEGIN bh-patch:translator-fix-v2 -->
<script>
(function(){
  if (window.__bhPatchTranslatorFixV2__) return;
  window.__bhPatchTranslatorFixV2__ = 1;

  // ========== USTAWIENIA ==========
  var BH_STORE_KEY = 'bh-lang';
  var BH_SUPPORTED = [
    { code: 'pl', label: 'Polski' },
    { code: 'en', label: 'English' },
    { code: 'de', label: 'Deutsch' },
    { code: 'uk', label: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞' }
  ];

  // Minimalne s≈Çowniki wbudowane (mo≈ºesz rozbudowaƒá p√≥≈∫niej plikami assets/i18n/*.json)
  var BH_EMBED = {
    en: {
      "szukaj":"Search","telefon alarmowy":"Emergency phone","pierwsza pomoc":"First Aid","apteka":"Pharmacy","szpital":"Hospital",
      "objawy":"Symptoms","przyczyny":"Causes","leki":"Medications","na receptƒô":"Prescription","bez recepty":"Over-the-counter",
      "kiedy siƒô niepokoiƒá":"When to worry","czerwone flagi":"Red flags","lekarz":"Doctor","kontakt":"Contact","informacje":"Information"
    },
    de: {
      "szukaj":"Suche","telefon alarmowy":"Notruf","pierwsza pomoc":"Erste Hilfe","apteka":"Apotheke","szpital":"Krankenhaus",
      "objawy":"Symptome","przyczyny":"Ursachen","leki":"Medikamente","na receptƒô":"Verschreibungspflichtig","bez recepty":"Rezeptfrei",
      "kiedy siƒô niepokoiƒá":"Wann Sorgen machen","czerwone flagi":"Rote Flaggen","lekarz":"Arzt","kontakt":"Kontakt","informacje":"Informationen"
    },
    uk: {
      "szukaj":"–ü–æ—à—É–∫","telefon alarmowy":"–ï–∫—Å—Ç—Ä–µ–Ω–∏–π –Ω–æ–º–µ—Ä","pierwsza pomoc":"–ü–µ—Ä—à–∞ –¥–æ–ø–æ–º–æ–≥–∞","apteka":"–ê–ø—Ç–µ–∫–∞","szpital":"–õ—ñ–∫–∞—Ä–Ω—è",
      "objawy":"–°–∏–º–ø—Ç–æ–º–∏","przyczyny":"–ü—Ä–∏—á–∏–Ω–∏","leki":"–õ—ñ–∫–∏","na receptƒô":"–ó–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º","bez recepty":"–ë–µ–∑ —Ä–µ—Ü–µ–ø—Ç—É",
      "kiedy siƒô niepokoiƒá":"–ö–æ–ª–∏ –≤–∞—Ä—Ç–æ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—è","czerwone flagi":"–¢—Ä–∏–≤–æ–∂–Ω—ñ –æ–∑–Ω–∞–∫–∏","lekarz":"–õ—ñ–∫–∞—Ä","kontakt":"–ö–æ–Ω—Ç–∞–∫—Ç","informacje":"–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è"
    }
  };

  var BH_DEFAULT = 'pl';
  var savedLang = localStorage.getItem(BH_STORE_KEY);
  var browserLang = (navigator.language||'pl').slice(0,2).toLowerCase();
  var BH_INITIAL = (savedLang && BH_SUPPORTED.some(l=>l.code===savedLang)) ? savedLang :
                   (BH_SUPPORTED.some(l=>l.code===browserLang) ? browserLang : BH_DEFAULT);

  // ========== POMOCNICZE ==========
  function bhNorm(str){
    return String(str||'').toLowerCase()
      .replace(/\s+/g,' ')
      .replace(/[.,;:!?()[\]{}"‚Äû‚Äù‚Äö‚Äô'`/\\|<>~^%‚Ç¨$#@*+=\-‚Äì‚Äî]/g,'')
      .trim();
  }
  function bhTextOnly(el){
    // t≈Çumaczymy tylko proste tre≈õci (bez HTML dzieci), aby nie niszczyƒá z≈Ço≈ºonych blok√≥w
    return el && el.childElementCount === 0;
  }

  // ========== ZA≈ÅƒÑCZENIE / UTWORZENIE UI (je≈õli brak) ==========
  function ensureUI(){
    if (document.getElementById('bh-translator')) return;
    // Lekki styl (je≈õli poprzedni blok go nie wstrzyknƒÖ≈Ç)
    if (!document.querySelector('style[data-bh-style="translator-core"]')){
      var css = `
:root{--bh-accent:#6c5ce7;--bh-bg:rgba(255,255,255,.75);--bh-shadow:0 8px 20px rgba(0,0,0,.12);--bh-radius:16px;--bh-blur:saturate(1.2) blur(6px);--bh-z:9999;--bh-font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans","Helvetica Neue",sans-serif}
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:var(--bh-z);font-family:var(--bh-font)}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:var(--bh-radius);box-shadow:var(--bh-shadow);cursor:pointer;color:#1f2937;user-select:none;-webkit-tap-highlight-color:transparent;transition:transform .12s ease,background .2s ease,border-color .2s ease}
.bh-translator-btn:hover{transform:translateY(-1px)}.bh-translator-btn:active{transform:translateY(0)}
.bh-translator-btn .bh-icn{width:18px;height:18px;flex:0 0 auto;color:var(--bh-accent)}
.bh-translator-label{font-size:14px;line-height:1;font-weight:600}
.bh-translator-dd{position:absolute;right:0;margin-top:8px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:14px;box-shadow:var(--bh-shadow);min-width:200px;padding:8px;display:none}
.bh-translator-wrap[aria-expanded="true"] .bh-translator-dd{display:block}
.bh-dd-item{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;border-radius:10px;background:transparent;border:0;cursor:pointer;color:#111827;font-size:14px;font-weight:600}
.bh-dd-item:hover{background:rgba(108,92,231,.08)}.bh-dd-item small{color:#6b7280;font-weight:500}
@media(max-width:480px){.bh-translator-btn{padding:8px 12px;gap:8px}.bh-translator-label{font-size:13px}.bh-translator-dd{min-width:180px}}
      `;
      var st = document.createElement('style');
      st.setAttribute('data-bh-style','translator-core');
      st.appendChild(document.createTextNode(css));
      document.head.appendChild(st);
    }

    var wrap=document.createElement('div'); wrap.id='bh-translator'; wrap.className='bh-translator-wrap'; wrap.setAttribute('aria-expanded','false');
    var btn=document.createElement('button'); btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML = `
      <svg class="bh-icn" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.03-9 9 4.03 9 9 9Z" stroke="currentColor" stroke-width="1.6"></path>
        <path d="M3 12h18M12 3c3 3.5 3 14 0 18M6 6c3.5 2 8.5 2 12 0M6 18c3.5-2 8.5-2 12 0" stroke="currentColor" stroke-width="1.2"></path>
      </svg>
      <span class="bh-translator-label" data-bh-no-translate>Lang: ${(BH_INITIAL||'pl').toUpperCase()}</span>
    `;
    var dd=document.createElement('div'); dd.className='bh-translator-dd'; dd.setAttribute('role','menu');
    BH_SUPPORTED.forEach(function(l){
      var b=document.createElement('button'); b.type='button'; b.className='bh-dd-item'; b.setAttribute('data-lang',l.code);
      b.innerHTML = `<span>${l.label}</span><small>${l.code.toUpperCase()}</small>`;
      dd.appendChild(b);
    });
    wrap.appendChild(btn); wrap.appendChild(dd); document.body.appendChild(wrap);

    btn.addEventListener('click', function(){
      wrap.setAttribute('aria-expanded', wrap.getAttribute('aria-expanded')==='true'?'false':'true');
    });
    document.addEventListener('click', function(e){ if (!wrap.contains(e.target)) wrap.setAttribute('aria-expanded','false'); });

    // Delegacja na elementy listy (klik, pointer, Enter)
    dd.addEventListener('click', bhPickLang, {passive:true});
    dd.addEventListener('pointerup', bhPickLang, {passive:true});
    dd.addEventListener('keyup', function(e){ if(e.key==='Enter') bhPickLang(e); }, {passive:true});
    function bhPickLang(e){
      var b=e.target.closest('.bh-dd-item'); if(!b) return;
      wrap.setAttribute('aria-expanded','false');
      var code=b.getAttribute('data-lang'); if (!code) return;
      window.bhSetLanguage(code); // globalny, natychmiastowy
    }
  }

  // ========== ZA≈ÅADOWANIE S≈ÅOWNIKA (z pliku + wbudowany) ==========
  function bhLoadDict(lang){
    return new Promise(function(resolve){
      if (lang==='pl') return resolve({});
      fetch('assets/i18n/'+lang+'.json',{cache:'no-store'}).then(function(r){
        if (!r.ok) throw 0; return r.json();
      }).then(function(json){
        // scal: wbudowany (lowercase keys) + plik (preferuj plik)
        var base = BH_EMBED[lang]||{};
        var lcBase = {}; Object.keys(base).forEach(function(k){ lcBase[bhNorm(k)] = base[k]; });
        var lcFile = {}; Object.keys(json||{}).forEach(function(k){ lcFile[bhNorm(k)] = json[k]; });
        resolve(Object.assign({}, lcBase, lcFile));
      }).catch(function(){
        var base = BH_EMBED[lang]||{};
        var lc = {}; Object.keys(base).forEach(function(k){ lc[bhNorm(k)] = base[k]; });
        resolve(lc);
      });
    });
  }

  // ========== T≈ÅUMACZENIE ==========
  var bhActive = BH_DEFAULT;
  var bhDict = {};

  function bhTranslateTree(root){
    // 1) Dok≈Çadne klucze: data-i18n
    root.querySelectorAll && root.querySelectorAll('[data-i18n]').forEach(function(el){
      if (el.closest('#bh-translator')) return;
      var key = el.getAttribute('data-i18n');
      var t = bhDict[bhNorm(key)];
      if (t) el.textContent = t;
    });

    // 2) Atrybuty
    root.querySelectorAll && root.querySelectorAll('[data-i18n-attr]').forEach(function(el){
      if (el.closest('#bh-translator')) return;
      (el.getAttribute('data-i18n-attr')||'').split(',').map(function(s){return s.trim();}).forEach(function(pair){
        var sp = pair.split('|'); var attr=(sp[0]||'').trim(); var key=(sp[1]||'').trim();
        if(!attr || !key) return;
        var t = bhDict[bhNorm(key)];
        if (t) el.setAttribute(attr, t);
      });
    });

    // 3) Proste elementy tekstowe (bez dzieci) ‚Äì ostro≈ºnie, aby nie mieszaƒá zda≈Ñ
    var candidates = root.querySelectorAll ? root.querySelectorAll('h1,h2,h3,h4,h5,h6,p,li,button,a,th,td,span,label,small,strong,em,figcaption,legend,summary,dd,dt,caption') : [];
    candidates.forEach(function(el){
      if (el.closest('#bh-translator')) return;
      if (!bhTextOnly(el)) return;
      var k = bhNorm(el.textContent);
      if (!k) return;
      var t = bhDict[k];
      if (t && t !== el.textContent) el.textContent = t;
    });
  }

  var bhObserverInstalled = false;
  function bhInstallObserver(){
    if (bhObserverInstalled) return;
    bhObserverInstalled = true;
    var mo = new MutationObserver(function(muts){
      if (bhActive==='pl') return;
      muts.forEach(function(m){
        if (m.type==='childList'){
          m.addedNodes.forEach(function(n){ if (n.nodeType===1) bhTranslateTree(n); });
        }
      });
    });
    mo.observe(document.documentElement, { childList:true, subtree:true });
  }

  // ========== API GLOBALNE ==========
  window.bhSetLanguage = function(lang){
    if (!BH_SUPPORTED.some(function(l){return l.code===lang;})) return;
    bhActive = lang;
    localStorage.setItem(BH_STORE_KEY, lang);
    var label = document.querySelector('#bh-translator .bh-translator-label');
    if (label) label.textContent = 'Lang: ' + lang.toUpperCase();

    if (lang === 'pl'){
      // powr√≥t do oryginalnego PL ‚Äì najpewniej przez reload (bez baner√≥w, bo ju≈º zablokowane)
      location.reload();
      return;
    }
    // Za≈Çaduj s≈Çownik i przet≈Çumacz ca≈Çy dokument
    bhLoadDict(lang).then(function(dict){
      bhDict = dict || {};
      bhTranslateTree(document);
      bhInstallObserver();
    });
  };

  // ========== START ==========
  function bhInit(){
    ensureUI(); // je≈õli ju≈º jest ‚Äì tylko pod≈ÇƒÖczy zdarzenia
    // Je≈õli wcze≈õniej zapisano jƒôzyk, zastosuj bez klikania
    if (BH_INITIAL !== 'pl') {
      window.bhSetLanguage(BH_INITIAL);
    } else {
      // zsynchronizuj label, gdy kto≈õ wcze≈õniej zmieni≈Ç
      var saved = localStorage.getItem(BH_STORE_KEY);
      var lbl = document.querySelector('#bh-translator .bh-translator-label');
      if (lbl && saved) lbl.textContent = 'Lang: ' + saved.toUpperCase();
    }
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', bhInit); else bhInit();

  // ========== DODATKOWO: brak tooltip√≥w/banner√≥w (gdyby przeglƒÖdarka co≈õ pr√≥bowa≈Ça) ==========
  (function hardenNoGoogle(){
    var meta = document.querySelector('meta[name="google"][content*="notranslate"]');
    if (!meta) {
      var m = document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
    }
    var s = document.createElement('style'); s.setAttribute('data-bh-style','anti-google-translate'); s.textContent = `
.goog-te-banner-frame,.goog-te-gadget,.goog-tooltip,.goog-te-balloon-frame,#google_translate_element,
.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd{display:none !important;visibility:hidden !important}
body{top:0 !important}
`; document.head.appendChild(s);
    try { localStorage.removeItem('googtrans'); sessionStorage.removeItem('googtrans'); } catch(_){}
    window.googleTranslateElementInit = function(){};
  })();

})();
</script>
<!-- END bh-patch:translator-fix-v2 -->
<!-- BEGIN bh-patch:translator-fix-v3 -->
<script>
(function(){
  if (window.__bhPatchTranslatorFixV3__) return;
  window.__bhPatchTranslatorFixV3__ = 1;

  // ===== Za≈Ço≈ºenia kr√≥tkie =====
  // 1) Tekst bazowy strony jest po polsku (PL).
  // 2) Ten silnik t≈Çumaczy wƒôz≈Çy TEKSTOWE (TreeWalker) ‚Äì tak≈ºe wewnƒÖtrz z≈Ço≈ºonych element√≥w.
  // 3) S≈Çowniki frazowe (n-gramy) + s≈Çownik s≈Ç√≥w. Mo≈ºesz rozszerzaƒá assets/i18n/{lang}.json.
  // 4) Nie dotykamy element√≥w oznaczonych [data-bh-no-translate] ani #bh-translator.

  // ===== Konfiguracja =====
  var BH_STORE_KEY = 'bh-lang';
  var BH_DEFAULT   = 'pl';
  var BH_SUPPORTED = [
    { code:'pl', label:'Polski' },
    { code:'en', label:'English' },
    { code:'de', label:'Deutsch' },
    { code:'uk', label:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞' }
  ];
  var savedLang   = localStorage.getItem(BH_STORE_KEY);
  var browserLang = (navigator.language||'pl').slice(0,2).toLowerCase();
  var BH_INITIAL  = (savedLang && BH_SUPPORTED.some(l=>l.code===savedLang)) ? savedLang :
                    (BH_SUPPORTED.some(l=>l.code===browserLang) ? browserLang : BH_DEFAULT);

  // ===== Anti Google Translate (baner itp.) =====
  (function(){
    if (!document.querySelector('meta[name="google"][content*="notranslate"]')) {
      var m=document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
    }
    var s=document.createElement('style');
    s.setAttribute('data-bh-style','anti-google-translate');
    s.textContent = '.goog-te-banner-frame,.goog-te-gadget,.goog-tooltip,.goog-te-balloon-frame,#google_translate_element,.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd{display:none!important;visibility:hidden!important}body{top:0!important}';
    document.head.appendChild(s);
    try { localStorage.removeItem('googtrans'); sessionStorage.removeItem('googtrans'); } catch(_){}
    window.googleTranslateElementInit = function(){};
  })();

  // ===== Mini UI (je≈õli wcze≈õniejszy UI nie istnieje) =====
  function ensureUI(){
    if (document.getElementById('bh-translator')) return;
    var st=document.createElement('style'); st.setAttribute('data-bh-style','translator-core'); st.textContent = `
:root{--bh-accent:#6c5ce7;--bh-bg:rgba(255,255,255,.75);--bh-shadow:0 8px 20px rgba(0,0,0,.12);--bh-radius:16px;--bh-blur:saturate(1.2) blur(6px);--bh-z:9999;--bh-font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans","Helvetica Neue",sans-serif}
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:var(--bh-z);font-family:var(--bh-font)}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:var(--bh-radius);box-shadow:var(--bh-shadow);cursor:pointer;color:#1f2937}
.bh-translator-btn:hover{transform:translateY(-1px)}.bh-translator-label{font-size:14px;font-weight:600}
.bh-translator-dd{position:absolute;right:0;margin-top:8px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:14px;box-shadow:var(--bh-shadow);min-width:200px;padding:8px;display:none}
.bh-translator-wrap[aria-expanded="true"] .bh-translator-dd{display:block}
.bh-dd-item{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;border-radius:10px;background:transparent;border:0;cursor:pointer;color:#111827;font-size:14px;font-weight:600}
.bh-dd-item:hover{background:rgba(108,92,231,.08)}.bh-dd-item small{color:#6b7280}
@media(max-width:480px){.bh-translator-btn{padding:8px 12px;gap:8px}.bh-translator-dd{min-width:180px}}`;
    document.head.appendChild(st);

    var wrap=document.createElement('div'); wrap.id='bh-translator'; wrap.className='bh-translator-wrap'; wrap.setAttribute('aria-expanded','false');
    var btn=document.createElement('button'); btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML = '<svg class="bh-icn" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.03-9 9 4.03 9 9 9Z" stroke="currentColor" stroke-width="1.6"></path><path d="M3 12h18M12 3c3 3.5 3 14 0 18M6 6c3.5 2 8.5 2 12 0M6 18c3.5-2 8.5-2 12 0" stroke="currentColor" stroke-width="1.2"></path></svg><span class="bh-translator-label" data-bh-no-translate>Lang: '+(BH_INITIAL||'pl').toUpperCase()+'</span>';
    var dd=document.createElement('div'); dd.className='bh-translator-dd'; dd.setAttribute('role','menu');
    BH_SUPPORTED.forEach(function(l){ var b=document.createElement('button'); b.type='button'; b.className='bh-dd-item'; b.setAttribute('data-lang',l.code); b.innerHTML='<span>'+l.label+'</span><small>'+l.code.toUpperCase()+'</small>'; dd.appendChild(b); });
    wrap.appendChild(btn); wrap.appendChild(dd); document.body.appendChild(wrap);
    btn.addEventListener('click', function(){ wrap.setAttribute('aria-expanded', wrap.getAttribute('aria-expanded')==='true'?'false':'true'); });
    document.addEventListener('click', function(e){ if(!wrap.contains(e.target)) wrap.setAttribute('aria-expanded','false'); });
    dd.addEventListener('click', function(e){ var b=e.target.closest('.bh-dd-item'); if(!b) return; wrap.setAttribute('aria-expanded','false'); window.bhSetLanguage(b.getAttribute('data-lang')); }, {passive:true});
    dd.addEventListener('pointerup', function(e){ var b=e.target.closest('.bh-dd-item'); if(!b) return; wrap.setAttribute('aria-expanded','false'); window.bhSetLanguage(b.getAttribute('data-lang')); }, {passive:true});
  }

  // ===== Narzƒôdzia normalizacji i casing =====
  function stripDiacritics(s){
    return s.normalize('NFD').replace(/[\u0300-\u036f]/g,'');
  }
  function normKey(s){
    return stripDiacritics(String(s||'').toLowerCase())
      .replace(/\s+/g,' ')
      .replace(/[^\p{L}\p{N}\s\-]/gu,'')
      .trim();
  }
  function detectCase(sample){
    if (!sample) return 'lower';
    if (sample === sample.toUpperCase()) return 'upper';
    if (sample[0] === sample[0].toUpperCase()) return 'capitalized';
    return 'lower';
  }
  function applyCase(translated, sample){
    var mode = detectCase(sample);
    if (mode==='upper') return translated.toUpperCase();
    if (mode==='capitalized') return translated.charAt(0).toUpperCase()+translated.slice(1);
    return translated;
  }

  // ===== Wbudowane S≈ÅOWNIKI (frazy i s≈Çowa bazowe) =====
  // Uwaga: rozszerz assets/i18n/{lang}.json ‚Äì tutaj tylko trzon (UI + medyczne podstawy).
  var EMBED = {
    en: {
      // frazy d≈Çu≈ºsze (n-gramy)
      "pierwsza pomoc":"first aid","telefon alarmowy":"emergency phone","kiedy sie niepokoic":"when to worry","czerwone flagi":"red flags",
      "na recepte":"prescription","bez recepty":"over-the-counter","wezwanie pogotowia":"call an ambulance",
      "objawy i przyczyny":"symptoms and causes","leczenie i leki":"treatment and medications",
      // pojedyncze s≈Çowa
      "szukaj":"search","szpital":"hospital","apteka":"pharmacy","lekarz":"doctor","leki":"medications","objawy":"symptoms","przyczyny":"causes",
      "kontakt":"contact","informacje":"information","uwaga":"warning","numer":"number","pomoc":"help","mapa":"map","adres":"address",
      "serce":"heart","pluca":"lungs","watroba":"liver","zoladek":"stomach","nerki":"kidneys","oko":"eye","ucho":"ear","nos":"nose","usta":"mouth",
      "plecy":"back","ramie":"arm","przedramie":"forearm","dlon":"hand","kolano":"knee","udo":"thigh","stopa":"foot","glowa":"head","szyja":"neck",
      "mezczyzna":"man","kobieta":"woman","dziecko":"child","nagle":"sudden","bol":"pain","goraczka":"fever","kaszel":"cough","duszno≈õƒá":"shortness of breath","zadlawienie":"choking"
    },
    de: {
      "pierwsza pomoc":"erste hilfe","telefon alarmowy":"notruf","kiedy sie niepokoic":"wann sorgen machen","czerwone flagi":"rote flaggen",
      "na recepte":"verschreibungspflichtig","bez recepty":"rezeptfrei","wezwanie pogotowia":"krankenwagen rufen",
      "objawy i przyczyny":"symptome und ursachen","leczenie i leki":"behandlung und medikamente",
      "szukaj":"suche","szpital":"krankenhaus","apteka":"apotheke","lekarz":"arzt","leki":"medikamente","objawy":"symptome","przyczyny":"ursachen",
      "kontakt":"kontakt","informacje":"informationen","uwaga":"achtung","numer":"nummer","pomoc":"hilfe","mapa":"karte","adres":"adresse",
      "serce":"herz","pluca":"lungen","watroba":"leber","zoladek":"magen","nerki":"nieren","oko":"auge","ucho":"ohr","nos":"nase","usta":"mund",
      "plecy":"r√ºcken","ramie":"arm","przedramie":"unterarm","dlon":"hand","kolano":"knie","udo":"oberschenkel","stopa":"fu√ü","glowa":"kopf","szyja":"hals",
      "mezczyzna":"mann","kobieta":"frau","dziecko":"kind","bol":"schmerz","goraczka":"fieber","kaszel":"husten","duszno≈õƒá":"atemnot","zadlawienie":"erstickung"
    },
    uk: {
      "pierwsza pomoc":"–ø–µ—Ä—à–∞ –¥–æ–ø–æ–º–æ–≥–∞","telefon alarmowy":"–µ–∫—Å—Ç—Ä–µ–Ω–∏–π –Ω–æ–º–µ—Ä","kiedy sie niepokoic":"–∫–æ–ª–∏ –≤–∞—Ä—Ç–æ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—å","czerwone flagi":"—Ç—Ä–∏–≤–æ–∂–Ω—ñ –æ–∑–Ω–∞–∫–∏",
      "na recepte":"–∑–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º","bez recepty":"–±–µ–∑ —Ä–µ—Ü–µ–ø—Ç—É","wezwanie pogotowia":"–≤–∏–∫–ª–∏–∫ —à–≤–∏–¥–∫–æ—ó",
      "objawy i przyczyny":"—Å–∏–º–ø—Ç–æ–º–∏ —Ç–∞ –ø—Ä–∏—á–∏–Ω–∏","leczenie i leki":"–ª—ñ–∫—É–≤–∞–Ω–Ω—è —Ç–∞ –ª—ñ–∫–∏",
      "szukaj":"–ø–æ—à—É–∫","szpital":"–ª—ñ–∫–∞—Ä–Ω—è","apteka":"–∞–ø—Ç–µ–∫–∞","lekarz":"–ª—ñ–∫–∞—Ä","leki":"–ª—ñ–∫–∏","objawy":"—Å–∏–º–ø—Ç–æ–º–∏","przyczyny":"–ø—Ä–∏—á–∏–Ω–∏",
      "kontakt":"–∫–æ–Ω—Ç–∞–∫—Ç","informacje":"—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è","uwaga":"—É–≤–∞–≥–∞","numer":"–Ω–æ–º–µ—Ä","pomoc":"–¥–æ–ø–æ–º–æ–≥–∞","mapa":"–∫–∞—Ä—Ç–∞","adres":"–∞–¥—Ä–µ—Å–∞",
      "serce":"—Å–µ—Ä—Ü–µ","pluca":"–ª–µ–≥–µ–Ω—ñ","watroba":"–ø–µ—á—ñ–Ω–∫–∞","zoladek":"—à–ª—É–Ω–æ–∫","nerki":"–Ω–∏—Ä–∏","oko":"–æ–∫–æ","ucho":"–≤—É—Ö–æ","nos":"–Ω—ñ—Å","usta":"—Ä–æ—Ç",
      "plecy":"—Å–ø–∏–Ω–∞","ramie":"—Ä—É–∫–∞","przedramie":"–ø–µ—Ä–µ–¥–ø–ª—ñ—á—á—è","dlon":"–∫–∏—Å—Ç—å","kolano":"–∫–æ–ª—ñ–Ω–æ","udo":"—Å—Ç–µ–≥–Ω–æ","stopa":"—Å—Ç–æ–ø–∞","glowa":"–≥–æ–ª–æ–≤–∞","szyja":"—à–∏—è",
      "mezczyzna":"—á–æ–ª–æ–≤—ñ–∫","kobieta":"–∂—ñ–Ω–∫–∞","dziecko":"–¥–∏—Ç–∏–Ω–∞","bol":"–±—ñ–ª—å","goraczka":"–≥–∞—Ä—è—á–∫–∞","kaszel":"–∫–∞—à–µ–ª—å","duszno≈õƒá":"–∑–∞–¥–∏—à–∫–∞","zadlawienie":"—É–¥—É—à–µ–Ω–Ω—è"
    }
  };

  // ===== Cache oryginalnych tekst√≥w =====
  var originalTextMap = new WeakMap(); // node -> oryginalny string (PL)
  var currentLang = document.documentElement.getAttribute('data-bh-current-lang') || BH_DEFAULT;

  // ===== Loader s≈Çownika (scalenie pliku i wbudowanego) =====
  function loadDict(lang){
    return new Promise(function(resolve){
      if (lang===BH_DEFAULT) return resolve({phr: {}, tok: {}});
      fetch('assets/i18n/'+lang+'.json', {cache:'no-store'}).then(function(r){
        if(!r.ok) throw 0; return r.json();
      }).then(function(fileJson){
        resolve(buildDict(lang, fileJson||{}));
      }).catch(function(){
        resolve(buildDict(lang, {}));
      });
    });
  }
  function buildDict(lang, fileJson){
    // Wej≈õcie plikowe mo≈ºe mieƒá formƒô { "PL fraza": "TL", ... }
    var base = EMBED[lang] || {};
    var merge = Object.assign({}, base, fileJson);
    var phr = {}; // frazy (n-gramy: 5..2)
    var tok = {}; // tokeny (1 s≈Çowo)
    Object.keys(merge).forEach(function(pl){
      var key = normKey(pl);
      if (!key) return;
      if (key.indexOf(' ')>0) phr[key] = merge[pl];
      else tok[key] = merge[pl];
    });
    return { phr: phr, tok: tok };
  }

  // ===== T≈Çumaczenie jednego ciƒÖgu znak√≥w =====
  function translateStringFromPolish(str, dict){
    var src = String(str||'');
    var norm = normKey(src);
    if (!norm) return src;

    // 1) Najpierw pe≈Çne dopasowanie frazy
    if (dict.phr[norm]) {
      return applyCase(dict.phr[norm], src);
    }

    // 2) Tokenizacja + n-gramy wewnƒÖtrz zdania (5..2 s≈Ç√≥w)
    var words = norm.split(' ');
    var originalWords = src.split(/(\s+)/); // zachowaj spacje
    // Zbuduj mapƒô indeks√≥w s≈Ç√≥w (bez spacji)
    var pure = src.match(/\S+|\s+/g) || [];
    // Stw√≥rz kopiƒô do podmian
    var out = src;

    // Priorytet: d≈Çu≈ºsze n-gramy -> kr√≥tsze
    var maxN = Math.min(5, words.length);
    for (var n=maxN; n>=2; n--){
      for (var i=0; i<=words.length-n; i++){
        var slice = words.slice(i, i+n).join(' ');
        if (dict.phr[slice]){
          // znajd≈∫ oryginalny fragment przybli≈ºony (regu≈Ça na znaki diaktryczne i interpunkcjƒô)
          var regex = new RegExp('\\b' + words.slice(i, i+n).map(function(w){
            var w2 = stripDiacritics(w).replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
            return w2;
          }).join('\\s+') + '\\b', 'i');
          out = out.replace(regex, function(m){ return applyCase(dict.phr[slice], m); });
        }
      }
    }

    // 3) Pojedyncze s≈Çowa
    out = out.replace(/\b([A-Za-z√Ä-≈æƒÑƒÖƒÜƒáƒòƒô≈Å≈Ç≈É≈Ñ√ì√≥≈ö≈õ≈π≈∫≈ª≈º\-]+)\b/g, function(m){
      var key = normKey(m);
      var t = dict.tok[key];
      return t ? applyCase(t, m) : m;
    });

    return out;
  }

  // ===== Przej≈õcie po drzewie: TreeWalker (wƒôz≈Çy tekstowe) =====
  function shouldSkip(node){
    if (!node) return true;
    if (node.nodeType !== 3) return true; // text
    var p = node.parentElement;
    if (!p) return true;
    if (p.closest('#bh-translator,[data-bh-no-translate]')) return true;
    if (['SCRIPT','STYLE','CODE','PRE','TEXTAREA','NOSCRIPT','SVG'].includes(p.tagName)) return true;
    return false;
  }

  function translateDocument(dict){
    var walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null);
    var nodes = [];
    while (walker.nextNode()) nodes.push(walker.currentNode);

    nodes.forEach(function(textNode){
      if (shouldSkip(textNode)) return;

      // zapisz orygina≈Ç tylko raz (PL baseline)
      if (!originalTextMap.has(textNode)) {
        originalTextMap.set(textNode, textNode.nodeValue);
      }
      var baseline = originalTextMap.get(textNode);

      if (currentLang === 'pl') {
        // powr√≥t do PL
        if (textNode.nodeValue !== baseline) textNode.nodeValue = baseline;
        return;
      }
      // t≈Çumacz z baseline, nie z aktualnej warto≈õci (idempotencja)
      var translated = translateStringFromPolish(baseline, dict);
      if (translated && translated !== textNode.nodeValue) {
        textNode.nodeValue = translated;
      }
    });

    // Atrybuty typu placeholder/title/aria-label ‚Äì tylko je≈õli by≈Çy zdefiniowane
    document.querySelectorAll('[placeholder],[title],[aria-label]').forEach(function(el){
      if (el.closest('#bh-translator,[data-bh-no-translate]')) return;

      ['placeholder','title','aria-label'].forEach(function(attr){
        var val = el.getAttribute(attr);
        if (!val) return;
        var key = 'bh__orig__'+attr;
        if (!el.hasAttribute(key)) el.setAttribute(key, val); // baseline
        var baseline = el.getAttribute(key);
        if (currentLang === 'pl') {
          if (el.getAttribute(attr)!==baseline) el.setAttribute(attr, baseline);
        } else {
          var tr = translateStringFromPolish(baseline, dict);
          if (tr && tr !== el.getAttribute(attr)) el.setAttribute(attr, tr);
        }
      });
    });
  }

  var activeDict = { phr:{}, tok:{} };

  // ===== API globalne =====
  window.bhSetLanguage = function(lang){
    if (!BH_SUPPORTED.some(function(l){ return l.code===lang; })) return;
    if (lang === currentLang) return;

    localStorage.setItem(BH_STORE_KEY, lang);
    currentLang = lang;
    document.documentElement.setAttribute('data-bh-current-lang', lang);

    var label = document.querySelector('#bh-translator .bh-translator-label');
    if (label) label.textContent = 'Lang: ' + lang.toUpperCase();

    if (lang === 'pl'){
      translateDocument(activeDict); // przywr√≥ƒá baseline
      return;
    }
    loadDict(lang).then(function(dict){
      activeDict = dict;
      translateDocument(activeDict);
    });
  };

  // ===== Inicjalizacja =====
  function init(){
    ensureUI();
    // ustaw label zgodnie z zapisem
    var saved = localStorage.getItem(BH_STORE_KEY);
    var label = document.querySelector('#bh-translator .bh-translator-label');
    if (label && saved) label.textContent = 'Lang: ' + saved.toUpperCase();

    if (BH_INITIAL !== 'pl') {
      // ≈Çaduj s≈Çownik i t≈Çumacz od razu
      currentLang = BH_INITIAL;
      document.documentElement.setAttribute('data-bh-current-lang', currentLang);
      loadDict(currentLang).then(function(dict){
        activeDict = dict;
        translateDocument(activeDict);
      });
    } else {
      currentLang = 'pl';
      document.documentElement.setAttribute('data-bh-current-lang', 'pl');
    }

    // Obserwator dla dynamicznego DOM
    var mo = new MutationObserver(function(muts){
      if (currentLang==='pl') return;
      var need=false;
      for (var i=0;i<muts.length;i++){
        if (muts[i].type==='childList' && muts[i].addedNodes.length){ need=true; break; }
      }
      if (need) translateDocument(activeDict);
    });
    mo.observe(document.body, {childList:true, subtree:true});
  }
  if (document.readyState==='loading') document.addEventListener('DOMContentLoaded', init); else init();
})();
</script>
<!-- END bh-patch:translator-fix-v3 -->
<!-- BEGIN bh-patch:translator-fix-v4 -->
<script>
(function(){
  if (window.__bhPatchTranslatorFixV4__) return;
  window.__bhPatchTranslatorFixV4__ = 1;

  // ---------- KONFIG ----------
  var BH_SUPPORTED = [
    { code:'pl', label:'Polski' },
    { code:'en', label:'English' },
    { code:'de', label:'Deutsch' },
    { code:'uk', label:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞' }
  ];
  var STORE = 'bh-lang';
  var SESSION_LOCK = 'bh-lang-session-lock'; // aby nie nadpisywaƒá wyboru w obrƒôbie sesji
  var DEFAULT = 'pl';

  // ---------- WY≈ÅƒÑCZ GOOGLE TRANSLATE UI ----------
  (function antiGT(){
    if (!document.querySelector('meta[name="google"][content*="notranslate"]')) {
      var m=document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
    }
    var s=document.createElement('style'); s.textContent = `
.goog-te-banner-frame,.goog-te-gadget,.goog-tooltip,.goog-te-balloon-frame,#google_translate_element,
.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd{display:none!important;visibility:hidden!important}
body{top:0!important}`;
    s.setAttribute('data-bh-style','anti-google-translate'); document.head.appendChild(s);
    try{ localStorage.removeItem('googtrans'); sessionStorage.removeItem('googtrans'); }catch(_){}
    window.googleTranslateElementInit = function(){};
  })();

  // ---------- DICTIONARIES (rdze≈Ñ UI + medyczne podstawy; rozszerz plikami assets/i18n/{lang}.json) ----------
  function stripDiacritics(s){ return String(s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,''); }
  function keyNorm(s){ return stripDiacritics(String(s||'').toLowerCase()).replace(/[^\p{L}\p{N}\s\-]/gu,'').replace(/\s+/g,' ').trim(); }
  function caseOf(sample){ if(!sample) return 'lower'; if(sample===sample.toUpperCase()) return 'upper'; if(sample[0]===sample[0].toUpperCase()) return 'cap'; return 'lower'; }
  function applyCase(t,s){ var k=caseOf(s); if(k==='upper') return t.toUpperCase(); if(k==='cap') return t.charAt(0).toUpperCase()+t.slice(1); return t; }

  var EMBED = {
    en: {
      // FRAZY (n-gramy)
      "pierwsza pomoc": "first aid",
      "telefon alarmowy": "emergency phone",
      "kiedy sie niepokoic": "when to worry",
      "czerwone flagi": "red flags",
      "na recepte": "prescription",
      "bez recepty": "over-the-counter",
      "objawy i przyczyny": "symptoms and causes",
      "leczenie i leki": "treatment and medications",
      "masz objawy alarmowe nie zwlekaj": "red-flag symptoms? do not wait",
      "zadzwon 112": "call 112",
      "ryzyko niskie": "low risk",
      "pokaz wiecej": "show more",
      "zaznacz": "select",
      "zobacz podpowiedzi": "see suggestions",
      "rekomendacje profilaktyka": "recommendations / prevention",
      "rekomendacje / profilaktyka": "recommendations / prevention",
      "leki otc": "otc medications",
      "leki na recepte": "prescription medications",
      // S≈ÅOWA
      "szukaj":"search","objawy":"symptoms","przyczyny":"causes","leki":"medications","lekarz":"doctor",
      "apteka":"pharmacy","szpital":"hospital","kontakt":"contact","informacje":"information",
      "glowa":"head","szyja":"neck","gardlo":"throat","oko":"eye","ucho":"ear","nos":"nose","usta":"mouth",
      "plecy":"back","ramie":"arm","przedramie":"forearm","dlon":"hand","bark":"shoulder","klatka":"chest",
      "brzuch":"stomach","biodro":"hip","udo":"thigh","kolano":"knee","lydka":"calf","stopa":"foot",
      "mezczyzna":"man","kobieta":"woman","dziecko":"child",
      "bor": "pain","bol": "pain","goraczka":"fever","kaszel":"cough","duszno≈õƒá":"shortness of breath","zadlawienie":"choking"
    },
    de: {
      "pierwsza pomoc":"erste hilfe","telefon alarmowy":"notruf","kiedy sie niepokoic":"wann sorgen machen","czerwone flagi":"rote flaggen",
      "na recepte":"verschreibungspflichtig","bez recepty":"rezeptfrei","objawy i przyczyny":"symptome und ursachen","leczenie i leki":"behandlung und medikamente",
      "masz objawy alarmowe nie zwlekaj":"alarm-symptome? nicht warten","zadzwon 112":"ruf 112","ryzyko niskie":"geringes risiko","pokaz wiecej":"mehr anzeigen",
      "zaznacz":"ausw√§hlen","zobacz podpowiedzi":"vorschl√§ge ansehen","rekomendacje / profilaktyka":"empfehlungen / pr√§vention",
      "szukaj":"suche","objawy":"symptome","przyczyny":"ursachen","leki":"medikamente","lekarz":"arzt",
      "apteka":"apotheke","szpital":"krankenhaus","kontakt":"kontakt","informacje":"informationen",
      "glowa":"kopf","szyja":"hals","gardlo":"rachen","oko":"auge","ucho":"ohr","nos":"nase","usta":"mund",
      "plecy":"r√ºcken","ramie":"arm","przedramie":"unterarm","dlon":"hand","bark":"schulter","klatka":"brust",
      "brzuch":"magen","biodro":"h√ºfte","udo":"oberschenkel","kolano":"knie","lydka":"wade","stopa":"fu√ü",
      "mezczyzna":"mann","kobieta":"frau","dziecko":"kind","bol":"schmerz","goraczka":"fieber","kaszel":"husten","duszno≈õƒá":"atemnot","zadlawienie":"erstickung"
    },
    uk: {
      "pierwsza pomoc":"–ø–µ—Ä—à–∞ –¥–æ–ø–æ–º–æ–≥–∞","telefon alarmowy":"–µ–∫—Å—Ç—Ä–µ–Ω–∏–π –Ω–æ–º–µ—Ä","kiedy sie niepokoic":"–∫–æ–ª–∏ –≤–∞—Ä—Ç–æ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—è","czerwone flagi":"—Ç—Ä–∏–≤–æ–∂–Ω—ñ –æ–∑–Ω–∞–∫–∏",
      "na recepte":"–∑–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º","bez recepty":"–±–µ–∑ —Ä–µ—Ü–µ–ø—Ç—É","objawy i przyczyny":"—Å–∏–º–ø—Ç–æ–º–∏ —Ç–∞ –ø—Ä–∏—á–∏–Ω–∏","leczenie i leki":"–ª—ñ–∫—É–≤–∞–Ω–Ω—è —Ç–∞ –ª—ñ–∫–∏",
      "masz objawy alarmowe nie zwlekaj":"—Ç—Ä–∏–≤–æ–∂–Ω—ñ —Å–∏–º–ø—Ç–æ–º–∏? –Ω–µ –∑–≤–æ–ª—ñ–∫–∞–π","zadzwon 112":"–∑–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–π 112","ryzyko niskie":"–Ω–∏–∑—å–∫–∏–π —Ä–∏–∑–∏–∫","pokaz wiecej":"–ø–æ–∫–∞–∑–∞—Ç–∏ –±—ñ–ª—å—à–µ",
      "zaznacz":"–ø–æ–∑–Ω–∞—á","zobacz podpowiedzi":"–ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—ñ–¥–∫–∞–∑–∫–∏","rekomendacje / profilaktyka":"—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó / –ø—Ä–æ—Ñ—ñ–ª–∞–∫—Ç–∏–∫–∞",
      "szukaj":"–ø–æ—à—É–∫","objawy":"—Å–∏–º–ø—Ç–æ–º–∏","przyczyny":"–ø—Ä–∏—á–∏–Ω–∏","leki":"–ª—ñ–∫–∏","lekarz":"–ª—ñ–∫–∞—Ä",
      "apteka":"–∞–ø—Ç–µ–∫–∞","szpital":"–ª—ñ–∫–∞—Ä–Ω—è","kontakt":"–∫–æ–Ω—Ç–∞–∫—Ç","informacje":"—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è",
      "glowa":"–≥–æ–ª–æ–≤–∞","szyja":"—à–∏—è","gardlo":"–≥–æ—Ä–ª–æ","oko":"–æ–∫–æ","ucho":"–≤—É—Ö–æ","nos":"–Ω—ñ—Å","usta":"—Ä–æ—Ç",
      "plecy":"—Å–ø–∏–Ω–∞","ramie":"—Ä—É–∫–∞","przedramie":"–ø–µ—Ä–µ–¥–ø–ª—ñ—á—á—è","dlon":"–∫–∏—Å—Ç—å","bark":"–ø–ª–µ—á–µ","klatka":"–≥—Ä—É–¥–∏",
      "brzuch":"–∂–∏–≤—ñ—Ç","biodro":"—Å—Ç–µ–≥–Ω–æ","udo":"—Å—Ç–µ–≥–Ω–æ","kolano":"–∫–æ–ª—ñ–Ω–æ","lydka":"–ª–∏—Ç–∫–∞","stopa":"—Å—Ç—É–ø–Ω—è",
      "mezczyzna":"—á–æ–ª–æ–≤—ñ–∫","kobieta":"–∂—ñ–Ω–∫–∞","dziecko":"–¥–∏—Ç–∏–Ω–∞","bol":"–±—ñ–ª—å","goraczka":"–≥–∞—Ä—è—á–∫–∞","kaszel":"–∫–∞—à–µ–ª—å","duszno≈õƒá":"–∑–∞–¥–∏—à–∫–∞","zadlawienie":"—É–¥—É—à–µ–Ω–Ω—è"
    }
  };

  function buildDict(lang, fileJson){
    var merged = Object.assign({}, EMBED[lang]||{}, fileJson||{});
    var phr={}, tok={};
    Object.keys(merged).forEach(function(pl){
      var k=keyNorm(pl); if(!k) return;
      if (k.indexOf(' ')>0) phr[k]=merged[pl]; else tok[k]=merged[pl];
    });
    return {phr:phr, tok:tok};
  }

  function loadDict(lang){
    return new Promise(function(resolve){
      if (lang==='pl') return resolve({phr:{},tok:{}});
      fetch('assets/i18n/'+lang+'.json', {cache:'no-store'})
       .then(function(r){ if(!r.ok) throw 0; return r.json(); })
       .then(function(j){ resolve(buildDict(lang, j)); })
       .catch(function(){ resolve(buildDict(lang, {})); });
    });
  }

  // ---------- UI (je≈õli brak) ----------
  function ensureUI(){
    if (document.getElementById('bh-translator')) return;
    var st=document.createElement('style'); st.textContent=`
:root{--bh-accent:#6c5ce7;--bh-bg:rgba(255,255,255,.75);--bh-shadow:0 8px 20px rgba(0,0,0,.12);--bh-radius:16px;--bh-blur:saturate(1.2) blur(6px);--bh-z:9999;--bh-font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans","Helvetica Neue",sans-serif}
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:var(--bh-z);font-family:var(--bh-font)}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:16px;box-shadow:var(--bh-shadow);cursor:pointer;color:#1f2937}
.bh-translator-btn:hover{transform:translateY(-1px)}
.bh-translator-label{font-size:14px;font-weight:600}
.bh-translator-dd{position:absolute;right:0;margin-top:8px;background:var(--bh-bg);backdrop-filter:var(--bh-blur);border:1px solid rgba(108,92,231,.25);border-radius:14px;box-shadow:var(--bh-shadow);min-width:200px;padding:8px;display:none}
.bh-translator-wrap[aria-expanded="true"] .bh-translator-dd{display:block}
.bh-dd-item{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;border-radius:10px;background:transparent;border:0;cursor:pointer;color:#111827;font-size:14px;font-weight:600}
.bh-dd-item:hover{background:rgba(108,92,231,.08)}`; st.setAttribute('data-bh-style','translator-core'); document.head.appendChild(st);

    var wrap=document.createElement('div'); wrap.id='bh-translator'; wrap.className='bh-translator-wrap'; wrap.setAttribute('aria-expanded','false');
    var btn=document.createElement('button'); btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML = '<span class="bh-translator-label" data-bh-no-translate>Lang: PL</span>';
    var dd=document.createElement('div'); dd.className='bh-translator-dd'; dd.setAttribute('role','menu');
    BH_SUPPORTED.forEach(function(l){ var b=document.createElement('button'); b.type='button'; b.className='bh-dd-item'; b.setAttribute('data-lang',l.code); b.innerHTML='<span>'+l.label+'</span><small>'+l.code.toUpperCase()+'</small>'; dd.appendChild(b); });
    wrap.appendChild(btn); wrap.appendChild(dd); document.body.appendChild(wrap);

    btn.addEventListener('click', function(){ wrap.setAttribute('aria-expanded', wrap.getAttribute('aria-expanded')==='true'?'false':'true'); });
    document.addEventListener('click', function(e){ if(!wrap.contains(e.target)) wrap.setAttribute('aria-expanded','false'); });
    dd.addEventListener('click', function(e){ var b=e.target.closest('.bh-dd-item'); if(!b) return; wrap.setAttribute('aria-expanded','false'); window.bhSetLanguage(b.getAttribute('data-lang')); }, {passive:true});
    dd.addEventListener('pointerup', function(e){ var b=e.target.closest('.bh-dd-item'); if(!b) return; wrap.setAttribute('aria-expanded','false'); window.bhSetLanguage(b.getAttribute('data-lang')); }, {passive:true});
  }

  // ---------- MECHANIKA T≈ÅUMACZE≈É ----------
  var originalText = new WeakMap(); // textNode -> baseline PL
  var currentLang = 'pl';
  var dictActive = {phr:{}, tok:{}};

  function translateStringPL(src, dict){
    var s = String(src||'');
    var norm = keyNorm(s);
    if (!norm) return s;

    // pe≈Çne frazy
    if (dict.phr[norm]) return applyCase(dict.phr[norm], s);

    // n-gramy 5..2
    var words = norm.split(' ');
    var out = s;
    var maxN = Math.min(5, words.length);
    for (var n=maxN; n>=2; n--){
      for (var i=0; i<=words.length-n; i++){
        var slice = words.slice(i, i+n).join(' ');
        if (dict.phr[slice]){
          var re = new RegExp('\\b' + words.slice(i, i+n).map(function(w){ return stripDiacritics(w).replace(/[.*+?^${}()|[\]\\]/g,'\\$&'); }).join('\\s+') + '\\b','i');
          out = out.replace(re, function(m){ return applyCase(dict.phr[slice], m); });
        }
      }
    }
    // s≈Çowa
    out = out.replace(/\b([A-Za-z√Ä-≈æƒÑƒÖƒÜƒáƒòƒô≈Å≈Ç≈É≈Ñ√ì√≥≈ö≈õ≈π≈∫≈ª≈º\-]+)\b/g, function(m){
      var k=keyNorm(m); var t=dict.tok[k]; return t?applyCase(t,m):m;
    });
    return out;
  }

  function shouldSkipTextNode(node){
    if (!node || node.nodeType!==3) return true;
    var p=node.parentElement; if(!p) return true;
    if (p.closest('#bh-translator,[data-bh-no-translate]')) return true;
    if (['SCRIPT','STYLE','CODE','PRE','TEXTAREA','NOSCRIPT','SVG'].includes(p.tagName)) return true;
    return false;
  }

  function applyTranslation(){
    var tw=document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null);
    var nodes=[]; while(tw.nextNode()) nodes.push(tw.currentNode);

    nodes.forEach(function(tn){
      if (shouldSkipTextNode(tn)) return;

      // baseline PL zapisujemy tylko, gdy nie istnieje
      if (!originalText.has(tn)) originalText.set(tn, tn.nodeValue);

      var baseline = originalText.get(tn);
      if (currentLang==='pl') {
        if (tn.nodeValue!==baseline) tn.nodeValue = baseline;
      } else {
        var tr = translateStringPL(baseline, dictActive);
        if (tr && tr!==tn.nodeValue) tn.nodeValue = tr;
      }
    });

    // atrybuty
    document.querySelectorAll('[placeholder],[title],[aria-label]').forEach(function(el){
      if (el.closest('#bh-translator,[data-bh-no-translate]')) return;
      ['placeholder','title','aria-label'].forEach(function(attr){
        var v = el.getAttribute(attr); if (v==null) return;
        var key = 'data-bh-orig-'+attr;
        if (!el.hasAttribute(key)) el.setAttribute(key, v);
        var base = el.getAttribute(key);
        if (currentLang==='pl') el.setAttribute(attr, base);
        else el.setAttribute(attr, translateStringPL(base, dictActive));
      });
    });
  }

  function installObserver(){
    var mo=new MutationObserver(function(muts){
      if (currentLang==='pl') return;
      var changed=false;
      for (var i=0;i<muts.length;i++){
        if (muts[i].type==='childList' && muts[i].addedNodes.length){ changed=true; break; }
      }
      if (changed) applyTranslation();
    });
    mo.observe(document.body, {childList:true, subtree:true});
  }

  // ---------- API ----------
  window.bhSetLanguage = function(lang){
    if (!BH_SUPPORTED.some(function(l){return l.code===lang;})) return;
    currentLang = lang;
    localStorage.setItem(STORE, lang);
    sessionStorage.setItem(SESSION_LOCK, '1'); // u≈ºytkownik dokona≈Ç wyboru w tej sesji
    var label=document.querySelector('#bh-translator .bh-translator-label'); if (label) label.textContent='Lang: '+lang.toUpperCase();

    if (lang==='pl'){ applyTranslation(); return; }
    loadDict(lang).then(function(d){ dictActive=d; applyTranslation(); });
  };

  // ---------- START (WYMUSZENIE PL NA WEJ≈öCIU) ----------
  function getQueryLang(){
    var m=location.search.match(/[?&]lang=([a-z]{2})/i);
    return m ? m[1].toLowerCase() : null;
  }

  function init(){
    ensureUI();

    // Je≈õli przychodzimy ‚Äûz zewnƒÖtrz‚Äù i nie ma blokady sesji ‚Äì start w PL (reset starego wyboru).
    var qLang = getQueryLang();
    var sessionLocked = sessionStorage.getItem(SESSION_LOCK)==='1';
    if (!sessionLocked && !qLang) {
      try{ localStorage.setItem(STORE, 'pl'); }catch(_){}
      currentLang = 'pl';
    } else {
      currentLang = (qLang || localStorage.getItem(STORE) || 'pl');
    }

    // Ustaw label
    var lbl=document.querySelector('#bh-translator .bh-translator-label');
    if (lbl) lbl.textContent='Lang: '+(currentLang||'pl').toUpperCase();

    if (currentLang==='pl'){ applyTranslation(); } 
    else { loadDict(currentLang).then(function(d){ dictActive=d; applyTranslation(); }); }

    installObserver();
  }

  if (document.readyState==='loading') document.addEventListener('DOMContentLoaded', init); else init();

})();
</script>
<!-- END bh-patch:translator-fix-v4 -->
<!-- BEGIN bh-patch:translator-final-combo -->
<script>
(function(){
  if (window.__bhPatchTranslatorFinalCombo__) return;
  window.__bhPatchTranslatorFinalCombo__ = 1;

  /* ===== ANTY GOOGLE ===== */
  (function(){
    if (!document.querySelector('meta[name="google"][content*="notranslate"]')) {
      var m=document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
    }
    var s=document.createElement('style'); s.textContent=`
.goog-te-banner-frame,.goog-te-gadget,.goog-tooltip,.goog-te-balloon-frame,#google_translate_element,
.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd{display:none!important;visibility:hidden!important}
body{top:0!important}`;
    s.setAttribute('data-bh-style','anti-google-translate'); document.head.appendChild(s);
    try{localStorage.removeItem('googtrans');sessionStorage.removeItem('googtrans');}catch(_){}
    window.googleTranslateElementInit=function(){};
  })();

  /* ===== KONFIG ===== */
  var STORE_LANG='bh-lang', STORE_SAFE='bh-safe', DEFAULT='pl';
  var SUPPORTED=['pl','en','de','uk'];

  /* ===== HELPERY ===== */
  function diac(s){return String(s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'');}
  function norm(s){return diac(String(s||'').toLowerCase()).replace(/[^\p{L}\p{N}\s\-]/gu,'').replace(/\s+/g,' ').trim();}
  function caseOf(x){if(!x)return'l'; if(x===x.toUpperCase())return'u'; if(x[0]===x[0].toUpperCase())return'c'; return'l';}
  function keepCase(t,s){var k=caseOf(s); return k==='u'?t.toUpperCase():k==='c'?t.charAt(0).toUpperCase()+t.slice(1):t;}

  /* ===== S≈ÅOWNIK EN<->PL ===== */
  var PAIRS_EN_PL={
    "first aid":"pierwsza pomoc","emergency phone":"telefon alarmowy","when to worry":"kiedy siƒô niepokoiƒá","red flags":"czerwone flagi",
    "low risk":"ryzyko niskie","show more":"poka≈º wiƒôcej","select":"zaznacz","see suggestions":"zobacz podpowiedzi",
    "recommendations / prevention":"rekomendacje / profilaktyka","otc medications":"leki otc","prescription medications":"leki na receptƒô",
    "symptoms and causes":"objawy i przyczyny","treatment and medications":"leczenie i leki",
    "red-flag symptoms? do not wait":"masz objawy alarmowe? nie zwlekaj","call 112":"zadzwo≈Ñ 112",
    "search":"szukaj","symptoms":"objawy","causes":"przyczyny","medications":"leki","doctor":"lekarz",
    "pharmacy":"apteka","hospital":"szpital","contact":"kontakt","information":"informacje",
    "head":"g≈Çowa","neck":"szyja","throat":"gard≈Ço","eye":"oko","ear":"ucho","nose":"nos","mouth":"usta",
    "back":"plecy","shoulder":"bark","chest":"klatka","arm":"ramiƒô","forearm":"przedramiƒô","hand":"d≈Ço≈Ñ",
    "stomach":"brzuch","hip":"biodro","thigh":"udo","knee":"kolano","calf":"≈Çydka","foot":"stopa",
    "man":"mƒô≈ºczyzna","woman":"kobieta","child":"dziecko",
    "pain":"b√≥l","fever":"gorƒÖczka","cough":"kaszel","shortness of breath":"duszno≈õƒá","choking":"zad≈Çawienie"
  };
  function buildBi(){
    var en2pl_phr={},en2pl_tok={},pl2en_phr={},pl2en_tok={};
    Object.keys(PAIRS_EN_PL).forEach(function(en){
      var pl=PAIRS_EN_PL[en], ken=norm(en), kpl=norm(pl); if(!ken||!kpl)return;
      (ken.indexOf(' ')>0?en2pl_phr:en2pl_tok)[ken]=pl;
      (kpl.indexOf(' ')>0?pl2en_phr:pl2en_tok)[kpl]=en;
    });
    return {en2pl:{phr:en2pl_phr,tok:en2pl_tok},pl2en:{phr:pl2en_phr,tok:pl2en_tok}};
  }
  var BIDICT=buildBi();

  /* ===== UI ===== */
  function ensureUI(){
    if (document.getElementById('bh-translator')) return;
    if (isSafeMode()) return; // w safe ukrywamy
    var css=document.createElement('style');
    css.textContent=`
.bh-translator-wrap{position:fixed;top:12px;right:12px;z-index:9999;font-family:ui-sans-serif,system-ui}
.bh-translator-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;background:rgba(255,255,255,.72);backdrop-filter:saturate(1.2) blur(6px);border:1px solid rgba(108,92,231,.25);border-radius:16px;box-shadow:0 8px 20px rgba(0,0,0,.12);cursor:pointer;color:#1f2937;font-weight:600}`;
    document.head.appendChild(css);
    var wrap=document.createElement('div'); wrap.id='bh-translator'; wrap.className='bh-translator-wrap';
    var btn=document.createElement('button'); btn.type='button'; btn.className='bh-translator-btn'; btn.setAttribute('aria-label','Language switcher');
    btn.innerHTML='<span class="bh-translator-label" data-bh-no-translate>Lang: PL</span>';
    wrap.appendChild(btn); document.body.appendChild(wrap);
    btn.addEventListener('click',function(){
      var cur=(localStorage.getItem(STORE_LANG)||'pl'); var next=cur==='pl'?'en':'pl';
      window.bhSetLanguage(next);
    });
  }

  /* ===== T≈ÅUMACZENIE ===== */
  var baseline=new WeakMap();
  function shouldSkip(tn){
    if(!tn||tn.nodeType!==3)return true;
    var p=tn.parentElement;if(!p)return true;
    if(p.closest('#bh-translator,[data-bh-no-translate]'))return true;
    if(['SCRIPT','STYLE','CODE','PRE','TEXTAREA','NOSCRIPT','SVG'].includes(p.tagName))return true;
    return false;
  }
  function replaceByDict(str,dict){
    var out=String(str||'');
    Object.keys(dict.phr).sort((a,b)=>b.length-a.length).forEach(function(k){
      var re=new RegExp('\\b'+k.split(' ').map(function(w){return diac(w).replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}).join('\\s+')+'\\b','ig');
      out=out.replace(re,function(m){return keepCase(dict.phr[k],m);});
    });
    out=out.replace(/\b([A-Za-z√Ä-≈æƒÑƒÖƒÜƒáƒòƒô≈Å≈Ç≈É≈Ñ√ì√≥≈ö≈õ≈π≈∫≈ª≈º\-]+)\b/g,function(m){
      var key=norm(m),t=dict.tok[key];return t?keepCase(t,m):m;
    });
    return out;
  }
  function translateAll(target){
    var dict=target==='pl'?BIDICT.en2pl:BIDICT.pl2en;
    var tw=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);
    var nodes=[];while(tw.nextNode())nodes.push(tw.currentNode);
    nodes.forEach(function(tn){
      if(shouldSkip(tn))return;
      if(!baseline.has(tn))baseline.set(tn,tn.nodeValue);
      var base=baseline.get(tn)||tn.nodeValue;
      var val=(target==='pl')?replaceByDict(base,BIDICT.en2pl):replaceByDict(base,BIDICT.pl2en);
      if(tn.nodeValue!==val)tn.nodeValue=val;
    });
    document.querySelectorAll('[placeholder],[title],[aria-label]').forEach(function(el){
      if(el.closest('#bh-translator,[data-bh-no-translate]'))return;
      ['placeholder','title','aria-label'].forEach(function(attr){
        var v=el.getAttribute(attr);if(v==null)return;
        var key='data-bh-orig-'+attr;if(!el.hasAttribute(key))el.setAttribute(key,v);
        var base=el.getAttribute(key);
        var newVal=(target==='pl')?replaceByDict(base,BIDICT.en2pl):replaceByDict(base,BIDICT.pl2en);
        el.setAttribute(attr,newVal);
      });
    });
  }

  /* ===== API ===== */
  window.bhSetLanguage=function(lang){
    if(!SUPPORTED.includes(lang))lang='pl';
    localStorage.setItem(STORE_LANG,lang);
    var lbl=document.querySelector('.bh-translator-label');if(lbl)lbl.textContent='Lang: '+lang.toUpperCase();
    translateAll(lang);
  };

  /* ===== TRYB SAFE ===== */
  function isSafeMode(){
    return /[?&]bh-safe=1/.test(location.search)||localStorage.getItem(STORE_SAFE)==='1';
  }

  /* ===== START ===== */
  function init(){
    localStorage.setItem(STORE_LANG,'pl'); // zawsze start w PL
    ensureUI();
    var lbl=document.querySelector('.bh-translator-label');if(lbl)lbl.textContent='Lang: PL';
    translateAll('pl');
    if(isSafeMode()){
      var ex=document.getElementById('bh-translator');if(ex)ex.style.display='none';
      var mo=new MutationObserver(function(){translateAll('pl');});
      mo.observe(document.body,{childList:true,subtree:true,characterData:true});
    }
  }
  if(document.readyState==='loading')document.addEventListener('DOMContentLoaded',init);else init();
})();
</script>
<!-- END bh-patch:translator-final-combo -->
<!-- BEGIN bh-patch:translator-panic-safe-pl -->
<script>
(function(){
  if (window.__bhPatchTranslatorPanicSafePL__) return;
  window.__bhPatchTranslatorPanicSafePL__ = 1;

  /* 0) Twarde ustawienia PL + wyciszenie innych t≈Çumaczy/bander√≥w */
  try {
    localStorage.setItem('bh-safe','1');
    localStorage.setItem('bh-lang','pl');
    sessionStorage.setItem('bh-safe','1');
    localStorage.removeItem('googtrans'); sessionStorage.removeItem('googtrans');
  } catch(_) {}
  // Meta notranslate
  if (!document.querySelector('meta[name="google"][content*="notranslate"]')) {
    var m=document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
  }
  // CSS: ukryj wszelkie nasze/obce wid≈ºety t≈Çumacza
  var css = document.createElement('style');
  css.textContent = `
#bh-translator,.bh-translator-wrap,.goog-te-banner-frame,.goog-te-gadget,#google_translate_element,
.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd { display:none !important; visibility:hidden !important; }
body { top:0 !important; }`;
  document.head.appendChild(css);
  // Zneutralizuj ewentualny init Google
  window.googleTranslateElementInit = function(){};

  /* 1) S≈Çownik EN -> PL (rdze≈Ñ + czƒôsto widoczne s≈Çowa z Twoich ekran√≥w) */
  var MAP_EN_PL = {
    // FRAZY
    "first aid":"pierwsza pomoc","emergency phone":"telefon alarmowy","when to worry":"kiedy siƒô niepokoiƒá","red flags":"czerwone flagi",
    "low risk":"ryzyko niskie","show more":"poka≈º wiƒôcej","select":"zaznacz","see suggestions":"zobacz podpowiedzi",
    "recommendations / prevention":"rekomendacje / profilaktyka","otc medications":"leki otc","prescription medications":"leki na receptƒô",
    "symptoms and causes":"objawy i przyczyny","treatment and medications":"leczenie i leki",
    "red-flag symptoms? do not wait":"masz objawy alarmowe? nie zwlekaj","call 112":"zadzwo≈Ñ 112",
    "woman ‚Äî choose body part":"kobieta ‚Äî wybierz czƒô≈õƒá cia≈Ça","man ‚Äî choose body part":"mƒô≈ºczyzna ‚Äî wybierz czƒô≈õƒá cia≈Ça","child ‚Äî choose body part":"dziecko ‚Äî wybierz czƒô≈õƒá cia≈Ça",
    // S≈ÅOWA
    "search":"szukaj","symptoms":"objawy","causes":"przyczyny","medications":"leki","doctor":"lekarz",
    "pharmacy":"apteka","hospital":"szpital","contact":"kontakt","information":"informacje",
    "head":"g≈Çowa","neck":"szyja","throat":"gard≈Ço","eye":"oko","ear":"ucho","nose":"nos","mouth":"usta",
    "back":"plecy","shoulder":"bark","chest":"klatka","arm":"ramiƒô","forearm":"przedramiƒô","hand":"d≈Ço≈Ñ",
    "stomach":"brzuch","hip":"biodro","thigh":"udo","knee":"kolano","calf":"≈Çydka","foot":"stopa",
    "man":"mƒô≈ºczyzna","woman":"kobieta","child":"dziecko",
    "pain":"b√≥l","fever":"gorƒÖczka","cough":"kaszel","shortness of breath":"duszno≈õƒá","choking":"zad≈Çawienie"
  };

  /* 2) Utilsy */
  function diac(s){return String(s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'');}
  function norm(s){return diac(String(s||'').toLowerCase()).replace(/[^\p{L}\p{N}\s\-]/gu,'').replace(/\s+/g,' ').trim();}
  function caseKeep(t,s){ if(!s) return t;
    if (s===s.toUpperCase()) return t.toUpperCase();
    if (s[0]===s[0].toUpperCase()) return t.charAt(0).toUpperCase()+t.slice(1);
    return t;
  }
  // Zbuduj s≈Çownik fraz/s≈Ç√≥w EN->PL
  var D = (function(){
    var phr={}, tok={};
    Object.keys(MAP_EN_PL).forEach(function(en){
      var pl = MAP_EN_PL[en], k = norm(en);
      if (!k) return;
      (k.indexOf(' ')>0 ? phr : tok)[k] = pl;
    });
    return {phr:phr, tok:tok};
  })();

  /* 3) Funkcja podmiany w stringu: najpierw frazy (d≈Çu≈ºsze), potem s≈Çowa */
  function replaceEN2PL(str){
    var out = String(str||'');
    // Frazy ‚Äî sortuj malejƒÖco po d≈Çugo≈õci
    Object.keys(D.phr).sort(function(a,b){return b.length-a.length;}).forEach(function(k){
      var re = new RegExp('\\b'+k.split(' ').map(function(w){return diac(w).replace(/[.*+?^${}()|[\\]\\\\]/g,'\\$&');}).join('\\s+')+'\\b','ig');
      out = out.replace(re, function(m){ return caseKeep(D.phr[k], m); });
    });
    // S≈Çowa
    out = out.replace(/\b([A-Za-z√Ä-≈æ\-]+)\b/g, function(m){
      var t = D.tok[norm(m)];
      return t ? caseKeep(t, m) : m;
    });
    return out;
  }

  /* 4) Czy≈õciutkie t≈Çumaczenie ca≈Çego DOM na PL + atrybut√≥w */
  function shouldSkipText(tn){
    if (!tn || tn.nodeType!==3) return true;
    var p = tn.parentElement; if (!p) return true;
    if (p.closest('#bh-translator,[data-bh-no-translate]')) return true;
    if (['SCRIPT','STYLE','CODE','PRE','TEXTAREA','NOSCRIPT','SVG'].includes(p.tagName)) return true;
    return false;
  }
  function translateEverythingToPL(){
    // Teksty
    var tw = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null);
    var nodes = []; while (tw.nextNode()) nodes.push(tw.currentNode);
    nodes.forEach(function(tn){
      if (shouldSkipText(tn)) return;
      var nv = replaceEN2PL(tn.nodeValue);
      if (nv !== tn.nodeValue) tn.nodeValue = nv;
    });
    // Atrybuty
    document.querySelectorAll('[placeholder],[title],[aria-label]').forEach(function(el){
      if (el.closest('#bh-translator,[data-bh-no-translate]')) return;
      ['placeholder','title','aria-label'].forEach(function(a){
        var v = el.getAttribute(a); if (v==null) return;
        var nv = replaceEN2PL(v);
        if (nv !== v) el.setAttribute(a, nv);
      });
    });
  }

  /* 5) Watchdog ‚Äî utrzymuj PL zawsze (dynamiczne DOM) */
  var mo;
  function startWatchdog(){
    if (mo) mo.disconnect();
    mo = new MutationObserver(function(){ translateEverythingToPL(); });
    mo.observe(document.body, { childList:true, subtree:true, characterData:true });
  }

  /* 6) Start natychmiast (tak≈ºe bez czekania na DOMContentLoaded, bo ‚Äûzosta≈Ça minuta‚Äù) */
  function boot(){
    translateEverythingToPL(); // pierwsze przej≈õcie
    // Kilka kr√≥tkich przebieg√≥w ‚Äûdoganiania‚Äù, gdyby co≈õ do≈Çadowa≈Ço siƒô asynchronicznie
    var bursts = 0;
    var id = setInterval(function(){
      translateEverythingToPL();
      if (++bursts >= 10) { clearInterval(id); startWatchdog(); }
    }, 120);
  }
  if (document.readyState === 'loading') {
    // uruchom od razu i jeszcze raz po DOMContentLoaded
    boot();
    document.addEventListener('DOMContentLoaded', boot, { once:true });
  } else {
    boot();
  }
})();
</script>
<!-- END bh-patch:translator-panic-safe-pl -->
<!-- BEGIN bh-patch:bh-master-lock-pl -->
<script>
(function(){
  if (window.__bhPatchMasterLockPL__) return;
  window.__bhPatchMasterLockPL__ = 1;

  /* === Kill-switch: dodaj ?bh-off=1 do URL albo ustaw w konsoli:
         localStorage.setItem('bh-off','1'); location.reload(); === */
  var BH_OFF = /[?&]bh-off=1/i.test(location.search) || (localStorage.getItem('bh-off')==='1');
  if (BH_OFF) return;

  /* === Ustaw tryb bezpieczny PL oraz wycisz Google/≈Çatki === */
  try {
    localStorage.setItem('bh-safe','1');
    localStorage.setItem('bh-lang','pl');
    sessionStorage.setItem('bh-safe','1');
    localStorage.removeItem('googtrans'); sessionStorage.removeItem('googtrans');
  } catch(_) {}
  // meta notranslate
  if (!document.querySelector('meta[name="google"][content*="notranslate"]')) {
    var m=document.createElement('meta'); m.name='google'; m.content='notranslate'; document.head.appendChild(m);
  }
  // CSS: schowaj wszystkie nasze/stare wid≈ºety t≈Çumacza oraz Google UI
  var css=document.createElement('style'); css.setAttribute('data-bh-style','bh-master-lock-pl'); css.textContent=`
#bh-translator,.bh-translator-wrap,[class*="bh-translator"],.goog-te-banner-frame,.goog-te-gadget,#google_translate_element,
.VIpgJd-ZVi9od-ORHb,.VIpgJd-ZVi9od-l4eHX-hSRGPd,.VIpgJd-ZVi9od-ORHb-OEVmcd{display:none !important;visibility:hidden !important}
body{top:0 !important}`;
  document.head.appendChild(css);
  // Zneutralizuj init Google
  window.googleTranslateElementInit=function(){};

  /* === S≈Çownik EN -> PL (rdze≈Ñ interfejsu; mo≈ºesz dopisywaƒá kolejne pary) === */
  var MAP_EN_PL={
    "first aid":"pierwsza pomoc","emergency phone":"telefon alarmowy","when to worry":"kiedy siƒô niepokoiƒá","red flags":"czerwone flagi",
    "low risk":"ryzyko niskie","show more":"poka≈º wiƒôcej","select":"zaznacz","see suggestions":"zobacz podpowiedzi",
    "recommendations / prevention":"rekomendacje / profilaktyka","otc medications":"leki otc","prescription medications":"leki na receptƒô",
    "symptoms and causes":"objawy i przyczyny","treatment and medications":"leczenie i leki",
    "red-flag symptoms? do not wait":"masz objawy alarmowe? nie zwlekaj","call 112":"zadzwo≈Ñ 112",
    "woman ‚Äî choose body part":"kobieta ‚Äî wybierz czƒô≈õƒá cia≈Ça","man ‚Äî choose body part":"mƒô≈ºczyzna ‚Äî wybierz czƒô≈õƒá cia≈Ça","child ‚Äî choose body part":"dziecko ‚Äî wybierz czƒô≈õƒá cia≈Ça",
    "search":"szukaj","symptoms":"objawy","causes":"przyczyny","medications":"leki","doctor":"lekarz",
    "pharmacy":"apteka","hospital":"szpital","contact":"kontakt","information":"informacje",
    "head":"g≈Çowa","neck":"szyja","throat":"gard≈Ço","eye":"oko","ear":"ucho","nose":"nos","mouth":"usta",
    "back":"plecy","shoulder":"bark","chest":"klatka","arm":"ramiƒô","forearm":"przedramiƒô","hand":"d≈Ço≈Ñ",
    "stomach":"brzuch","hip":"biodro","thigh":"udo","knee":"kolano","calf":"≈Çydka","foot":"stopa",
    "man":"mƒô≈ºczyzna","woman":"kobieta","child":"dziecko",
    "pain":"b√≥l","fever":"gorƒÖczka","cough":"kaszel","shortness of breath":"duszno≈õƒá","choking":"zad≈Çawienie"
  };

  /* === Utilsy === */
  function bhDiac(s){return String(s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'');}
  function bhNorm(s){return bhDiac(String(s||'').toLowerCase()).replace(/[^\p{L}\p{N}\s\-]/gu,'').replace(/\s+/g,' ').trim();}
  function bhKeepCase(t,s){ if(!s) return t; if(s===s.toUpperCase()) return t.toUpperCase(); if(s[0]===s[0].toUpperCase()) return t.charAt(0).toUpperCase()+t.slice(1); return t; }
  var BH_DICT=(function(){var phr={},tok={};Object.keys(MAP_EN_PL).forEach(function(en){var pl=MAP_EN_PL[en],k=bhNorm(en);if(!k)return;(k.indexOf(' ')>0?phr:tok)[k]=pl;});return{phr:phr,tok:tok};})();

  function bhReplaceEN2PL(str){
    var out=String(str||'');
    Object.keys(BH_DICT.phr).sort(function(a,b){return b.length-a.length;}).forEach(function(k){
      var re=new RegExp('\\b'+k.split(' ').map(function(w){return bhDiac(w).replace(/[.*+?^${}()|[\\]\\\\]/g,'\\$&')}).join('\\s+')+'\\b','ig');
      out=out.replace(re,function(m){return bhKeepCase(BH_DICT.phr[k],m);});
    });
    out=out.replace(/\b([A-Za-z√Ä-≈æƒÑƒÖƒÜƒáƒòƒô≈Å≈Ç≈É≈Ñ√ì√≥≈ö≈õ≈π≈∫≈ª≈º\-]+)\b/g,function(m){
      var t=BH_DICT.tok[bhNorm(m)]; return t?bhKeepCase(t,m):m;
    });
    return out;
  }
  function bhSkipTextNode(tn){
    if (!tn || tn.nodeType!==3) return true;
    var p=tn.parentElement; if(!p) return true;
    if (p.closest('[data-bh-no-translate]')) return true;
    if (['SCRIPT','STYLE','CODE','PRE','TEXTAREA','NOSCRIPT','SVG'].includes(p.tagName)) return true;
    return false;
  }

  function bhTranslateAllToPL(){
    // Teksty
    var tw=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);
    var nodes=[]; while(tw.nextNode()) nodes.push(tw.currentNode);
    nodes.forEach(function(tn){
      if (bhSkipTextNode(tn)) return;
      var nv=bhReplaceEN2PL(tn.nodeValue);
      if (nv!==tn.nodeValue) tn.nodeValue=nv;
    });
    // Atrybuty
    document.querySelectorAll('[placeholder],[title],[aria-label]').forEach(function(el){
      if (el.closest('[data-bh-no-translate]')) return;
      ['placeholder','title','aria-label'].forEach(function(a){
        var v=el.getAttribute(a); if (v==null) return;
        var nv=bhReplaceEN2PL(v); if (nv!==v) el.setAttribute(a,nv);
      });
    });
  }

  function bhWatchdogPL(){
    var mo=new MutationObserver(function(){ bhTranslateAllToPL(); });
    mo.observe(document.body,{childList:true,subtree:true,characterData:true});
  }

  function bhBoot(){
    bhTranslateAllToPL();
    // kr√≥tkie ‚Äûbursty‚Äù dla tre≈õci doskakujƒÖcych zaraz po starcie
    var i=0, id=setInterval(function(){ bhTranslateAllToPL(); if(++i>=8){ clearInterval(id); bhWatchdogPL(); } },120);
  }
  if (document.readyState==='loading'){ bhBoot(); document.addEventListener('DOMContentLoaded', bhBoot, {once:true}); }
  else { bhBoot(); }
})();
</script>
<!-- END bh-patch:bh-master-lock-pl -->
</body>
</html>
