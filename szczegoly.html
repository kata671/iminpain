<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boli Help — Szczegóły</title>
  <meta name="theme-color" content="#0e1230" />
  <style>
    /* Twoje oryginalne zmienne CSS */
    :root{
      --bg:#0e1230; --text:#eef2ff; --muted:#b8c2e0;
      --card: rgba(60,32,100,.30); --stroke: rgba(164,107,255,.18);
      --accent:#a46bff; --pink:#ff6ec7; --teal:#5eead4;
      --ok:#70e1b1; --warn:#ffd16c; --danger:#ff6b6b;
      --radius:16px; --gap:14px; --speed:.24s;
      --c-symptoms: rgba(94,234,212,.55);
      --c-causes:   rgba(164,107,255,.55);
      --c-firstaid: rgba(112,225,177,.55);
      --c-otc:      rgba(255,184,108,.65);
      --c-rx:       rgba(255,107,107,.70);
      --c-rehab:    rgba(94,234,212,.55);
      --c-urgent:   rgba(255,107,107,.70);
      --c-myths:    rgba(255,110,199,.55);
      --c-faq:      rgba(164,107,255,.55);
    }

    /* Twoje oryginalne style */
    html,body{ height:100%; }
    body{
      background: var(--bg) !important; color: var(--text);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      padding: 0; margin: 0;
    }

    .bh-wallpaper,.bh-grid{position:fixed; inset:0; pointer-events:none}
    .bh-wallpaper{
      z-index:0;
      background:
        radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.30), transparent 60%),
        radial-gradient(36vw 30vh at 84% 10%, rgba(164,107,255,.25), transparent 60%),
        radial-gradient(55vw 45vh at 50% 100%, rgba(94,234,212,.20), transparent 60%),
        var(--bg);
    }
    .bh-grid{
      z-index:1; opacity:0.12;
      background-size: 32px 32px;
      background-image: linear-gradient(to right, var(--stroke) 1px, transparent 1px), linear-gradient(to bottom, var(--stroke) 1px, transparent 1px);
    }

    main { position:relative; z-index:2; padding: var(--gap); max-width: 900px; margin: 0 auto; }
    h1 { font-size: 26px; font-weight: 900; margin: 16px 0 24px; color: var(--accent); }
    h2 { font-size: 22px; font-weight: 800; margin-top: 36px; margin-bottom: 12px; }

    .card {
      background: var(--card); border: 1px solid var(--stroke);
      padding: var(--gap); border-radius: var(--radius);
      margin-bottom: var(--gap); backdrop-filter: saturate(120%) blur(6px);
      box-shadow: 0 4px 12px rgba(8,10,22,.2);
      transition: box-shadow var(--speed);
      position: relative; /* DLA NAKŁADEK RX */
    }
    .card:hover {
      box-shadow: 0 6px 18px rgba(8,10,22,.45);
    }
    .card ul { list-style: none; padding: 0; margin: 0; }
    .card li { margin-bottom: 8px; padding-left: 10px; position: relative; }
    .card li:last-child { margin-bottom: 0; }
    .card li::before { content: '•'; color: var(--teal); position: absolute; left: 0; font-weight: 900; }

    /* SPECIFIC CARD STYLES */

    /* Nagłówek i powrót */
    .header-info { display: flex; align-items: center; justify-content: space-between; gap: var(--gap); margin-bottom: 20px; }
    .header-info h1 { margin: 0; }
    #bhBack {
      appearance: none; border: 1px solid var(--stroke); background: var(--card);
      color: var(--text); font-weight: 700; padding: 8px 14px;
      border-radius: var(--radius); cursor: pointer;
      box-shadow: 0 4px 10px rgba(8,10,22,.2);
      transition: all var(--speed);
    }
    #bhBack:hover { background: rgba(60,32,100,.50); color: var(--accent); }

    /* Wyróżnienia kolorystyczne dla sekcji */
    #s-objawy { border-left: 6px solid var(--c-symptoms); }
    #s-causes { border-left: 6px solid var(--c-causes); }
    #s-firstaid { border-left: 6px solid var(--c-firstaid); }
    #s-otc { border-left: 6px solid var(--c-otc); }
    #s-rx { border-left: 6px solid var(--c-rx); }
    #s-rehab { border-left: 6px solid var(--c-rehab); }
    #s-urgent { border-left: 6px solid var(--c-urgent); }
    #s-myths, #s-faq { border-left: 6px solid var(--c-myths); }
    
    /* Listy */
    .card ul.list { margin-top: 10px; }
    .card ul.list li::before { font-size: 1.2em; top: -1px; }

    /* Alarmowe li (urgent/rx) */
    #s-urgent li::before { color: var(--danger) !important; }
    #s-rx li::before { color: var(--pink) !important; }

    /* Mity i FAQ */
    .myth-item, .faq-item { margin-bottom: 12px; padding: 8px 0; border-bottom: 1px dashed rgba(184,194,224,.1); }
    .myth-item:last-child, .faq-item:last-child { border-bottom: none; }
    .myth-item strong, .faq-item strong { color: var(--accent); display: block; margin-bottom: 4px; }
    .myth-item span, .faq-item span { color: var(--muted); font-size: 0.9em; }
    .myth-item span::before { content: "Prawda: "; color: var(--teal); font-weight: 700; }
    .faq-item span { color: var(--text); }

    /* Poprawka dla copilot.js: wstrzykiwane style */
    #s-objawy[data-rx]::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      pointer-events: none;
      background: rgba(255,107,107,.08) !important;
      box-shadow: 0 0 16px rgba(255,107,107,.4) !important;
    }
    /* Koniec Twoich oryginalnych stylów */
  </style>
</head>
<body>
  <div class="bh-wallpaper"></div>
  <div class="bh-grid"></div>

  <main id="content-area">
    <div class="header-info">
      <button id="bhBack" onclick="window.history.back()">← Powrót</button>
      <h1 id="page-title">Szczegóły: Ładowanie...</h1>
    </div>

    <div id="content-sections">
      </div>
  </main>

  <script>
    // Ustawienie domyślnego języka
    const LANG_KEY = 'bh.lang';
    let lang = localStorage.getItem(LANG_KEY) || (navigator.language.startsWith('en') ? 'en' : 'pl');
    const L = () => lang;

    // --- PARSOWANIE URL i ALIASY (POPRAWIONE) ---
    // Pobiera 'typ' i 'czesc' z URL.
    const qs=new URLSearchParams(location.search);
    const RAW_TYP=(qs.get('typ')||'kobieta').toLowerCase();
    // Pobierz 'czesc' lub 'area' jako fallback. Domyślnie 'glowa'.
    const RAW_CZESC=(qs.get('czesc') || qs.get('area') || 'glowa').toLowerCase(); 
    const RAW_LABEL=(qs.get('label')||RAW_CZESC).toString();

    // Aliasy dla ujednolicenia nazw kluczy danych (jeśli np. w HTML jest 'oko' a w DB 'glowa')
    const ALIAS={'oko':'glowa', 'klatka-piersiowa':'klatka', 'zoladek':'brzuch'};

    const TYP=RAW_TYP;
    // Skorygowana nazwa części ciała, używana jako klucz w obiekcie CONTENT
    const CZESC=(ALIAS[RAW_CZESC]||RAW_CZESC); 
    const LABEL=RAW_LABEL; // Label (np. "Brzuch")

    // --- DANE MEDYCZNE (Przywrócone, spójne z Twoją strukturą) ---
    
    // ZAWSZE WŁĄCZ TU SWOJE PEŁNE DANE DLA CONTENT_PL I CONTENT_EN
    // Poniżej jest tylko PRZYKŁAD, aby upewnić się, że struktura działa!

    const CONTENT_PL = {
      glowa: {
        label:"Głowa, Twarz, Szyja",
        symptoms:["Pulsujący ból głowy (migrena)","Ból uciskowy, 'opaska'","Sztywność karku (alarm!)","Zawroty głowy"],
        causes:["Stres, zmęczenie","Nadciśnienie","Infekcja (np. zatoki)"],
        firstaid:["Odpoczynek","Zimny okład"],
        otc:["Paracetamol","Ibuprofen"],
        rx:["Tryptany"],
        rehab:["Ćwiczenia rozluźniające"],
        urgent:["Nagły, najsilniejszy w życiu ból głowy (piorunujący)","Sztywność karku + gorączka"],
        myths:[{m:"Bóle głowy to tylko odwodnienie", f:"Często, ale nagłe mogą być objawem udaru."},],
        faq:[{q:"Kiedy iść do lekarza?", a:"Jeśli ból jest nowy, inny, narastający."},]
      },
      brzuch: {
        label:"Brzuch, Jelita, Żołądek",
        symptoms:[
          "Ostry ból po prawej stronie pod żebrami (wątroba/pęcherzyk)",
          "Ból podbrzusza (wyrostek, jajniki, pęcherz - alarm!)",
          "Wzdęcia, gazy",
          "Zgaga/refluks"
        ],
        causes:[
          "Zatrucie pokarmowe",
          "Zespół jelita drażliwego (IBS)",
          "Kamica żółciowa (alarm!)",
          "Zapalenie wyrostka (alarm!)"
        ],
        firstaid:[
          "Lekkostrawna dieta (ryż, banany)",
          "Ciepły okład na skurcze",
          "Picie herbaty miętowej"
        ],
        otc:[
          "Leki rozkurczowe (np. Drotaweryna)",
          "Probiotyki",
          "Leki zobojętniające kwas"
        ],
        rx:[
          "Silne leki przeciwbólowe (np. Tramadol) - tylko w nagłych przypadkach",
          "Antybiotyki (przy zakażeniu H. pylori)"
        ],
        rehab:[
          "Unikanie stresu",
          "Dieta FODMAP (przy IBS)"
        ],
        urgent:[
          "Nagły, przeszywający ból w prawym dolnym kwadrancie (wyrostek) — pilnie SOR/112",
          "Krew w stolcu lub wymiotach — pilnie SOR/112",
          "Ból z gorączką, niemożnością oddania stolca (niedrożność) — pilnie SOR/112"
        ],
        myths:[
          {m:"Ból brzucha zawsze sam przechodzi", f:"Nie zawsze, ostre stany jak wyrostek lub niedrożność wymagają natychmiastowej interwencji."},
        ],
        faq:[
          {q:"Czy ból brzucha od stresu jest prawdziwy?", a:"Tak, mózg i jelita są silnie połączone (oś mózgowo-jelitowa)."}
        ]
      },
      // ... UWAGA: Dodaj tutaj resztę swoich oryginalnych danych dla brzuch, serce, klatka itd.
    };

    const CONTENT_EN = {
      // Wprowadź tutaj swoje oryginalne dane w języku angielskim
      glowa: {
        label:"Head, Face, Neck",
        symptoms:["Throbbing headache (migraine)","Pressure, 'band-like' pain","Neck stiffness (alarm!)","Dizziness"],
        causes:["Stress, fatigue","High blood pressure","Infection (e.g., sinuses)"],
        firstaid:["Rest","Cold compress"],
        otc:["Paracetamol","Ibuprofen"],
        rx:["Triptans"],
        rehab:["Stretching exercises"],
        urgent:["Sudden, worst headache of life (thunderclap)","Neck stiffness + fever"],
        myths:[{m:"Headaches are just dehydration", f:"Often true, but sudden, severe pain can be a symptom of a stroke."},],
        faq:[{q:"When to see a doctor?", a:"If the pain is new, different, worsening."},]
      },
      brzuch: {
        label:"Abdomen, Intestines, Stomach",
        symptoms:[
          "Sharp pain under the right ribs (liver/gallbladder)",
          "Lower abdomen pain (appendix, ovaries, bladder - alarm!)",
          "Bloating, gas",
          "Heartburn/reflux"
        ],
        causes:[
          "Food poisoning",
          "Irritable bowel syndrome (IBS)",
          "Gallstones (alarm!)",
          "Appendicitis (alarm!)"
        ],
        firstaid:[
          "Bland diet (rice, bananas)",
          "Warm compress for cramps",
          "Drinking mint tea"
        ],
        otc:[
          "Antispasmodics (e.g., Drotaverine)",
          "Probiotics",
          "Antacids"
        ],
        rx:[
          "Strong pain relievers (e.g., Tramadol) - only in emergencies",
          "Antibiotics (for H. pylori infection)"
        ],
        rehab:[
          "Stress avoidance",
          "FODMAP diet (for IBS)"
        ],
        urgent:[
          "Sudden, stabbing pain in the right lower quadrant (appendix) — urgent ER/112",
          "Blood in stool or vomit — urgent ER/112",
          "Pain with fever, inability to pass stool (obstruction) — urgent ER/112"
        ],
        myths:[
          {m:"Stomach pain always goes away on its own", f:"Not always, acute conditions like appendicitis or obstruction require immediate intervention."},
        ],
        faq:[
          {q:"Is stress-related stomach pain real?", a:"Yes, the brain and gut are strongly connected (gut-brain axis)."}
        ]
      }
    };

    // --- TŁUMACZENIA SEKCJI ---
    const I18N = {
      pl: {
        sections: {
          symptoms: "Objawy", causes: "Przyczyny", firstaid: "Pierwsza pomoc",
          otc: "Leki bez recepty (OTC)", rx: "Leki na receptę (RX)",
          rehab: "Rehabilitacja / Profilaktyka", urgent: "🔴 Objawy Alarmowe (Czerwone Flagi)",
          myths: "❌ Mity medyczne", faq: "❓ FAQ (Pytania i Odpowiedzi)"
        }
      },
      en: {
        sections: {
          symptoms: "Symptoms", causes: "Causes", firstaid: "First Aid",
          otc: "Over-the-Counter (OTC)", rx: "Prescription Drugs (RX)",
          rehab: "Rehabilitation / Prevention", urgent: "🔴 Urgent Symptoms (Red Flags)",
          myths: "❌ Medical Myths", faq: "❓ FAQ (Questions and Answers)"
        }
      }
    };

    // --- LOGIKA GENEROWANIA TREŚCI (Przywrócona do stanu roboczego) ---
    const CONTENT = (L() === 'en') ? CONTENT_EN : CONTENT_PL;
    const TRANSLATIONS = I18N[L()].sections;
    const DATA = CONTENT[CZESC];
    
    if (DATA) {
      document.getElementById('page-title').textContent = (L() === 'pl' ? 'Szczegóły: ' : 'Details: ') + DATA.label;
      const container = document.getElementById('content-sections');
      container.innerHTML = '';
      
      // Definicja kolejności sekcji
      const SECTION_ORDER = ['symptoms', 'causes', 'firstaid', 'otc', 'rx', 'rehab', 'urgent', 'myths', 'faq'];

      // Funkcja renderująca listy (Objawy, Przyczyny, Leki...)
      const renderList = (items) => {
        if (!items || items.length === 0) return '';
        let html = '<ul class="list">';
        items.forEach(item => {
          if (typeof item === 'string') {
            html += `<li>${item}</li>`;
          } else if (item.t) { 
            // Obsługa formatu z tagami (jeśli go używałeś/aś)
            html += `<li data-audience="${item.audience || 'all'}">${item.t}</li>`;
          }
        });
        html += '</ul>';
        return html;
      };

      // Funkcja renderująca Mity
      const renderMyths = (items) => {
        if (!items || items.length === 0) return '';
        let html = '<div class="list">';
        items.forEach(item => {
          html += `<div class="myth-item"><strong>Mit: ${item.m}</strong><span>${item.f}</span></div>`;
        });
        html += '</div>';
        return html;
      };

      // Funkcja renderująca FAQ
      const renderFAQ = (items) => {
        if (!items || items.length === 0) return '';
        let html = '<div class="list">';
        items.forEach(item => {
          html += `<div class="faq-item"><strong>${item.q}</strong><span>${item.a}</span></div>`;
        });
        html += '</div>';
        return html;
      };

      // Rysowanie sekcji w ustalonej kolejności
      SECTION_ORDER.forEach(key => {
        const data = DATA[key];
        if (data && (Array.isArray(data) && data.length > 0 || !Array.isArray(data))) {
          const section = document.createElement('section');
          section.id = `s-${key}`;
          section.className = 'card';

          // Jeśli to sekcja RX, dodaj data-rx dla skryptu copilot.js
          if (key === 'rx' && data.length > 0) {
            section.setAttribute('data-rx', 'true');
          }

          section.innerHTML = `<h2>${TRANSLATIONS[key]}</h2>`;
          
          if (key === 'myths') {
            section.innerHTML += renderMyths(data);
          } else if (key === 'faq') {
            section.innerHTML += renderFAQ(data);
          } else {
            section.innerHTML += renderList(data);
          }

          container.appendChild(section);
        }
      });
      
    } else {
      // Wyświetlanie błędu braku danych, jeśli klucz nie pasuje
      document.getElementById('page-title').textContent = (L() === 'pl' ? 'Brak Danych' : 'No Data');
      document.getElementById('content-sections').innerHTML = '<p class="card" style="color:var(--danger)">' + (L() === 'pl' ? 'Brak szczegółowych danych dla części ciała: ' : 'No details available for body part: ') + CZESC + ' (' + RAW_CZESC + ')</p>';
    }

    /* ====== Twoje funkcje z _szczegoly.html_ - PRZYKŁAD ODTWORZENIA FUNKCJI RX ====== */
    // Musisz przywrócić wszystkie dodatkowe funkcje z tego pliku, jeśli miałeś/aś je poniżej skryptu głównego
    // Przykład funkcji, która dodaje nakładkę, gdy jest RX
    (function(){
      const el = document.getElementById('s-rx');
      if (!el || el.dataset.rx !== 'true') return;

      const objawyEl = document.getElementById('s-objawy');
      if (objawyEl) {
        objawyEl.setAttribute('data-rx', 'true');
      }
      
      // UWAGA: Stary mechanizm klonowania pseudoelementów jest tu wyłączony,
      // ponieważ użyłeś/aś go już w CSS (patrz sekcja <style> na górze: #s-objawy[data-rx]::before).
      // Jeśli chcesz go przywrócić, musisz go dodać tu poniżej.
      
    })();
    /* =============================================================================== */
  </script>
</body>
</html>
