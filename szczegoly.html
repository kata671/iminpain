<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Szczeg√≥≈Çy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <style>
    .nav-links { margin: 10px 0; }
    .back-link { color:#6cf; text-decoration:none; margin-right:12px; }

    .card h3 { margin:0 0 8px; }
    ul { margin:0; padding-left: 18px; }
    .pill { display:inline-block; height:10px; width:80px; border-radius:20px; background:#6cf; }
    .error { color:#f99; margin-top:20px; font-size:18px; }
  </style>
</head>
<body data-page="szczegoly">

<div class="nav-links">
  <a href="index.html" class="back-link">‚Üê Strona g≈Ç√≥wna</a>
  <a href="#" id="sectionBack" class="back-link">‚Üê Wr√≥ƒá do wyboru sekcji</a>
</div>

<h1 id="title">Szczeg√≥≈Çy</h1>
<div class="pill" aria-hidden="true"></div>

<div id="content"></div>
<div id="err" class="error" style="display:none"></div>

<footer style="margin-top:40px">
  <p>¬© 2025 Iminpain ‚Äî Materia≈Ç poglƒÖdowy, nie zastƒôpuje konsultacji z lekarzem.</p>
</footer>

<script>
/* ====== 1) Powr√≥t do w≈Ça≈õciwej strony sekcji ====== */
function sectionUrlFromId(id) {
  if (!id) return "index.html";
  const female = id.endsWith("_k");
  const male = id.endsWith("_m");
  const groupMapK = {
    oczy_k:"kobieta-glowa.html", uszy_k:"kobieta-glowa.html", nos_k:"kobieta-glowa.html",
    szczeka_k:"kobieta-glowa.html", szyja_k:"kobieta-glowa.html", glowa_k:"kobieta-glowa.html",
    serce_k:"kobieta-klatka.html", pluca_k:"kobieta-klatka.html",
    klatka_piersiowa_k:"kobieta-klatka.html", brzuch_k:"kobieta-klatka.html", plecy_k:"kobieta-klatka.html",
    uklad_krw_k:"kobieta-klatka.html", uklad_oddech_k:"kobieta-klatka.html", uklad_pokarm_k:"kobieta-klatka.html",
    biodra_k:"kobieta-nogi.html", uda_k:"kobieta-nogi.html", kolano_k:"kobieta-nogi.html",
    lydka_k:"kobieta-nogi.html", kostka_k:"kobieta-nogi.html", stopy_k:"kobieta-nogi.html",
    ciaza_k:"kobieta.html"
  };
  const groupMapM = {
    oczy_m:"mezczyzna-glowa.html", uszy_m:"mezczyzna-glowa.html", nos_m:"mezczyzna-glowa.html",
    szczeka_m:"mezczyzna-glowa.html", szyja_m:"mezczyzna-glowa.html", glowa_m:"mezczyzna-glowa.html",
    serce_m:"mezczyzna-klatka.html", pluca_m:"mezczyzna-klatka.html",
    klatka_piersiowa_m:"mezczyzna-klatka.html", brzuch_m:"mezczyzna-klatka.html", plecy_m:"mezczyzna-klatka.html",
    uklad_krw_m:"mezczyzna-klatka.html", uklad_oddech_m:"mezczyzna-klatka.html", uklad_pokarm_m:"mezczyzna-klatka.html",
    biodra_m:"mezczyzna-nogi.html", uda_m:"mezczyzna-nogi.html", kolano_m:"mezczyzna-nogi.html",
    lydka_m:"mezczyzna-nogi.html", kostka_m:"mezczyzna-nogi.html", stopy_m:"mezczyzna-nogi.html"
  };
  if (female) return groupMapK[id] || "kobieta.html";
  if (male) return groupMapM[id] || "mezczyzna.html";
  return "index.html";
}
const params = new URLSearchParams(location.search);
const id = params.get("id");
document.getElementById("sectionBack").href = sectionUrlFromId(id);

/* ====== 2) Pe≈Çny CONTENT (kobieta + mƒô≈ºczyzna) ====== */
window.CONTENT = {
  window.CONTENT = {
  /* ==== G≈ÅOWA KOBIETA ==== */
  oczy_k: {
    title: "Oczy ‚Äî kobieta",
    causes: ["Zapalenie spoj√≥wek", "Zesp√≥≈Ç suchego oka", "Alergie"],
    symptoms: ["≈Åzawienie", "Piecznie", "≈öwiƒÖd", "Zaczerwienienie"],
    doctors: ["Okulista", "POZ"],
    medications: ["Sztuczne ≈Çzy", "Krople antyhistaminowe"],
    first_aid: ["Unikanie alergen√≥w", "P≈Çukanie oczu solƒÖ fizjologicznƒÖ"],
    emergency: ["Nag≈Ça utrata wzroku ‚Äî dzwo≈Ñ 112"],
    description: "Oczy sƒÖ wra≈ºliwe i reagujƒÖ na infekcje, alergie i zmƒôczenie."
  },
  uszy_k: {
    title: "Uszy ‚Äî kobieta",
    causes: ["Infekcje ucha", "Nagromadzenie woskowiny", "Urazy"],
    symptoms: ["B√≥l ucha", "Szumy", "Upo≈õledzenie s≈Çuchu"],
    doctors: ["Laryngolog"],
    medications: ["Krople do uszu", "Antybiotyki"],
    first_aid: ["Ciep≈Çy kompres", "Unikanie wody w uchu"],
    emergency: ["Nag≈Ça utrata s≈Çuchu ‚Äî 112"],
    description: "Problemy z uszami czƒôsto sƒÖ infekcyjne."
  },
  nos_k: {
    title: "Nos ‚Äî kobieta",
    causes: ["Infekcje wirusowe", "Alergie", "Polipy"],
    symptoms: ["Katar", "Niedro≈ºno≈õƒá nosa", "B√≥l zatok"],
    doctors: ["Laryngolog", "Alergolog"],
    medications: ["Krople obkurczajƒÖce", "Sterydy donosowe"],
    first_aid: ["P≈Çukanie solƒÖ fizjologicznƒÖ"],
    description: "Nos reaguje na alergie i infekcje."
  },
  szczeka_k: {
    title: "Szczƒôka ‚Äî kobieta",
    causes: ["Bruksizm", "Zapalenie stawu skroniowo-≈ºuchwowego"],
    symptoms: ["B√≥l przy ≈ºuciu", "Trzaski w stawie"],
    doctors: ["Dentysta", "Ortodonta"],
    medications: ["NLPZ", "Szyny relaksacyjne"],
    first_aid: ["Unikanie twardych pokarm√≥w"],
    description: "Czƒôste u os√≥b z napiƒôciem nerwowym."
  },
  szyja_k: {
    title: "Szyja ‚Äî kobieta",
    causes: ["PrzeciƒÖ≈ºenie miƒô≈õni", "Stres", "Urazy"],
    symptoms: ["B√≥l karku", "Sztywno≈õƒá"],
    doctors: ["Neurolog", "Fizjoterapeuta"],
    medications: ["NLPZ", "Ma≈õci rozgrzewajƒÖce"],
    first_aid: ["Rozlu≈∫nianie miƒô≈õni", "ƒÜwiczenia"],
    description: "B√≥l szyi zwykle wynika z napiƒôcia miƒô≈õniowego."
  },
  glowa_k: {
    title: "G≈Çowa ‚Äî kobieta",
    causes: ["Migrena", "Napiƒôciowy b√≥l g≈Çowy"],
    symptoms: ["B√≥l jednostronny", "≈öwiat≈Çowstrƒôt"],
    doctors: ["Neurolog"],
    medications: ["Leki przeciwb√≥lowe", "Tryptany"],
    first_aid: ["Odpoczynek w ciemnym pokoju"],
    description: "Najczƒôstsze b√≥le g≈Çowy to napiƒôciowe i migrenowe."
  },

  /* ==== KLATKA KOBIETA ==== */
  serce_k: {
    title: "Serce ‚Äî kobieta",
    causes: ["Nadci≈õnienie", "Choroba wie≈Ñcowa", "Zawa≈Ç"],
    symptoms: ["B√≥l w klatce", "Duszno≈õƒá"],
    doctors: ["Kardiolog"],
    medications: ["Nitrogliceryna", "Beta-blokery"],
    first_aid: ["Spoczynek", "Wezwij pogotowie"],
    emergency: ["Silny b√≥l za mostkiem ‚Äî 112"],
    description: "Choroby serca wymagajƒÖ pilnej diagnostyki."
  },
  pluca_k: {
    title: "P≈Çuca ‚Äî kobieta",
    causes: ["Zapalenie p≈Çuc", "Astma", "POChP"],
    symptoms: ["Kaszel", "Duszno≈õƒá"],
    doctors: ["Pulmonolog"],
    medications: ["Antybiotyki", "Sterydy wziewne"],
    first_aid: ["Spoczynek", "Nawodnienie"],
    description: "Choroby p≈Çuc mogƒÖ byƒá ostre i przewlek≈Çe."
  },
  klatka_piersiowa_k: {
    title: "Klatka piersiowa ‚Äî kobieta",
    causes: ["Zapalenie miƒô≈õni", "Kostochondritis"],
    symptoms: ["B√≥l przy ruchu"],
    doctors: ["Ortopeda", "Fizjoterapeuta"],
    medications: ["NLPZ", "Ma≈õci przeciwzapalne"],
    first_aid: ["Odpoczynek", "Ciep≈Çe ok≈Çady"],
    description: "Najczƒô≈õciej pod≈Ço≈ºe miƒô≈õniowo-szkieletowe."
  },
  brzuch_k: {
    title: "Brzuch ‚Äî kobieta",
    causes: ["Niestrawno≈õƒá", "ZJD", "Zapalenie ≈ºo≈ÇƒÖdka"],
    symptoms: ["B√≥l brzucha", "Wzdƒôcia"],
    doctors: ["Gastroenterolog"],
    medications: ["Leki rozkurczowe", "Probiotyki"],
    first_aid: ["Dieta lekkostrawna", "Nawodnienie"],
    description: "Wiele mo≈ºliwych przyczyn."
  },
  plecy_k: {
    title: "Plecy ‚Äî kobieta",
    causes: ["PrzeciƒÖ≈ºenie", "Dyskopatia"],
    symptoms: ["B√≥l przy ruchu", "Sztywno≈õƒá"],
    doctors: ["Ortopeda", "Neurolog"],
    medications: ["NLPZ"],
    first_aid: ["Odpoczynek", "Delikatne rozciƒÖganie"],
    description: "Najczƒô≈õciej przeciƒÖ≈ºeniowe."
  },
  uklad_krw_k: {
    title: "Uk≈Çad krƒÖ≈ºenia ‚Äî kobieta",
    causes: ["Nadci≈õnienie", "Arytmia"],
    symptoms: ["Zawroty", "Obrzƒôki"],
    doctors: ["Kardiolog"],
    medications: ["Leki na ci≈õnienie"],
    first_aid: ["Kontrola ci≈õnienia"],
    description: "Uk≈Çad krƒÖ≈ºenia transportuje krew."
  },
  uklad_oddech_k: {
    title: "Uk≈Çad oddechowy ‚Äî kobieta",
    causes: ["Infekcje", "Astma"],
    symptoms: ["Kaszel", "≈öwisty"],
    doctors: ["Pulmonolog"],
    medications: ["Leki wziewne"],
    first_aid: ["Spok√≥j", "Nawodnienie"],
    description: "Odpowiada za wymianƒô gazowƒÖ."
  },
  uklad_pokarm_k: {
    title: "Uk≈Çad pokarmowy ‚Äî kobieta",
    causes: ["Zatrucie", "Refluks", "ZJD"],
    symptoms: ["B√≥l brzucha", "Zgaga"],
    doctors: ["Gastroenterolog"],
    medications: ["Leki rozkurczowe"],
    first_aid: ["Dieta lekkostrawna"],
    description: "Uk≈Çad trawienny odpowiada za trawienie pokarm√≥w."
  },
  ciaza_k: {
    title: "CiƒÖ≈ºa ‚Äî kobieta",
    causes: ["Fizjologiczne zmiany", "Powik≈Çania ciƒÖ≈ºy"],
    symptoms: ["B√≥le brzucha", "Obrzƒôki"],
    doctors: ["Ginekolog"],
    medications: ["Suplementy", "Leki wg zalece≈Ñ lekarza"],
    first_aid: ["Odpoczynek", "Konsultacja"],
    description: "CiƒÖ≈ºa wymaga sta≈Çej kontroli medycznej."
  },

};

/* ====== 3) Funkcje pomocnicze ====== */
function el(tag, className, html) {
  const e = document.createElement(tag);
  if (className) e.className = className;
  if (html !== undefined) e.innerHTML = html;
  return e;
}
function card(title, items) {
  const c = el("div", "card");
  c.appendChild(el("h3", null, title));
  if (Array.isArray(items)) {
    const ul = el("ul");
    items.forEach(it => ul.appendChild(el("li", null, it)));
    c.appendChild(ul);
  } else if (typeof items === 'string') {
    c.appendChild(el("p", null, items));
  }
  return c;
}

/* ====== 4) Render ====== */
async function load() {
  const err = document.getElementById("err");
  const content = document.getElementById("content");
  const titleEl = document.getElementById("title");
  try {
    if (!id) throw new Error("Brak parametru ?id w adresie.");

    const candidates = [
      "data/detailed_conditions.json",
      "data/conditions.json",
      "/data/detailed_conditions.json",
      "/data/conditions.json"
    ];
    let dataFromJson = null;
    for (const path of candidates) {
      try {
        const res = await fetch(path + "?" + Date.now(), { cache: "no-store" });
        if (!res.ok) continue;
        const json = await res.json();
        if (json && json[id]) { dataFromJson = json[id]; break; }
      } catch(e) {}
    }

    const node = dataFromJson || (window.CONTENT && window.CONTENT[id]) || null;
    if (!node) {
      titleEl.textContent = "Brak danych: " + id;
      content.innerHTML = "<p style='color:#f99'>Nie znaleziono tre≈õci dla tego obszaru.</p>";
      return;
    }

    // ====== Render ======
    titleEl.textContent = node.title || id;
    content.innerHTML = '';
    const grid = document.createElement("div");
    grid.className = "cards";

    // üîß wymuszenie uk≈Çadu 3+3
    Object.assign(grid.style, {
      display: 'grid',
      gridTemplateColumns: 'repeat(3, minmax(0,1fr))',
      gap: '24px',
      justifyItems: 'center',
      alignItems: 'start',
      maxWidth: '1100px',
      margin: '28px auto'
    });

    grid.appendChild(card("Mo≈ºliwe przyczyny b√≥lu", node.causes));
    grid.appendChild(card("Typowe objawy", node.symptoms));
    grid.appendChild(card("Do jakiego lekarza", node.doctors));
    grid.appendChild(card("Leki / ≈õrodki ≈ÇagodzƒÖce", node.medications));
    grid.appendChild(card("Pierwsza pomoc (domowa)", node.first_aid));

    // üî¥ zawsze dodajemy ‚ÄûNiezw≈ÇocznƒÖ pomoc‚Äù jako ostatni kafelek
    const emergencyList = Array.isArray(node.emergency) && node.emergency.length
      ? node.emergency
      : [
          "Silny, narastajƒÖcy b√≥l, duszno≈õƒá, zlewne poty, omdlenie.",
          "Objawy udaru: os≈Çabienie, be≈Çkotliwa mowa, opadniƒôty kƒÖcik ust.",
          "Ostra duszno≈õƒá, sinica, krwawienie, silny uraz.",
          "W razie wƒÖtpliwo≈õci: natychmiast zadzwo≈Ñ 112."
        ];
    const em = card("Niezw≈Çoczna pomoc (112/SOR)", emergencyList);
    em.classList.add("emergency");
    grid.appendChild(em);

    content.appendChild(grid);

    if (node.description) {
      const desc = document.createElement("p");
      desc.style.marginTop = "16px";
      desc.textContent = node.description;
      content.appendChild(desc);
    }

  } catch (e) {
    err.style.display = 'block';
    err.textContent = "B≈ÇƒÖd wczytywania: " + e.message;
  }
}
load();
</script>
</body>
</html>
