<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Szczegóły</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <style>
    .nav-links { margin: 10px 0; }
    .back-link { color:#6cf; text-decoration:none; margin-right:12px; }
    .cards {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 24px; max-width: 1200px; margin: 28px auto;
      justify-items: center; align-items: start;
    }
    .card {
      width: 100%; max-width: 340px; background: rgba(34,42,90,.85);
      border: 2px solid #5463b5; border-radius: 16px; padding: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
    }
    .card h3 { margin:0 0 8px; }
    .error { color:#f99; margin-top:20px; font-size:18px; }
    ul { margin:0; padding-left: 18px; }
    .pill { display:inline-block; height:10px; width:80px; border-radius:20px; background:#6cf; }
    @media (max-width:980px){ .cards{ grid-template-columns:repeat(2,1fr);} }
    @media (max-width:640px){ .cards{ grid-template-columns:1fr;} }
  </style>
</head>
<body data-page="szczegoly">

<div class="nav-links">
  <a href="index.html" class="back-link">← Strona główna</a>
  <a href="#" id="sectionBack" class="back-link">← Wróć do wyboru sekcji</a>
</div>

<h1 id="title">Szczegóły</h1>
<div class="pill" aria-hidden="true"></div>

<div id="content"></div>
<div id="err" class="error" style="display:none"></div>

<footer style="margin-top:40px">
  <p>© 2025 Iminpain — Materiał poglądowy, nie zastępuje konsultacji z lekarzem.</p>
</footer>

<script>
/* ====== 1) MAPA POWROTU DO SEKCJI ====== */
function sectionUrlFromId(id) {
  if (!id) return "index.html";
  const female = id.endsWith("_k");
  const male = id.endsWith("_m");
  const groupMapK = {
    /* GŁOWA (kobieta) */
    oczy_k:"kobieta-glowa.html", uszy_k:"kobieta-glowa.html", nos_k:"kobieta-glowa.html",
    szczeka_k:"kobieta-glowa.html", szyja_k:"kobieta-glowa.html", glowa_k:"kobieta-glowa.html",
    /* KLATKA (kobieta) */
    serce_k:"kobieta-klatka.html", pluca_k:"kobieta-klatka.html",
    klatka_piersiowa_k:"kobieta-klatka.html", brzuch_k:"kobieta-klatka.html", plecy_k:"kobieta-klatka.html",
    uklad_krw_k:"kobieta-klatka.html", uklad_oddech_k:"kobieta-klatka.html", uklad_pokarm_k:"kobieta-klatka.html",
    /* NOGI (kobieta) */
    biodra_k:"kobieta-nogi.html", uda_k:"kobieta-nogi.html", kolano_k:"kobieta-nogi.html",
    lydka_k:"kobieta-nogi.html", kostka_k:"kobieta-nogi.html", stopy_k:"kobieta-nogi.html",
    /* INNE */
    ciaza_k:"kobieta.html"
  };
  const groupMapM = {
    /* GŁOWA (mężczyzna) – dla spójności, choć tu nie zmieniamy fallbacków */
    oczy_m:"mezczyzna-glowa.html", uszy_m:"mezczyzna-glowa.html", nos_m:"mezczyzna-glowa.html",
    szczeka_m:"mezczyzna-glowa.html", szyja_m:"mezczyzna-glowa.html", glowa_m:"mezczyzna-glowa.html",
    /* KLATKA (mężczyzna) */
    serce_m:"mezczyzna-klatka.html", pluca_m:"mezczyzna-klatka.html",
    brzuch_m:"mezczyzna-klatka.html", plecy_m:"mezczyzna-klatka.html",
    uklad_krw_m:"mezczyzna-klatka.html", uklad_oddech_m:"mezczyzna-klatka.html", uklad_pokarm_m:"mezczyzna-klatka.html",
    /* NOGI (mężczyzna) */
    biodra_m:"mezczyzna-nogi.html", uda_m:"mezczyzna-nogi.html", kolano_m:"mezczyzna-nogi.html",
    lydka_m:"mezczyzna-nogi.html", kostka_m:"mezczyzna-nogi.html", stopy_m:"mezczyzna-nogi.html"
  };
  if (female) return groupMapK[id] || "kobieta.html";
  if (male) return groupMapM[id] || "mezczyzna.html";
  return "index.html";
}

/* ====== 2) ODCZYT PARAMETRU id ====== */
const params = new URLSearchParams(location.search);
const id = params.get("id");
document.getElementById("sectionBack").href = sectionUrlFromId(id);

/* ====== 3) AWARYJNE DANE WBUDOWANE (GŁOWA + KLATKA + NOGI, kobieta) ====== */
window.CONTENT = {
  /* ---- GŁOWA (6) ---- */
  "oczy_k": {
    "title": "Oczy — kobieta",
    "causes": ["Zespół suchego oka", "Zapalenie spojówek", "Alergia", "Przemęczenie wzroku"],
    "symptoms": ["Piecznie/świąd", "Łzawienie", "Światłowstręt", "Zaczerwienienie"],
    "doctors": ["Okulista", "Lekarz rodzinny"],
    "medications": ["Sztuczne łzy", "Krople antyhistaminowe (alergia)"],
    "first_aid": ["Odpoczynek od ekranów", "Nawilżanie powietrza"],
    "description": "Najczęstsze dolegliwości mają tło środowiskowe lub alergiczne."
  },
  "uszy_k": {
    "title": "Uszy — kobieta",
    "causes": ["Zapalenie ucha zewnętrznego/środkowego", "Korek woskowinowy"],
    "symptoms": ["Ból ucha", "Niedosłuch", "Szumy uszne", "Gorączka (czasem)"],
    "doctors": ["Laryngolog", "Lekarz rodzinny"],
    "medications": ["Krople przeciwzapalne", "Antybiotyk (jeśli bakteryjne)"],
    "first_aid": ["Nie wkładaj patyczków!", "Delikatne zmiękczanie woskowiny preparatem aptecznym"],
    "description": "Uciążliwe objawy wymagają oceny u laryngologa."
  },
  "nos_k": {
    "title": "Nos i zatoki — kobieta",
    "causes": ["Nieżyt nosa", "Alergia", "Zapalenie zatok"],
    "symptoms": ["Katar/obrzęk", "Ból głowy/ucisk zatok", "Kichanie"],
    "doctors": ["Laryngolog", "Alergolog"],
    "medications": ["Irygacje solą", "Steryd donosowy", "Leki antyhistaminowe"],
    "first_aid": ["Nawilżanie śluzówek", "Unikanie alergenów"],
    "description": "Często związane z alergią lub infekcją wirusową."
  },
  "szczeka_k": {
    "title": "Szczęka / staw skroniowo-żuchwowy — kobieta",
    "causes": ["Bruksizm", "Dysfunkcja SSŻ", "Przeciążenie mięśni żucia"],
    "symptoms": ["Trzaski w stawie", "Ból przy żuciu", "Bóle głowy"],
    "doctors": ["Stomatolog", "Fizjoterapeuta stomatologiczny"],
    "medications": ["NLPZ doraźnie", "Szyna relaksacyjna (u dentysty)"],
    "first_aid": ["Unikanie twardych pokarmów", "Ćwiczenia rozluźniające"],
    "description": "Dolegliwości SSŻ często wynikają z napięcia i zgrzytania zębami."
  },
  "szyja_k": {
    "title": "Szyja — kobieta",
    "causes": ["Napięcie mięśniowe", "Zespół przeciążeniowy (telefon/komputer)", "Wady postawy"],
    "symptoms": ["Sztywność", "Ból promieniujący do barku/głowy", "Ograniczenie ruchu"],
    "doctors": ["Fizjoterapeuta", "Ortopeda"],
    "medications": ["NLPZ miejscowo", "Rozgrzewające maści"],
    "first_aid": ["Mikroprzerwy przy pracy", "Delikatne rozciąganie"],
    "description": "Najczęściej przeciążenie mięśniowo-powięziowe."
  },
  "glowa_k": {
    "title": "Głowa — kobieta (bóle głowy)",
    "causes": ["Napięciowy ból głowy", "Migrena", "Odwodnienie", "Wzrok/przeciążenie"],
    "symptoms": ["Uciskowa opaska", "Pulsujący ból (migrena)", "Nudności/fotofobia"],
    "doctors": ["Neurolog", "Lekarz rodzinny"],
    "medications": ["Paracetamol/ibuprofen", "Tryptany (migrena)"],
    "first_aid": ["Sen/wypoczynek", "Nawodnienie", "Chłodny okład"],
    "description": "Większość bólów głowy ma przebieg łagodny; alarmowe objawy wymagają pilnej diagnostyki."
  },

  /* ---- KLATKA (9) ---- */
  "serce_k": {
    "title": "Serce — kobieta",
    "causes": ["Choroba wieńcowa", "Zawał serca", "Stres", "Nadciśnienie tętnicze"],
    "symptoms": ["Ból w klatce piersiowej", "Duszność", "Promieniowanie do lewej ręki"],
    "doctors": ["Kardiolog", "Lekarz rodzinny"],
    "medications": ["Nitrogliceryna", "Beta-blokery"],
    "first_aid": ["Wezwij pogotowie (112)", "Odpoczynek", "Uspokojenie"],
    "emergency": ["Silny ból klatki piersiowej, zimne poty — natychmiast 112"],
    "description": "Objawy sercowe wymagają pilnej konsultacji lekarskiej."
  },
  "pluca_k": {
    "title": "Płuca — kobieta",
    "causes": ["Zapalenie płuc", "Astma", "POChP"],
    "symptoms": ["Kaszel", "Duszność", "Ból w klatce przy oddychaniu"],
    "doctors": ["Pulmonolog", "Lekarz rodzinny"],
    "medications": ["Antybiotyki", "Sterydy wziewne"],
    "first_aid": ["Odpoczynek", "Nawodnienie"],
    "emergency": ["Ostra duszność, sinica — natychmiast wezwij pomoc"],
    "description": "Choroby płuc mogą mieć poważny przebieg — konieczna konsultacja lekarska."
  },
  "klatka_piersiowa_k": {
    "title": "Klatka piersiowa (ściana klp / mięśnie) — kobieta",
    "causes": ["Nadwyrężenie mięśni międzyżebrowych", "Zapalenie chrząstek żebrowych (kostochondritis)", "Ból mięśniowo-powięziowy po wysiłku lub kaszlu"],
    "symptoms": ["Ból nasila się przy ruchu/kaszlu/głębokim wdechu", "Tkliwość przy ucisku", "Brak duszności/omdleń (jeśli są → pilna konsultacja)"],
    "doctors": ["Lekarz rodzinny (POZ)", "Ortopeda", "Fizjoterapeuta"],
    "medications": ["Paracetamol", "Ibuprofen/Naproksen", "Maści/żele przeciwzapalne"],
    "first_aid": ["Odpoczynek", "Ciepłe okłady 10–15 min", "Delikatne rozciąganie po ustąpieniu ostrego bólu"],
    "emergency": ["Silny ból klatki z dusznością/nudnościami/zimnym potem — 112"],
    "description": "Najczęstsze dolegliwości ściany klatki piersiowej mają podłoże mięśniowo-szkieletowe."
  },
  "brzuch_k": {
    "title": "Brzuch — kobieta",
    "causes": ["Niestrawność", "ZJD", "Zapalenie żołądka"],
    "symptoms": ["Ból brzucha", "Wzdęcia", "Nudności"],
    "doctors": ["Gastroenterolog", "Lekarz rodzinny"],
    "medications": ["Leki rozkurczowe", "Probiotyki"],
    "first_aid": ["Dieta lekkostrawna", "Nawodnienie"],
    "description": "Ból brzucha ma wiele przyczyn — obserwacja + konsultacja."
  },
  "plecy_k": {
    "title": "Plecy — kobieta",
    "causes": ["Przeciążenie mięśni", "Dyskopatia", "Wady postawy"],
    "symptoms": ["Ból przy ruchu", "Sztywność", "Promieniowanie do nóg"],
    "doctors": ["Ortopeda", "Neurolog"],
    "medications": ["Leki przeciwbólowe", "Maści rozgrzewające"],
    "first_aid": ["Odpoczynek", "Delikatne rozciąganie"],
    "description": "Najczęstsze są bóle mięśniowo-szkieletowe wynikające z przeciążeń."
  },
  "uklad_krw_k": {
    "title": "Układ krążenia — kobieta",
    "causes": ["Nadciśnienie", "Miażdżyca", "Zaburzenia rytmu"],
    "symptoms": ["Zawroty głowy", "Obrzęki nóg", "Duszność przy wysiłku"],
    "doctors": ["Kardiolog"],
    "medications": ["Leki na ciśnienie", "Leki przeciwzakrzepowe"],
    "first_aid": ["Kontrola ciśnienia", "Unikanie stresu"],
    "description": "Układ krążenia transportuje krew i tlen."
  },
  "uklad_oddech_k": {
    "title": "Układ oddechowy — kobieta",
    "causes": ["Infekcje wirusowe", "Astma", "POChP"],
    "symptoms": ["Kaszel", "Świszczący oddech", "Duszność"],
    "doctors": ["Pulmonolog"],
    "medications": ["Leki wziewne", "Antybiotyki (jeśli bakteryjne)"],
    "first_aid": ["Spokój", "Nawodnienie"],
    "description": "Układ oddechowy odpowiada za wymianę gazową."
  },
  "uklad_pokarm_k": {
    "title": "Układ pokarmowy — kobieta",
    "causes": ["Zatrucie pokarmowe", "Refluks", "Zespół jelita drażliwego"],
    "symptoms": ["Ból brzucha", "Zgaga", "Biegunka"],
    "doctors": ["Gastroenterolog"],
    "medications": ["Leki rozkurczowe", "Leki osłonowe"],
    "first_aid": ["Dieta lekkostrawna", "Nawodnienie"],
    "description": "Układ pokarmowy trawi i wchłania składniki odżywcze."
  },
  "ciaza_k": {
    "title": "Ciąża",
    "causes": ["Naturalny proces fizjologiczny"],
    "symptoms": ["Nudności", "Zawroty głowy", "Zmienność nastroju"],
    "doctors": ["Ginekolog-położnik"],
    "medications": ["Kwas foliowy (suplementacja)"],
    "first_aid": ["Regularne wizyty kontrolne", "Zdrowa dieta"],
    "description": "Ciąża wymaga regularnych kontroli lekarskich."
  },

  /* ---- NOGI (6) ---- */
  "biodra_k": {
    "title": "Biodra — kobieta",
    "causes": ["Przeciążenie stawu biodrowego", "Zapalenie ścięgien", "Uraz"],
    "symptoms": ["Ból w pachwinie lub bocznie", "Ograniczenie ruchu", "Tkliwość"],
    "doctors": ["Ortopeda", "Fizjoterapeuta"],
    "medications": ["Paracetamol", "NLPZ miejscowo"],
    "first_aid": ["Odpoczynek", "Chłodzenie 10–15 min", "Unikanie przeciążeń"],
    "description": "Ból biodra często ma podłoże przeciążeniowe."
  },
  "uda_k": {
    "title": "Uda — kobieta",
    "causes": ["Naciągnięcie mięśni", "Zespół pasma biodrowo-piszczelowego", "Uraz sportowy"],
    "symptoms": ["Ból przy chodzeniu/biegu", "Tkliwość", "Siniaki"],
    "doctors": ["Fizjoterapeuta", "Ortopeda"],
    "medications": ["NLPZ", "Maści przeciwzapalne"],
    "first_aid": ["RICE: odpoczynek, lód, ucisk, uniesienie"],
    "description": "Najczęściej przeciążenie lub drobny uraz."
  },
  "kolano_k": {
    "title": "Kolano — kobieta",
    "causes": ["Przeciążenie rzepki", "Zapalenie ścięgien", "Uszkodzenie łąkotki"],
    "symptoms": ["Ból przy schodzeniu", "Trzaski", "Obrzęk"],
    "doctors": ["Ortopeda", "Fizjoterapeuta"],
    "medications": ["NLPZ", "Okłady chłodzące"],
    "first_aid": ["Odpoczynek", "Stabilizacja elastyczna"],
    "description": "Częste w sportach biegowych i skocznych."
  },
  "lydka_k": {
    "title": "Łydka — kobieta",
    "causes": ["Skurcz mięśni", "Naciągnięcie brzuchatego łydki", "Zakrzepica (rzadziej)"],
    "symptoms": ["Ból kłujący/ciągnący", "Nasilenie przy wspięciach", "Tkliwość"],
    "doctors": ["Fizjoterapeuta", "Lekarz rodzinny"],
    "medications": ["Magnez (skurcze)", "NLPZ miejscowo"],
    "first_aid": ["Delikatne rozciąganie", "Chłodzenie", "Odpoczynek"],
    "description": "Najczęściej przeciążenie mięśniowe; przy obrzęku/ociepleniu — pilna konsultacja."
  },
  "kostka_k": {
    "title": "Kostka — kobieta",
    "causes": ["Skręcenie stawu skokowego", "Naciągnięcie więzadeł"],
    "symptoms": ["Obrzęk", "Ból przy obciążaniu", "Siniak"],
    "doctors": ["Ortopeda"],
    "medications": ["NLPZ", "Maści chłodzące"],
    "first_aid": ["RICE", "Unieruchomienie krótkotrwałe"],
    "description": "Skręcenia są najczęściej łagodne — kontrola jeśli ból/obrzęk nie ustępuje."
  },
  "stopy_k": {
    "title": "Stopy — kobieta",
    "causes": ["Zapalenie rozcięgna podeszwowego", "Nadmierne obciążenie", "Nieodpowiednie obuwie"],
    "symptoms": ["Ból pięty/przodostopia", "Poranny ból startowy"],
    "doctors": ["Ortopeda", "Fizjoterapeuta"],
    "medications": ["NLPZ miejscowo", "Wkładki odciążające"],
    "first_aid": ["Rozciąganie rozcięgna", "Odpoczynek"],
    "description": "Najczęściej przeciążenia związane z obciążeniem."
  }
};

/* ====== 4) POMOCNICZE ====== */
function el(tag, className, html) {
  const e = document.createElement(tag);
  if (className) e.className = className;
  if (html !== undefined) e.innerHTML = html;
  return e;
}
function card(title, items) {
  const c = el("div", "card");
  c.appendChild(el("h3", null, title));
  if (Array.isArray(items)) {
    const ul = el("ul");
    items.forEach(it => ul.appendChild(el("li", null, it)));
    c.appendChild(ul);
  } else if (typeof items === 'string') {
    c.appendChild(el("p", null, items));
  }
  return c;
}

/* ====== 5) ŁADOWANIE: najpierw próbuj JSON, potem fallback ====== */
async function load() {
  const err = document.getElementById("err");
  const content = document.getElementById("content");
  const titleEl = document.getElementById("title");

  try {
    if (!id) throw new Error("Brak parametru ?id w adresie.");

    // Najpierw spróbuj pobrać dane z JSON (jeśli jest)
    const candidates = [
      "data/detailed_conditions.json",
      "data/conditions.json",
      "/data/detailed_conditions.json",
      "/data/conditions.json"
    ];

    let dataFromJson = null;
    for (const path of candidates) {
      try {
        const res = await fetch(path + "?" + Date.now(), { cache: "no-store" });
        if (!res.ok) continue;
        const json = await res.json();
        if (json && json[id]) { dataFromJson = json[id]; break; }
      } catch(e) { /* ignoruj */ }
    }

    // Jeśli JSON nie dał wpisu – użyj fallbacku inline
    const node = dataFromJson || (window.CONTENT && window.CONTENT[id]) || null;

    if (!node) {
      titleEl.textContent = "Brak danych: " + id;
      content.innerHTML = "";
      const info = document.createElement("div");
      info.style.cssText = "max-width:1100px;margin:24px auto;padding:12px 16px;background:#2a223b;border:1px solid #624ea8;border-radius:12px;color:#e9e6ff";
      info.innerHTML = `
        <h2>Nie znaleziono treści dla <code>${id}</code></h2>
        <p>Sprawdź, czy istnieje wpis w pliku JSON lub w sekcji inline CONTENT.</p>
      `;
      content.appendChild(info);
      return;
    }

    // Render
    titleEl.textContent = node.title || id;
    content.innerHTML = '';
    const grid = document.createElement("div");
    grid.className = "cards";

    grid.appendChild(card("Możliwe przyczyny bólu", node.causes));
    grid.appendChild(card("Typowe objawy", node.symptoms));
    grid.appendChild(card("Do jakiego lekarza", node.doctors));
    grid.appendChild(card("Leki / środki łagodzące", node.medications));
    grid.appendChild(card("Pierwsza pomoc (domowa)", node.first_aid));

    if (node.emergency && node.emergency.length) {
      const em = card("Niezwłoczna pomoc (112/SOR)", node.emergency);
      em.style.borderColor = "rgba(255,100,100,.6)";
      grid.appendChild(em);
    }

    content.appendChild(grid);

    if (node.description) {
      const desc = document.createElement("p");
      desc.style.marginTop = "16px";
      desc.textContent = node.description;
      content.appendChild(desc);
    }

  } catch (e) {
    err.style.display = 'block';
    err.textContent = "Błąd wczytywania: " + e.message;
    console.error(e);
  }
}

load();
</script>
</body>
</html>
