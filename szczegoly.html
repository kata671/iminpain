<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Szczegóły — objawy i pomoc</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#7a4dff" />
  <meta name="description" content="Przyczyny, objawy, leczenie i pierwsza pomoc dla wybranej części ciała." />
  <style>
    /* ——— DODATKI TYLKO DLA TEJ STRONY ——— */
    .detail-hero {
      display:block; margin:10px auto 14px; max-width:min(960px, 95vw);
      border-radius:14px; overflow:hidden; border:1px solid var(--border);
      background: var(--card);
      box-shadow: 0 0 18px rgba(122,77,255,.28), 0 0 36px rgba(80,180,255,.18);
    }
    .detail-hero img {
      display:block; width:100%; height:auto; object-fit:cover;
      max-height: 320px; /* kompakt – ładnie mieści się na telefonie */
    }
    .mini-chips { display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin: 6px 0 2px; }
    .mini-chip {
      display:inline-flex; align-items:center; gap:6px; font-weight:700; font-size:.95rem;
      padding:6px 10px; border-radius:999px; border:1px solid var(--border); background: var(--card);
      box-shadow: var(--glow);
    }
    .mini-chip img.thumb { width:18px; height:18px; border-radius:4px; object-fit:cover; }
    .section h2 { display:flex; align-items:center; gap:8px; }
  </style>
</head>

<body class="bg-med">
  <!-- Quickbar (jak u Ciebie) -->
  <nav class="quickbar">
    <a href="tel:112">📞 112</a>
    <a href="lokalizacja.html">📍 Lokalizacja</a>
    <a href="pierwsza-pomoc.html">⛑️ Pierwsza pomoc</a>
    <input id="search" type="search" placeholder="np. ból oka, nos..." />
    <button id="search-btn">🔎</button>
    <button id="btn-voice" title="Szukaj głosem">🎤</button>
    <button id="theme-toggle" class="theme-toggle" title="Jasny/Ciemny">☀️/🌙</button>
  </nav>

  <header class="site-header">
    <a class="back" href="javascript:history.back()">← Wróć</a>
    <h1 id="title">Szczegóły</h1>
    <!-- drobne emotki + miniaturki (opcjonalne) -->
    <div class="mini-chips" id="miniChips" aria-label="Szybkie emotki">
      <!-- zawartość uzupełnia skrypt -->
    </div>
  </header>

  <!-- HERO ZDJĘCIE (automatycznie podmieniane) -->
  <figure class="detail-hero" id="detailHero" hidden>
    <!-- obraz(y) podstawia skrypt -->
  </figure>

  <main class="container">
    <!-- Tu Twoja treść: PRZYCZYNY / OBJAWY / POMOC / LEKI / LEKARZE ... -->
    <section class="section card" id="przyczyny">
      <h2>🧩 Przyczyny</h2>
      <ul id="list-przyczyny">
        <li>—</li>
      </ul>
    </section>

    <section class="section card" id="objawy">
      <h2>🔍 Objawy</h2>
      <ul id="list-objawy">
        <li>—</li>
      </ul>
    </section>

    <section class="section card" id="pierwsza-pomoc">
      <h2>⛑️ Pierwsza pomoc</h2>
      <ul id="list-pp">
        <li>—</li>
      </ul>
    </section>

    <section class="section card" id="leki">
      <h2>💊 Leki</h2>
      <div>
        <span class="pill pill-otc">Bez recepty</span>
        <span class="pill pill-rx">Na receptę</span>
      </div>
      <ul id="list-leki">
        <li>—</li>
      </ul>
    </section>

    <section class="section card" id="lekarze">
      <h2>🩺 Lekarze</h2>
      <ul id="list-lekarze">
        <li>—</li>
      </ul>
    </section>
  </main>

  <footer class="site-footer"><small>© 2025 • Boli-mnie.pl</small></footer>

  <script>
    // —— Parser ID z query (wspiera kilka form, np. glowa_k | kobieta-glowa | oczy_k itd.)
    const rawId = new URLSearchParams(location.search).get('id') || '';
    function normId(q){
      let id = q.toLowerCase().trim();
      id = id.replace(/\s+/g,'-');
      // zamiana podkreślników na myślnik
      id = id.replace(/_/g,'-');
      // normalizacja wariantów ‘oczy’ -> ‘oko’
      id = id.replace(/\boczy\b/g,'oko');
      return id;
    }
    const id = normId(rawId);

    // — Ustalenie osoby i części ciała
    function whoPart(id){
      // możliwe: 'kobieta-glowa', 'mezczyzna-glowa', 'dziecko-glowa'
      let osoba = null, part = null;
      const people = ['kobieta','mezczyzna','dziecko'];
      for(const p of people){
        if(id.startsWith(p+'-')){ osoba = p; part = id.slice(p.length+1); break; }
      }
      // alternatywa: 'glowa-k' / 'glowa-m' / 'glowa-d'
      if(!osoba){
        const m = id.match(/^(.*?)-(k|m|d)$/);
        if(m){
          part = m[1];
          osoba = m[2]==='k'?'kobieta':m[2]==='m'?'mezczyzna':'dziecko';
        }
      }
      return {osoba, part};
    }
    const ctx = whoPart(id);

    // — Mapy obrazów (portrety jako fallback dla "głowa")
    const PORTRAIT = {
      kobieta: 'img/kobieta-final.png',
      mezczyzna: 'img/mezczyzna-final.png',
      dziecko: 'img/dziecko-final.png'
    };

    // — Próby załadowania obrazów do hero:
    // 1) dedykowana miniatura o nazwie dokładnie jak id (np. img/kobieta-oko.png)
    // 2) jeśli część to "glowa" -> portret osoby
    const hero = document.getElementById('detailHero');
    const title = document.getElementById('title');

    function tryAppendImg(src){
      const img = new Image();
      img.loading = 'eager';
      img.decoding = 'async';
      img.alt = '';
      img.src = src + (src.includes('?')?'':'?v=1');
      img.onerror = ()=> img.remove();
      img.onload = ()=> { hero.hidden = false; };
      hero.appendChild(img);
    }

    // Ustaw tytuł ładnie (np. "Głowa — kobieta")
    function prettyTitle(osoba, part){
      const mapPart = { glowa:'Głowa', oko:'Oko', nos:'Nos', ucho:'Ucho', usta:'Usta' };
      const mapOsoba = { kobieta:'kobieta', mezczyzna:'mężczyzna', dziecko:'dziecko' };
      const p = mapPart[part] || part || 'Szczegóły';
      const o = mapOsoba[osoba] || '';
      return o ? `${p} — ${o}` : p;
    }

    // uruchom
    (function init(){
      title.textContent = prettyTitle(ctx.osoba, ctx.part);

      // 1) spróbuj dedykowany plik 1:1 (jeśli kiedyś go dodasz)
      if(id){
        tryAppendImg(`img/${id}.png`);
      }
      // 2) dla "głowa" pokaż portret (spójny z Twoją stroną główną)
      if(ctx.part === 'glowa' && ctx.osoba && PORTRAIT[ctx.osoba]){
        tryAppendImg(PORTRAIT[ctx.osoba]);
      }

      // MINIMALNE PRZYKŁADOWE TREŚCI (możesz podmienić własnymi)
      const P = document.getElementById('list-przyczyny');
      const O = document.getElementById('list-objawy');
      const PP = document.getElementById('list-pp');
      const Leki = document.getElementById('list-leki');
      const Lekarze = document.getElementById('list-lekarze');

      // czyścimy „—”
      [P,O,PP,Leki,Lekarze].forEach(ul=>ul.innerHTML='');

      if(ctx.part === 'glowa'){
        P.innerHTML = `
          <li>Napięciowe bóle głowy (stres, przeciążenie mięśni karku)</li>
          <li>Migrena (czasem z aurą: mroczki, światłowstręt)</li>
          <li>Zatokowy ból (infekcja, alergia)</li>
        `;
        O.innerHTML = `
          <li>Tępy ucisk / pulsujący ból, nadwrażliwość na światło/dźwięk</li>
          <li>Mdłości, czasem wymioty</li>
          <li>Przy zatokach: nasilenie przy pochylaniu, katar</li>
        `;
        PP.innerHTML = `
          <li>Odpoczynek w cichym, zaciemnionym miejscu</li>
          <li>Nawodnienie, zimny okład na czoło/kark</li>
          <li>W razie potrzeby leki OTC (np. ibuprofen/paracetamol wg ulotki)</li>
        `;
        Leki.innerHTML = `
          <li><span class="pill pill-otc">Bez recepty</span> paracetamol, ibuprofen, naproksen</li>
          <li><span class="pill pill-rx">Na receptę</span> tryptany, leki profilaktyczne (wg lekarza)</li>
        `;
        Lekarze.innerHTML = `
          <li>POZ / Lekarz rodzinny</li>
          <li>Neurolog (migrena, przewlekłe bóle)</li>
          <li>Laryngolog (podejrzenie zapalenia zatok)</li>
        `;
      } else {
        // domyślne wypełnienie dla innych części (zostawione „szablonowo”)
        P.innerHTML = `<li>Najczęstsze przyczyny w tej okolicy ciała.</li>`;
        O.innerHTML = `<li>Najczęstsze objawy do obserwacji.</li>`;
        PP.innerHTML = `<li>Najważniejsze kroki pierwszej pomocy.</li>`;
        Leki.innerHTML = `<li><span class="pill pill-otc">Bez recepty</span> — wg wskazań.</li><li><span class="pill pill-rx">Na receptę</span> — wg lekarza.</li>`;
        Lekarze.innerHTML = `<li>Właściwa specjalizacja wg objawów.</li>`;
      }

      // MAŁE MINIATURKI PRZY EMOTKACH (opcjonalne chipsy)
      // dodajemy 1 mały podgląd jeśli to głowa
      const chips = document.getElementById('miniChips');
      const chip = (label, src) => {
        const a = document.createElement('a');
        a.className = 'mini-chip';
        a.href = location.href;
        a.innerHTML = `${label}`;
        if(src){
          const img = document.createElement('img');
          img.className = 'thumb';
          img.src = src;
          img.alt = '';
          img.loading = 'lazy';
          a.prepend(img);
        }
        return a;
      };
      if(ctx.part === 'glowa'){
        const small = PORTRAIT[ctx.osoba] || '';
        chips.appendChild( chip('🧠 Głowa', small) );
      }
    })();
  </script>
</body>
</html>
