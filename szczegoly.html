<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Szczegóły</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Twoje style bazowe – tak jak w repo -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="style-overrides.css" />
  <link rel="stylesheet" href="fix.szczegoly.css" />
</head>
<body data-page="szczegoly">

  <div class="nav-links">
    <a href="index.html" class="back-link">← Strona główna</a>
    <a href="index.html#sectionBack" class="back-link">← Wróć do wyboru sekcji</a>
  </div>

  <h1 id="title">Szczegóły</h1>
  <div class="pill" aria-hidden="true"></div>

  <!-- tutaj renderer wstawi kafelki -->
  <div id="content"></div>

  <!-- dwa identyfikatory błędów, żeby pasowało do KAŻDEJ wersji JS -->
  <div id="err" class="error" style="display:none;"></div>
  <div id="er"  class="error" style="display:none;"></div>

  <footer style="margin-top:40px">
    <p>© 2025 Iminpain — Materiał poglądowy, nie zastępuje konsultacji z lekarzem.</p>
  </footer>

  <!-- Jedyny wymagany skrypt renderujący -->
  <script src="szczegoly.js"></script>

  <!-- HOTFIX (bezpieczny): koloruje "Bez recepty:" i "Na receptę:" w treści -->
  <script>
  (function(){
    function colorLabels(root){
      if(!root) return;
      var nodes = root.querySelectorAll('.card ul li, .card p');
      nodes.forEach(function(n){
        if(n.dataset._labelsDone==="1") return; // nie przerabiaj ponownie
        var html = n.innerHTML;
        var out = html
          .replace(/(^|\s)(Bez\s+recepty)\s*:/gi,'$1<strong class="otc">$2</strong>:')
          .replace(/(^|\s)(Na\s+receptę)\s*:/gi,'$1<strong class="rx">$2</strong>:');
        if(out !== html) n.innerHTML = out;
        n.dataset._labelsDone = "1";
      });
    }
    function run(){
      var root = document.getElementById('content') || document.body;
      colorLabels(root);
    }
    document.readyState === 'loading' ? document.addEventListener('DOMContentLoaded', run) : run();
    new MutationObserver(run).observe(document.getElementById('content')||document.body, { childList:true, subtree:true });
  })();
  </script>
</body>
</html>
