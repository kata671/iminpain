<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boli Help — Szczegóły</title>
  <meta name="theme-color" content="#0e1230" />
  <style>
    :root{
      --bg:#0e1230; --text:#eef2ff; --muted:#b8c2e0;
      --card: rgba(60,32,100,.30); --stroke: rgba(164,107,255,.18);
      --accent:#a46bff; --pink:#ff6ec7; --teal:#5eead4;
      --ok:#70e1b1; --warn:#ffd16c; --danger:#ff6b6b;
      --radius:16px; --gap:14px; --speed:.24s;
      --c-symptoms: rgba(94,234,212,.55);
      --c-causes:   rgba(164,107,255,.55);
      --c-firstaid: rgba(112,225,177,.55);
      --c-otc:      rgba(255,184,108,.65);
      --c-rx:       rgba(255,107,107,.70);
      --c-rehab:    rgba(94,234,212,.65);
      --c-myths:    rgba(164,107,255,.65);
      --c-faq:      rgba(94,234,212,.55);
      --c-dx:       rgba(164,107,255,.65);
      --c-docs:     rgba(94,234,212,.65);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body[data-page="szczegoly"]{margin:0; background:var(--bg); color:var(--text);
      font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    .bg-anim{position:fixed; inset:0; z-index:-3; pointer-events:none;
      background:
        radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.26), transparent 60%),
        radial-gradient(36vw 30vh at 84% 10%, rgba(94,234,212,.22), transparent 60%),
        radial-gradient(40vw 44vh at 20% 88%, rgba(164,107,255,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
      filter: blur(10px) saturate(118%);
    }
    .grid-bg{position:fixed; inset:0; z-index:-2; pointer-events:none; opacity:.22;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='104' viewBox='0 0 120 104'%3E%3Cg fill='none' stroke='rgba(173,216,255,0.26)' stroke-width='1'%3E%3Cpolygon points='30,0 90,0 120,52 90,104 30,104 0,52'/%3E%3C/g%3E%3C/svg%3E");
      background-size:160px 138px; background-position:center;}
    #bh-particles{ position:fixed; inset:0; z-index:-1; opacity:.85; pointer-events:none }

    header.app{ max-width:1100px; margin:16px auto 0; padding:16px 16px 8px; }
    main{ max-width:1100px; margin:0 auto 72px; padding:0 16px 24px; }
    .bh-backbar{max-width:1100px; margin:8px auto 0; padding:0 16px;}
    #bhReturnTop{
      appearance:none; border:1px solid rgba(164,107,255,.28); background:rgba(60,32,100,.28);
      color:#eef2ff; font-weight:800; letter-spacing:.2px; padding:10px 14px; border-radius:12px; cursor:pointer;
      box-shadow:0 6px 16px rgba(8,10,22,.35), inset 0 0 0 1px rgba(164,107,255,.12), 0 0 8px rgba(164,107,255,.45);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    #bhReturnTop:hover{ transform:translateY(-1px); border-color:rgba(164,107,255,.55); box-shadow:0 10px 20px rgba(8,10,22,.45), 0 0 14px rgba(164,107,255,.65), inset 0 0 0 1px rgba(164,107,255,.18) }
    #bhReturnTop:focus-visible{ outline:2px solid rgba(164,107,255,.75); outline-offset:2px }

    .hero{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--stroke); border-radius:var(--radius); padding:16px;
      backdrop-filter: blur(6px) saturate(120%); box-shadow: 0 18px 48px rgba(8,10,22,.55), 0 0 22px rgba(164,107,255,.18);}
    .hero-top{ display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    .crumbs{font-weight:800; letter-spacing:.2px; color:#cfe2ff}
    .label{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background: rgba(164,107,255,.18); border:1px solid var(--stroke); font-weight:800; letter-spacing:.3px; }
    .hero-note{ margin-top:10px; color:#b8c2e0; font-size:13px; }
    .legend{ color:#d6e4ff; font-weight:700; margin-top:6px; font-size:13px }

    .steps{display:grid; grid-template-columns:repeat(4,1fr); gap:8px; margin:14px 0 0}
    .step{position:relative; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.05); font-weight:900; letter-spacing:.2px; color:#dfe6ff; text-align:center}
    .step.active{border-color:rgba(94,234,212,.55); box-shadow:0 0 0 2px rgba(94,234,212,.35), 0 8px 18px rgba(8,10,22,.35)}

    .tabs{ display:flex; flex-wrap:wrap; gap:8px; margin:16px 0 8px; }
    .tab{ padding:9px 13px; border-radius:10px; font-weight:800; letter-spacing:.2px; cursor:pointer; user-select:none;
      background: transparent; border:1px solid rgba(255,255,255,.16); color:#e9efff;
      transition: box-shadow var(--speed), transform var(--speed), border-color var(--speed), background var(--speed);}
    .tab:hover{ transform: translateY(-1px); }
    .tab[aria-selected="true"]{ box-shadow:0 0 0 2px rgba(94,234,212,.35); border-color:rgba(94,234,212,.55) }

    .cards{ margin-top:8px }
    .card{ display:none; background: var(--card); border:1px solid var(--stroke); border-radius:var(--radius);
      padding:16px 16px 14px; backdrop-filter: blur(10px) saturate(125%); box-shadow: 0 14px 34px rgba(8,10,22,.42);
      transition: transform var(--speed), box-shadow var(--speed), border-color var(--speed); color:var(--text); }
    .card[aria-hidden="false"]{ display:block; animation:fadeIn .28s ease both }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none} }
    .card h3{ position:relative; margin:.15rem 0 .85rem; font-size:16px; font-weight:900; letter-spacing:.3px; color:#e6f0ff }
    .card h3::after{ content:""; display:block; height:1px; margin-top:.55rem;
      background:linear-gradient(90deg, rgba(207,226,255,.55), rgba(255,255,255,.08) 45%, transparent); }

    ul.clean{ list-style:none; margin:0; padding:0 }
    ul.clean li{ position:relative; padding:10px 12px 10px 36px; border-radius:10px; margin-bottom:7px;
      border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.03); color:#f6f8ff; }
    .cb{ position:absolute; left:10px; top:50%; transform:translateY(-50%); width:18px; height:18px; border-radius:4px;
      border:1px solid rgba(255,255,255,.35); background:rgba(255,255,255,.05); display:inline-block }
    .cb.checked{ background:#fff; box-shadow:0 0 0 2px rgba(164,107,255,.25) inset }
    .li-checked{ outline:1px solid rgba(164,107,255,.45); background: rgba(164,107,255,.10) }

    .risk-mini{ display:flex; align-items:center; gap:10px; margin:.15rem 0 .35rem }
    .risk-mini small{ color:#d6e4ff; font-weight:800 }
    .riskbar{ position:relative; width:200px; height:12px; border-radius:999px; overflow:hidden;
      outline:1px solid rgba(255,255,255,.16);
      background: linear-gradient(90deg, var(--ok), var(--warn), var(--danger)); }
    .cursor{ position:absolute; top:50%; transform:translate(-50%,-50%); width:16px; height:16px; border-radius:50%; background:#fff }

    .strip{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.16); padding:.7rem 1rem; border-radius:.8rem; margin:.6rem 0; }
    .strip--warn{ background: linear-gradient(180deg, rgba(255,184,108,.18), rgba(255,255,255,.04)); border-color: rgba(255,184,108,.55); }
    .cta{ display:inline-block; padding:8px 12px; border-radius:10px; font-weight:900; background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.18); text-decoration:none; color:var(--text); }

    .dx-hint{ display:none; margin-top:10px; border-radius:10px; padding:10px 12px;
      background:rgba(164,107,255,.12); border:1px solid rgba(164,107,255,.35); color:#e9e6ff; }
    .dx-hint.show{ display:block }
    .dx-hint button{ margin-left:8px; padding:8px 10px; border-radius:10px; font-weight:900; cursor:pointer;
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); color:#fff }

    .dx-ico{ width:22px; height:22px; display:grid; place-items:center; border-radius:6px;
      background:rgba(164,107,255,.18); border:1px solid rgba(164,107,255,.35) }
    .dx-meta{ margin-left:auto; display:flex; flex-direction:column; align-items:flex-end; gap:6px; min-width:160px }
    .conf-wrap{ width:120px; height:8px; border-radius:999px; outline:1px solid rgba(255,255,255,.16); overflow:hidden;
      background:linear-gradient(90deg, rgba(94,234,212,.25), rgba(164,107,255,.25)); }
    .conf-bar{ height:100%; width:0%; background:linear-gradient(90deg, rgba(94,234,212,.65), rgba(164,107,255,.65)) }
    .dx-badge,.doc-badge{ font-size:12px; padding:4px 8px; border-radius:999px; font-weight:900; letter-spacing:.2px; }
    .dx-badge.poz,.doc-badge.poz{ background:rgba(94,234,212,.18); border:1px solid rgba(94,234,212,.45); color:#d9fffa }
    .dx-badge.sor,.doc-badge.sor{ background:rgba(255,107,107,.20); border:1px solid rgba(255,107,107,.65); color:#ffe6e6 }
  </style>

  <!-- ✅ TYLKO DLA TEJ STRONY: sanity + ukrycie starego miejsca + jedyny styl #lang-fab -->
  <style>
    html,body{max-width:100%;overflow-x:hidden}
    *,*::before,*::after{box-sizing:border-box}
    img,video,canvas{max-width:100%;height:auto}
    .bg-anim,.grid-bg,#bh-particles{position:fixed;inset:0;pointer-events:none}

    @media (max-width:768px){
      /* ukryj ewentualny stary selektor w headerze */
      .header .tools :is(.lang,.langpick,#bhLangPick){display:none!important}
      .header .tools :is(.lang,.langpick,#bhLangPick)::before,
      .header .tools :is(.lang,.langpick,#bhLangPick)::after{content:none!important;display:none!important}

      /* jedyna definicja pływającego guzika języka */
      #lang-fab{
        position:fixed; top:10px; right:10px; z-index:4000;
        display:inline-flex; align-items:center; gap:6px;
        padding:8px 10px; border-radius:12px;
        background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2);
        backdrop-filter:blur(8px); line-height:1; font-weight:600;
        max-width:92px; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
      }
      #lang-fab label{ display:none; }
      #bhLangSelect{ font-size:16px; }  /* brak zoomu na iOS */
      body{ padding-top:0!important; }
    }
  </style>
<style>
  /* --- dopieszczenie układu kroków i ciasnych ekranów --- */

  /* rozdziel 1. tytuł i podtytuł; niech podtytuł spada w nową linię */
  .steps .step{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }
  .steps .step small{
    display:block;           /* wymuś nową linię */
    margin-top:4px;
    color:#b8c2e0;
    font-weight:700;
  }

  /* kiedy jest węziej – 2 kolumny; bardzo wąsko – 1 kolumna */
  @media (max-width: 600px){
    .steps{ grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 380px){
    .steps{ grid-template-columns: 1fr; }
  }

  /* minimalne odstępy, by nic nie nachodziło na górze w trybie poziomym */
  @media (max-height: 420px) and (orientation: landscape){
    header.app{ margin-top: 8px; }
  }
</style><!-- 🌟 Nowoczesny wygląd kafelków i opisów tylko dla SZCZEGÓŁY -->
<style id="bh-upgrade-2025">
  /* Nowoczesna czcionka */
  body[data-page="szczegoly"] {
    font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
    letter-spacing: 0.2px;
  }

  /* Kafle/ramki (cards) – kwadratowe, szklane */
  .card {
    border-radius: 20px !important;
    padding: 20px !important;
    background: rgba(255, 255, 255, 0.06) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(16px) saturate(140%) !important;
    box-shadow: 0 8px 28px rgba(0, 0, 0, 0.45),
                inset 0 0 8px rgba(255, 255, 255, 0.08) !important;
    transition: transform .25s ease, box-shadow .25s ease;
  }
  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 34px rgba(0, 0, 0, 0.55),
                0 0 12px rgba(164, 107, 255, 0.5);
  }

  /* Nagłówki w kartach */
  .card h3 {
    font-size: 18px !important;
    font-weight: 800 !important;
    color: #ffffff !important;
    text-transform: uppercase;
    letter-spacing: 0.6px;
  }

  /* Lista objawów/przyczyn – styl nowoczesny */
  ul.clean li {
    border-radius: 14px !important;
    margin-bottom: 10px !important;
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.12) !important;
    padding: 12px 14px 12px 38px !important;
    transition: background .25s ease, transform .2s ease;
  }
  ul.clean li:hover {
    background: rgba(164, 107, 255, 0.12) !important;
    transform: scale(1.02);
  }

  /* Checkbox (cb) – świecący kwadrat */
  .cb {
    width: 18px; height: 18px;
    border-radius: 6px !important;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.05);
    box-shadow: inset 0 0 4px rgba(255,255,255,0.2);
  }
  .cb.checked {
    background: linear-gradient(135deg, #a46bff, #5eead4);
    box-shadow: 0 0 8px rgba(164,107,255,0.8);
  }

  /* FAQ i mity – elegancki wygląd */
  #faq li, #myths li {
    background: rgba(255,255,255,0.07) !important;
    border-left: 3px solid #a46bff !important;
    padding: 14px 16px 14px 40px !important;
  }

  /* Guziki (np. Choroby, Lekarze) */
  .tab {
    border-radius: 12px !important;
    background: rgba(255, 255, 255, 0.04) !important;
    font-weight: 700 !important;
    transition: background .25s, transform .2s;
  }
  .tab:hover {
    background: rgba(164, 107, 255, 0.15) !important;
    transform: translateY(-2px);
  }
  .tab[aria-selected="true"] {
    background: linear-gradient(135deg, #a46bff, #5eead4) !important;
    color: #fff !important;
    box-shadow: 0 0 10px rgba(164,107,255,0.6);
  }
</style>
<style id="bh-cards-glow-2025">
  /* delikatny kolor dla każdej zakładki */
  .tab[data-variant="symptoms"]{ box-shadow: 0 0 0 1px rgba(94,234,212,.25) inset, 0 0 10px rgba(94,234,212,.20); border-color: rgba(94,234,212,.45) }
  .tab[data-variant="causes"]  { box-shadow: 0 0 0 1px rgba(164,107,255,.25) inset, 0 0 10px rgba(164,107,255,.20); border-color: rgba(164,107,255,.45) }
  .tab[data-variant="firstaid"]{ box-shadow: 0 0 0 1px rgba(112,225,177,.25) inset, 0 0 10px rgba(112,225,177,.20); border-color: rgba(112,225,177,.45) }
  .tab[data-variant="otc"]     { box-shadow: 0 0 0 1px rgba(255,184,108,.25) inset, 0 0 10px rgba(255,184,108,.20); border-color: rgba(255,184,108,.45) }
  .tab[data-variant="rx"]      { box-shadow: 0 0 0 1px rgba(255,107,107,.25) inset, 0 0 10px rgba(255,107,107,.20); border-color: rgba(255,107,107,.45) }
  .tab[data-variant="rehab"]   { box-shadow: 0 0 0 1px rgba(94,234,212,.25)  inset, 0 0 10px rgba(94,234,212,.20);  border-color: rgba(94,234,212,.45) }
  .tab[data-variant="myths"]   { box-shadow: 0 0 0 1px rgba(164,107,255,.25) inset, 0 0 10px rgba(164,107,255,.20); border-color: rgba(164,107,255,.45) }
  .tab[data-variant="faq"]     { box-shadow: 0 0 0 1px rgba(135,207,255,.22) inset, 0 0 10px rgba(135,207,255,.18); border-color: rgba(135,207,255,.40) }

  /* jeszcze ładniejsze hoverki */
  .tab:not([aria-selected="true"]):hover{
    transform: translateY(-2px);
    filter: saturate(120%);
  }

  /* 🔵 animacja „pulse” – użyjemy dla DX i DOCS */
  @keyframes bhBluePulse {
    0%   { box-shadow: 0 0 0 0 rgba(96,165,250,.25), 0 0 14px rgba(96,165,250,.35) }
    50%  { box-shadow: 0 0 0 8px rgba(96,165,250,.12), 0 0 26px rgba(96,165,250,.55) }
    100% { box-shadow: 0 0 0 0 rgba(96,165,250,.25), 0 0 14px rgba(96,165,250,.35) }
  }
  @media (prefers-reduced-motion: reduce){
    .pulse-blue { animation: none !important; }
  }

  /* klasa włączana JS-em (taby i karty) */
  .pulse-blue {
    border-color: rgba(59,130,246,.85) !important;
    animation: bhBluePulse 2.2s ease-in-out infinite;
  }

  /* gdy „pulsujące” są całe karty Choroby/Lekarze na dole */
  #s-dx.pulse-blue, #s-docs.pulse-blue{
    box-shadow:
      0 14px 34px rgba(8,10,22,.55),
      0 0 0 2px rgba(59,130,246,.45) inset,
      0 0 28px rgba(96,165,250,.55) !important;
  }
</style>
<style id="bh-cards-glow-fix">
  /* upewnij się, że karta może „wylewać” poświatę poza obrys */
  .card.pulse-blue{ overflow: visible; position: relative; }

  /* 🔵 niezależny, animowany halo jako pseudo-element (działa nawet przy ciężkich box-shadow karty) */
  .card.pulse-blue::after{
    content:"";
    position:absolute;
    inset:-8px;                 /* halo nieco większe niż karta */
    border-radius: inherit;
    pointer-events:none;
    /* startowa poświata */
    box-shadow:
      0 0 0 2px rgba(59,130,246,.45) inset,
      0 0 22px rgba(96,165,250,.55),
      0 10px 26px rgba(8,10,22,.45);
    opacity:.9;
    animation: bhBluePulseCard 2.2s ease-in-out infinite;
  }

  /* animacja dla kart (odrobinkę mocniejsza niż dla tabów) */
  @keyframes bhBluePulseCard{
    0%   { box-shadow:
            0 0 0 2px rgba(59,130,246,.45) inset,
            0 0 16px rgba(96,165,250,.40),
            0 10px 24px rgba(8,10,22,.40);
          opacity:.85; }
    50%  { box-shadow:
            0 0 0 2px rgba(59,130,246,.75) inset,
            0 0 34px rgba(96,165,250,.75),
            0 14px 34px rgba(8,10,22,.55);
          opacity:1; }
    100% { box-shadow:
            0 0 0 2px rgba(59,130,246,.45) inset,
            0 0 16px rgba(96,165,250,.40),
            0 10px 24px rgba(8,10,22,.40);
          opacity:.85; }
  }

  /* szacunek dla preferencji systemowych */
  @media (prefers-reduced-motion: reduce){
    .card.pulse-blue::after{ animation:none !important }
  }
</style>
<style id="bh-blue-pulse-final">
  /* Upewnij się że glow jest widoczny nad innymi cieniami */
  #s-dx.pulse-blue, 
  #s-docs.pulse-blue {
    position: relative;
    z-index: 5; /* ponad inne elementy */
  }

  #s-dx.pulse-blue::after, 
  #s-docs.pulse-blue::after {
    content: "";
    position: absolute;
    inset: -6px;  /* halo większe od karty */
    border-radius: 18px;
    pointer-events: none;
    animation: bhPulseDxDocs 2.4s ease-in-out infinite;
  }

  @keyframes bhPulseDxDocs {
    0% {
      box-shadow: 0 0 0 2px rgba(59,130,246,.5),
                  0 0 18px rgba(96,165,250,.45),
                  0 0 28px rgba(96,165,250,.55);
      opacity: .85;
    }
    50% {
      box-shadow: 0 0 0 4px rgba(59,130,246,.7),
                  0 0 28px rgba(96,165,250,.75),
                  0 0 42px rgba(96,165,250,.8);
      opacity: 1;
    }
    100% {
      box-shadow: 0 0 0 2px rgba(59,130,246,.5),
                  0 0 18px rgba(96,165,250,.45),
                  0 0 28px rgba(96,165,250,.55);
      opacity: .85;
    }
  }
</style>
</head>
<body data-page="szczegoly">
  <div class="bg-anim" aria-hidden="true"></div>
  <div class="grid-bg" aria-hidden="true"></div>
  <canvas id="bh-particles" aria-hidden="true"></canvas>

  <!-- ✅ SELEKTOR JĘZYKA (tylko jeden, bez inline-style) -->
  <div id="lang-fab">
    <div class="langpick" id="bhLangPick" aria-label="Wybór języka">
      <label for="bhLangSelect">Język</label>
      <select id="bhLangSelect">
        <option value="pl">PL</option>
        <option value="en">EN</option>
      </select>
    </div>
  </div>

  <div class="bh-backbar">
    <button id="bhReturnTop" type="button" aria-label="Wróć do poprzedniej strony">↑</button>
  </div>

  <header class="app" aria-label="Nawigacja lokalna">
    <div class="hero" role="region" aria-label="Nagłówek szczegółów">
      <div class="hero-top">
        <div class="crumbs" id="crumbs">Boli Help / <span id="crumb-typ">—</span> / <span id="crumb-label">Szczegóły</span></div>
        <div class="label"><span id="label-icon" aria-hidden="true">●</span><span id="label-text"><b>—</b></span></div>
      </div>

      <div class="steps" aria-label="Asystent kroków">
        <div class="step" id="step-1">1. Objawy<small>Zaznacz</small></div>
        <div class="step" id="step-2">2. Choroby<small>Zobacz podpowiedzi</small></div>
        <div class="step" id="step-3">3. Lekarze<small>Gdzie iść?</small></div>
        <div class="step" id="step-4">4. Co dalej<small>112/SOR lub dom</small></div>
      </div>

      <div class="tabs" role="tablist" aria-label="Sekcje treści">
        <button class="tab" data-variant="symptoms" role="tab" aria-selected="true"  data-target="#s-objawy">Objawy</button>
        <button class="tab" data-variant="causes"   role="tab" aria-selected="false" data-target="#s-przyczyny">Przyczyny</button>
        <button class="tab" data-variant="firstaid" role="tab" aria-selected="false" data-target="#s-aid">Pierwsza pomoc</button>
        <button class="tab" data-variant="otc"      role="tab" aria-selected="false" data-target="#s-otc">Leki OTC</button>
        <button class="tab" data-variant="rx"       role="tab" aria-selected="false" data-target="#s-rx">Leki na receptę</button>
        <button class="tab" data-variant="rehab"    role="tab" aria-selected="false" data-target="#s-rehab">Rehabilitacja / Profilaktyka</button>
        <button class="tab" data-variant="myths"    role="tab" aria-selected="false" data-target="#s-mity">Mity vs Fakty</button>
        <button class="tab" data-variant="faq"      role="tab" aria-selected="false" data-target="#s-faq">FAQ</button>
        <button class="tab" data-variant="dx"       role="tab" aria-selected="false" data-target="#s-dx">Choroby (beta)</button>
        <button class="tab" data-variant="docs"     role="tab" aria-selected="false" data-target="#s-docs">Lekarze</button>
      </div>

      <p class="hero-note">Edukacyjnie, nie diagnostycznie. W nagłej, ciężkiej dolegliwości lub przy czerwonych flagach — skorzystaj z <b>112</b> lub SOR.</p>
      <p class="legend">Zaznacz <strong>objawy</strong> — pasek <b>Ryzyko</b> oraz karty <b>Choroby</b>/<b>Lekarze</b> dopasują się automatycznie.</p>
    </div>
  </header>

  <main data-no-i18n="1">
    <section class="cards" aria-label="Karty z informacjami szczegółowymi">
      <!-- OBJAWY -->
      <article class="card" id="s-objawy" role="tabpanel" aria-hidden="false">
        <h3 id="h-obj">Objawy</h3>
        <ul class="clean" id="symp-common"></ul>

        <div class="subhead">Kiedy się niepokoić (czerwone flagi)</div>
        <div class="risk-mini" aria-label="Szacowany poziom ryzyka">
          <small>Ryzyko: <span id="risk-label">niskie</span></small>
          <span class="riskbar" id="riskbar"><span class="cursor" id="risk-cursor-card" style="left:0%"></span></span>
        </div>
        <ul class="clean" id="urgent"></ul>

        <div class="strip strip--warn" id="urgent-strip">
          Masz objawy alarmowe? <strong>Nie zwlekaj.</strong>
          <a class="cta" id="cta-112" href="tel:112" aria-label="Zadzwoń 112">Zadzwoń 112</a>
        </div>

        <div id="dx-hint" class="dx-hint" role="status" aria-live="polite">
          Masz zaznaczone objawy. Zobacz edukacyjne podpowiedzi w <strong>Choroby</strong> lub przejdź do <strong>Lekarze</strong>.
          <button type="button" id="dx-open">Choroby</button>
          <button type="button" id="docs-open">Lekarze</button>
        </div>
      </article>

      <!-- PRZYCZYNY -->
      <article class="card" id="s-przyczyny" role="tabpanel" aria-hidden="true">
        <h3 id="h-cause">Przyczyny</h3>
        <ul class="clean" id="causes"></ul>
      </article>

      <!-- POMOC -->
      <article class="card" id="s-aid" role="tabpanel" aria-hidden="true">
        <h3 id="h-aid">Pierwsza pomoc</h3>
        <ul class="clean" id="firstaid"></ul>
      </article>

      <!-- OTC -->
      <article class="card" id="s-otc" role="tabpanel" aria-hidden="true">
        <h3 id="h-otc">Leki bez recepty (OTC)</h3>
        <ul class="clean" id="meds-otc"></ul>
      </article>

      <!-- RX -->
      <article class="card" id="s-rx" role="tabpanel" aria-hidden="true">
        <h3 id="h-rx">Leki na receptę (informacyjnie)</h3>
        <ul class="clean" id="meds-rx"></ul>
      </article>

      <!-- REHAB -->
      <article class="card" id="s-rehab" role="tabpanel" aria-hidden="true">
        <h3 id="h-rehab">Rehabilitacja / Profilaktyka</h3>
        <ul class="clean" id="rehab"></ul>
      </article>

      <!-- MITY -->
      <article class="card" id="s-mity" role="tabpanel" aria-hidden="true">
        <h3 id="h-mity">Mity vs Fakty</h3>
        <ul class="clean" id="myths"></ul>
      </article>

      <!-- FAQ -->
      <article class="card" id="s-faq" role="tabpanel" aria-hidden="true">
        <h3 id="h-faq">FAQ</h3>
        <ul class="clean" id="faq"></ul>
      </article>

      <!-- CHOROBY -->
      <article class="card" id="s-dx" role="tabpanel" aria-hidden="true">
        <h3 id="h-dx">Choroby (beta)</h3>
        <p class="dx-note">Podpowiedzi edukacyjne z zaznaczonych objawów. Nie zastępują konsultacji.</p>
        <ul class="clean dx-list" id="dx-list"></ul>
      </article>

      <!-- LEKARZE -->
      <article class="card" id="s-docs" role="tabpanel" aria-hidden="true">
        <h3 id="h-docs">Lekarze</h3>
        <p class="docs-note">Kolejność: <b>POZ</b> → specjaliści. Czerwone flagi kierują do <b>SOR/112</b>.</p>
        <ul class="clean" id="docs-list"></ul>
      </article>
    </section>
  </main>
  <script>
    /* --- język (localStorage) --- */
    (function langInit(){
      const KEY='bh.lang';
      const get = ()=> localStorage.getItem(KEY) || 'pl';
      const set = (v)=> localStorage.setItem(KEY, v);
      window.__getLang = get;

      const sel = document.getElementById('bhLangSelect');
      if (sel){
        sel.value = get();
        sel.addEventListener('change', ()=>{
          set(sel.value||'pl');
          // odśwież stronę, by UI/teksty przeładowały się w wybranym języku
          location.replace(location.href);
        });
      }
    })();
    const L = ()=> (window.__getLang && window.__getLang()) || 'pl';

    /* --- i18n słowniki (UI) --- */
    const I18N={
      pl:{lang_label:'Język',back:'← Wróć',
          hero_note:'Edukacyjnie, nie diagnostycznie. W nagłej, ciężkiej dolegliwości lub przy czerwonych flagach — skorzystaj z <b>112</b> lub SOR.',
          legend:'Zaznacz <strong>objawy</strong> — pasek <b>Ryzyko</b> oraz karty <b>Choroby</b>/<b>Lekarze</b> dopasują się automatycznie.',
          tabs:{symptoms:'Objawy',causes:'Przyczyny',firstaid:'Pierwsza pomoc',otc:'Leki OTC',rx:'Leki na receptę',rehab:'Rehabilitacja / Profilaktyka',myths:'Mity vs Fakty',faq:'FAQ',dx:'Choroby (beta)',docs:'Lekarze'},
          symptoms_head:'Objawy', urgent_head:'Kiedy się niepokoić (czerwone flagi)',
          risk:'Ryzyko:', risk_low:'niskie', risk_mid:'umiarkowane', risk_high:'wysokie',
          urgent_strip:'Masz objawy alarmowe? <strong>Nie zwlekaj.</strong>', call_112:'Zadzwoń 112',
          hint:'Masz zaznaczone objawy. Zobacz edukacyjne podpowiedzi w <strong>Choroby</strong> lub przejdź do <strong>Lekarze</strong>.',
          hint_btn_dx:'Choroby', hint_btn_docs:'Lekarze',
          badge_sor:'pilnie SOR', badge_poz:'POZ', badge_doc:'POZ/specjalista',
          crumbs_details:'Szczegóły'},
      en:{lang_label:'Language',back:'← Back',
          hero_note:'Educational, not diagnostic. If symptoms are severe or red flags — use <b>112</b> / ER.',
          legend:'Select <strong>symptoms</strong> — <b>Risk</b> and <b>Conditions/Doctors</b> auto-adjust.',
          tabs:{symptoms:'Symptoms',causes:'Causes',firstaid:'First aid',otc:'OTC',rx:'Prescription',rehab:'Rehab / Prevention',myths:'Myths vs Facts',faq:'FAQ',dx:'Conditions (beta)',docs:'Doctors'},
          symptoms_head:'Symptoms', urgent_head:'When to worry (red flags)',
          risk:'Risk:', risk_low:'low', risk_mid:'moderate', risk_high:'high',
          urgent_strip:'Alarm signs? <strong>Don’t wait.</strong>', call_112:'Call 112',
          hint:'You selected symptoms. See hints in <strong>Conditions</strong> or open <strong>Doctors</strong>.',
          hint_btn_dx:'Conditions', hint_btn_docs:'Doctors',
          badge_sor:'urgent ER', badge_poz:'GP', badge_doc:'GP/specialist',
          crumbs_details:'Details'}
    };

    /* --- minimalne dane demonstracyjne (wystarczają do działania UI) --- */
    const BASE={pl:{rehabCommon:["Sen 7–9 h","Nawodnienie","Lekka aktywność"],
                    otcPain:[{t:"Paracetamol — ból/gorączka",audience:"all"},{t:"Ibuprofen — dorośli",audience:"adult"}],
                    urgentCommon:["Utrata przytomności","Duszność","Krwawienie nie do opanowania"]},
                en:{rehabCommon:["Sleep 7–9 h","Hydration","Light activity"],
                    otcPain:[{t:"Paracetamol — pain/fever",audience:"all"},{t:"Ibuprofen — adults",audience:"adult"}],
                    urgentCommon:["Loss of consciousness","Dyspnea","Uncontrolled bleeding"]}};

   const CONTENT_PL={
  glowa:{
    label:"Głowa (ból)",
    symptoms:[
      "Ucisk obustronny","Pulsujący jednostronny","Nadwrażliwość na światło",
      "Nudności/wymioty","Aura (mroczki, błyski)","Ból przy wysiłku","Nasilenie przy schylaniu"
    ],
    causes:[
      "Ból napięciowy (stres, brak snu, odwodnienie)",
      "Migrena (czasem z aurą)",
      "Zatokowy (zapalny, alergiczny)",
      "Odwodnienie / kofeinowy withdrawal",
      "Nadciśnienie (ból potylicy)",
      "Bruksizm / napięcie karku",
      "Polekowy ból głowy (nadużycie NLPZ)"
    ],
    firstaid:[
      "Nawodnienie, lekki posiłek",
      "Cisza, przyciemnione pomieszczenie",
      "Chłodny okład na czoło/kark",
      "Delikatna mobilizacja karku/rozluźnienie barków",
      "Higiena snu (stałe pory, ekran off ≥1h przed snem)"
    ],
    otc:[
      {t:"Paracetamol — ból/gorączka",audience:"all"},
      {t:"Ibuprofen — dorośli (jeśli brak przeciwwskazań)",audience:"adult"},
      {t:"Naproksen — dorośli (doraźnie)",audience:"adult"},
      {t:"Kofeina w połączeniu z analgetykiem (epizodycznie)",audience:"adult"},
      {t:"Aerozole soli morskiej przy podejrzeniu zatok",audience:"all"}
    ],
    rx:[
      "Tryptany w migrenie (np. sumatryptan)",
      "Profilaktyka migreny (np. beta-bloker, topiramat — decyzja lekarza)",
      "Donosowe GKS przy zapaleniu zatok (krótkie kursy)",
      "Leczenie nadciśnienia wg zaleceń"
    ],
    rehab:[
      "Regularny sen 7–9 h, stałe pory",
      "Codzienne nawodnienie 30–35 ml/kg",
      "Ćwiczenia rozciągające kark i obręcz barkową",
      "Ograniczenie ekranów i migających świateł",
      "Dzienniczek bólów (wyzwalacze: stres, głód, odwodnienie)"
    ],
    urgent:[
      "Nagły „najgorszy w życiu” ból",
      "Gorączka + sztywność karku",
      "Zaburzenia neurologiczne (niedowład, bełkotliwa mowa, drgawki)",
      "Uraz głowy z utratą przytomności",
      "Nowy ból u ciężarnej lub w połogu",
      "…oraz: Utrata przytomności / Duszność / Krwawienie nie do opanowania"
    ],
    myths:[
      {m:"Antybiotyk pomaga na ból głowy",f:"Większość bólów nie ma podłoża bakteryjnego."},
      {m:"Kawa zawsze szkodzi przy migrenie",f:"U części osób umiarkowana kofeina łagodzi napad (u innych nasila)."},
      {m:"Migrena to „zwykły ból”",f:"To choroba neurologiczna, może wymagać leczenia profilaktycznego."}
    ],
    faq:[
      {q:"Kiedy do lekarza?",a:"Gdy ból nowy/silny, z czerwonymi flagami, po urazie, w ciąży lub gdy doraźne leczenie nie pomaga."},
      {q:"Co z lekami bez recepty?",a:"Stosuj doraźnie. Jeśli potrzebujesz częściej niż 10 dni/mies., skonsultuj nawyki i leczenie z lekarzem."},
      {q:"Czy obrazowanie (TK/MR) zawsze potrzebne?",a:"Nie. W typowych napięciowych/migrenowych bólach bez alarmów — zwykle nie."}
    ]
  },

  nos:{
    label:"Nos / Zatoki",
    symptoms:[
      "Katar wodnisty","Zatkanie nosa","Ból/ucisk w okolicy zatok",
      "Kichanie/świąd (alergia)","Gęsta wydzielina","Krwawienie z nosa"
    ],
    causes:[
      "Nieżyt nosa (infekcyjny lub alergiczny)",
      "Zapalenie zatok (ostre/podostre)",
      "Przerost małżowin / skrzywienie przegrody",
      "Polekowy nieżyt (nadużywanie kropli obkurczających)"
    ],
    firstaid:[
      "Płukanie izotoniczne NaCl / woda morska",
      "Nawilżanie powietrza, picie płynów",
      "Inhalacje parowe (ostrożnie), ciepłe okłady na zatoki",
      "Unikanie dymu/pyłów/alergenów"
    ],
    otc:[
      {t:"Sól morska / izotoniczny NaCl",audience:"all"},
      {t:"Ksylometazolina/oksymetazolina — ≤3–5 dni",audience:"adult"},
      {t:"Leki przeciwhistaminowe (alergia)",audience:"adult"},
      {t:"Ibuprofen/paracetamol na ból",audience:"all"}
    ],
    rx:[
      "Donosowe GKS (alergia, przewlekły nieżyt)",
      "Antybiotyk przy potwierdzonej bakteryjnej zap. zatok",
      "Immunoterapia swoista (alergie) — laryngolog/alergolog"
    ],
    rehab:[
      "Higiena nosa: płukanie, krótkie kuracje kropli",
      "Unikanie spustów alergicznych, filtracja powietrza",
      "Nawodnienie i sen"
    ],
    urgent:[
      "Krwawienie z nosa >20 min mimo ucisku",
      "Gorączka, obrzęk twarzy, nasilenie bólu z zatok",
      "Zaburzenia widzenia, silny ból oka/czoła",
      "Objawy ogólnoustrojowe (u dziecka/ciężarnej — pilnie)"
    ],
    myths:[
      {m:"Im mocniejsze krople, tym lepiej",f:"Nadużywanie obkurczających nasila obrzęk (odbicie)."},
      {m:"Zielony katar = koniecznie antybiotyk",f:"Kolor nie przesądza o etiologii bakteryjnej."}
    ],
    faq:[
      {q:"Kiedy antybiotyk na zatoki?",a:"Gdy lekarz potwierdzi bakteryjne zapalenie (gorączka, silny ból, objawy >10 dni)."},
      {q:"Jak tamować krwawienie?",a:"Uciśnij skrzydełka nosa 10–15 min, pochyl głowę do przodu, zimny okład na nasadę."}
    ]
  },

  klatka:{
    label:"Klatka piersiowa",
    symptoms:[
      "Ucisk w klatce","Pieczenie (zgaga)","Kłujący ból przy ruchu",
      "Duszność","Kołatanie serca","Ból promieniujący do lewej ręki/szczęki"
    ],
    causes:[
      "Mięśniowo-szkieletowy (przeciążenie, stres)",
      "Refluks/zgaga (GERD)",
      "Choroba wieńcowa / OZW (nagłe)",
      "Zapalenie opłucnej/kaszel infekcyjny",
      "Lęk/panika (somatyzacja)"
    ],
    firstaid:[
      "Przerwij wysiłek, odpocznij",
      "Sprawdź okoliczności: posiłek, stres, wysiłek",
      "Unikaj leżenia płasko przy zgadze (podniesione wezgłowie)",
      "Ciepły okład na napięte mięśnie, delikatne rozciąganie"
    ],
    otc:[
      {t:"Leki na refluks: alginiany/antacida",audience:"all"},
      {t:"Ibuprofen/naproksen — ból mięśniowo-kostny (jeśli brak przeciwwskazań)",audience:"adult"},
      {t:"Maści/żele rozgrzewające na mięśnie",audience:"adult"}
    ],
    rx:[
      "Nitrogliceryna wg zaleceń (bóle wieńcowe — SOR jeśli nowe/nasilone)",
      "PPI (inhibitory pompy protonowej) przy GERD",
      "Leczenie kardiologiczne przy rozpoznaniu choroby wieńcowej",
      "Leki przeciwarytmiczne wg EKG i rozpoznania"
    ],
    rehab:[
      "Redukcja masy ciała, unikanie późnych ciężkich posiłków",
      "Modyfikacja diety (kawa/alkohol/pikantne — według tolerancji)",
      "Regularny, spokojny trening aerobowy (po ocenie lekarskiej)",
      "Techniki relaksacyjne/oddechowe"
    ],
    urgent:[
      "Ucisk w klatce + duszność/zimny pot/nudności — podejrzenie zawału",
      "Silna duszność spoczynkowa, sinica",
      "Nagły kłujący ból z krwiopluciem (ZP) — pilnie",
      "Utrata przytomności/kołatanie z omdleniem"
    ],
    myths:[
      {m:"Skoro mija po antacidzie, to serce zdrowe",f:"GERD i choroba wieńcowa mogą współistnieć — objawy wieńcowe wymagają oceny."},
      {m:"Młodzi nie mają zawałów",f:"Ryzyko mniejsze, ale zawały u młodych się zdarzają (np. palenie, dyslipidemia)."}
    ],
    faq:[
      {q:"Kiedy 112/SOR?",a:"Nowy/silny ucisk, duszność, zimny pot, promieniowanie do ręki/szczęki, omdlenie — dzwoń 112."},
      {q:"Badania na początek?",a:"Lekarz zdecyduje: EKG, troponiny, RTG klp, próby refluksowe — zależnie od obrazu."}
    ]
  },

  brzuch:{
    label:"Brzuch",
    symptoms:[
      "Ból kurczowy/kolkowy","Wzdęcia","Biegunka/zaparcie",
      "Zgaga/uczucie pieczenia","Nudności/wymioty","Twardy brzuch"
    ],
    causes:[
      "Niestrawność/IRQ/IBS","Zatrucie pokarmowe",
      "Wirusowe zapalenie żołądka i jelit",
      "Refluks/choroba wrzodowa",
      "Kolka nerkowa/wątrobowa (promieniowanie)",
      "Ciąża: do oceny lekarskiej (u kobiet w wieku rozrodczym)"
    ],
    firstaid:[
      "Nawadnianie małymi porcjami, elektrolity",
      "Lekka dieta (BRAT/łatwostrawna) 24–48 h",
      "Ciepły okład na brzuch przy kurczach",
      "Odpoczynek; obserwacja stolca/gazów"
    ],
    otc:[
      {t:"Drotaweryna na skurcze (dorośli)",audience:"adult"},
      {t:"Probiotyk/elektrolity przy biegunce",audience:"all"},
      {t:"Inhibitory pompy protonowej na zgagę (krótko)",audience:"adult"},
      {t:"Loperamid (ostra biegunka bez krwi/gorączki)",audience:"adult"},
      {t:"Symetykon na wzdęcia",audience:"all"}
    ],
    rx:[
      "PPI/H2 wg wskazań (refluks/WRZ)",
      "Eradykacja H. pylori (po potwierdzeniu)",
      "Leki prokinetyczne wg wskazań",
      "Antybiotykoterapia przy bakteryjnych zakażeniach — decyzja lekarska"
    ],
    rehab:[
      "Dziennik żywieniowy, low-FODMAP (próba, pod kontrolą)",
      "Ruch: 20–30 min dziennie, praca z oddechem",
      "Higiena snu i stresu (relaks, CBT przy IBS)"
    ],
    urgent:[
      "Twardy „deskowaty” brzuch, silny stały ból",
      "Krew w stolcu/wymiotach, czarne stolce",
      "Wysoka gorączka, odwodnienie, bez oddawania gazów/stolca",
      "Ból w prawym dole z gorączką (wyrostek) — pilnie",
      "U kobiet: silny ból + opóźnienie miesiączki (ciąża ektopowa?)"
    ],
    myths:[
      {m:"Przy bólu brzucha najlepiej nic nie jeść kilka dni",f:"Krótka dieta lekkostrawna ok, ale długie głodówki szkodzą."},
      {m:"Każda biegunka = antybiotyk",f:"Większość ostrych biegunek to wirusy — nawodnienie najważniejsze."}
    ],
    faq:[
      {q:"Kiedy do lekarza pilnie?",a:"Gdy ból narasta/utrzymuje się >24–48 h, pojawia się krew, wysoka gorączka, odwodnienie lub „twardy brzuch”."},
      {q:"Czy badania z krwi pomogą?",a:"Tak, ale decyzja zależy od obrazu: morfologia, CRP, elektrolity; czasem USG/TK."}
    ]
  },

  serce:{
    label:"Serce / Kołatania",
    symptoms:[
      "Kołatanie (przyspieszone/nieregularne)","Zawroty głowy",
      "Duszność wysiłkowa","Uczucie „przeskakiwania” serca","Omdlenie"
    ],
    causes:[
      "Stres/odwodnienie/kofeina/alkohol",
      "Niedobór snu, infekcja, gorączka",
      "Zaburzenia rytmu (np. nadkomorowe, AF)",
      "Niedokrwistość/tyreotoksykoza (wtórne przyczyny)"
    ],
    firstaid:[
      "Usiądź/połóż się, oddychaj spokojnie",
      "Nawodnienie; ogranicz kofeinę/alkohol",
      "Manewry wagotoniczne przy SVT (wg zaleceń)"
    ],
    otc:[
      {t:"Elektrolity/nawodnienie",audience:"all"},
      {t:"Preparaty magnezu/potasu (jeśli niedobór)",audience:"adult"}
    ],
    rx:[
      "EKG/Holter — dobór leczenia po rozpoznaniu",
      "Beta-blokery/antyarytmiczne wg wskazań",
      "Antykoagulacja przy AF wg skali CHA₂DS₂-VASc",
      "Leczenie przyczynowe (np. tarczyca, anemia)"
    ],
    rehab:[
      "Higiena snu, redukcja stresu",
      "Umiarkowana aktywność aerobowa (po ocenie)",
      "Ograniczenie używek, kontrola elektrolitów"
    ],
    urgent:[
      "Kołatanie z omdleniem lub ból w klatce — pilnie",
      "Duszność spoczynkowa, sinica",
      "Tachykardia >150/min utrzymująca się mimo odpoczynku",
      "Objawy udaru (AF + neurologiczne) — 112"
    ],
    myths:[
      {m:"Skoro mam kołatania, na pewno groźna arytmia",f:"Często to łagodne pobudzenia — ale wymaga oceny EKG."},
      {m:"Magnez zawsze rozwiąże problem",f:"Pomaga przy niedoborach, nie leczy arytmii strukturalnych."}
    ],
    faq:[
      {q:"Jak się przygotować do wizyty?",a:"Lista epizodów (kiedy, po czym, ile trwa), leki, choroby, pomiary tętna/ciśnienia."},
      {q:"Czy smartwatch wystarczy do diagnozy?",a:"Może wychwycić epizod, ale diagnozę stawia się na podstawie EKG/Holtera."}
    ]
  }
};

const CONTENT_EN={
  glowa:{
    label:"Headache",
    symptoms:[
      "Bilateral pressing","Unilateral throbbing","Photophobia",
      "Nausea/vomiting","Aura (scotomas, flashes)","Exertional headache","Worse on bending"
    ],
    causes:[
      "Tension-type (stress, poor sleep, dehydration)",
      "Migraine (sometimes with aura)",
      "Sinus-related headache",
      "Dehydration / caffeine withdrawal",
      "Hypertensive headache",
      "Bruxism / neck tension",
      "Medication-overuse headache"
    ],
    firstaid:[
      "Hydration and light snack",
      "Quiet, dark room",
      "Cool pack on forehead/neck",
      "Gentle neck/shoulder mobility",
      "Sleep hygiene (fixed hours, screen off ≥1h)"
    ],
    otc:[
      {t:"Paracetamol/acetaminophen — pain/fever",audience:"all"},
      {t:"Ibuprofen — adults (if no contraindications)",audience:"adult"},
      {t:"Naproxen — adults (short-term)",audience:"adult"},
      {t:"Caffeine + analgesic (episodically)",audience:"adult"},
      {t:"Saline sprays for suspected sinus issues",audience:"all"}
    ],
    rx:[
      "Triptans for migraine",
      "Migraine prophylaxis (e.g., beta-blocker, topiramate — physician decision)",
      "Intranasal steroids for sinusitis (short courses)",
      "Antihypertensive therapy as indicated"
    ],
    rehab:[
      "Regular sleep 7–9 h",
      "Daily hydration 30–35 ml/kg",
      "Neck/shoulder stretches",
      "Limit flickering lights/screens",
      "Headache diary (triggers)"
    ],
    urgent:[
      "Sudden “worst-ever” headache",
      "Fever + neck stiffness",
      "Neurologic deficits (weakness, speech issues, seizures)",
      "Head injury with LOC",
      "New headache in pregnancy/postpartum",
      "…and: Loss of consciousness / Dyspnea / Uncontrolled bleeding"
    ],
    myths:[
      {m:"Antibiotics fix headaches",f:"Most headaches are non-bacterial."},
      {m:"Caffeine always worsens migraine",f:"Moderate caffeine helps some, worsens others."},
      {m:"Migraine is just a strong headache",f:"It’s a neurologic disorder; prevention may be needed."}
    ],
    faq:[
      {q:"When to see a doctor?",a:"Severe/new headache, red flags, after head injury, during pregnancy, or if OTC fails."},
      {q:"OTC use?",a:"Use occasionally. If >10 days/month — review with a clinician."},
      {q:"Do I need imaging?",a:"Not routinely for typical tension/migraine without alarms."}
    ]
  },

  nos:{
    label:"Nose / Sinuses",
    symptoms:[
      "Watery runny nose","Nasal blockage","Sinus pain/pressure",
      "Sneezing/itch (allergy)","Thick discharge","Nosebleed"
    ],
    causes:[
      "Rhinitis (infectious or allergic)",
      "Sinusitis (acute/subacute)",
      "Turbinate hypertrophy / septal deviation",
      "Rhinitis medicamentosa (decongestant overuse)"
    ],
    firstaid:[
      "Isotonic saline rinses",
      "Humidify air, drink fluids",
      "Steam inhalation (careful), warm packs over sinuses",
      "Avoid smoke/dust/allergens"
    ],
    otc:[
      {t:"Sea water / isotonic saline",audience:"all"},
      {t:"Topical decongestants — ≤3–5 days",audience:"adult"},
      {t:"Antihistamines for allergy",audience:"adult"},
      {t:"Ibuprofen/paracetamol for pain",audience:"all"}
    ],
    rx:[
      "Intranasal steroids (allergy, chronic rhinitis)",
      "Antibiotics for confirmed bacterial sinusitis",
      "Allergen immunotherapy — ENT/allergist"
    ],
    rehab:[
      "Nasal hygiene and short decongestant courses",
      "Allergen avoidance, air filtration",
      "Hydration and sleep"
    ],
    urgent:[
      "Nosebleed >20 min despite pressure",
      "Fever, facial swelling, worsening sinus pain",
      "Visual disturbance, severe eye/forehead pain",
      "Systemic symptoms (child/pregnancy — urgent)"
    ],
    myths:[
      {m:"Stronger drops work better",f:"Overuse rebounds and worsens blockage."},
      {m:"Green mucus means bacteria",f:"Color alone doesn’t prove bacterial cause."}
    ],
    faq:[
      {q:"When antibiotics for sinuses?",a:"When a clinician confirms bacterial sinusitis (fever, severe pain, >10 days)."},
      {q:"How to stop a nosebleed?",a:"Pinch soft nose 10–15 min, lean forward, cold pack on the bridge."}
    ]
  },

  klatka:{
    label:"Chest pain",
    symptoms:[
      "Chest pressure","Heartburn","Sharp pain with movement",
      "Shortness of breath","Palpitations","Pain to left arm/jaw"
    ],
    causes:[
      "Musculoskeletal strain",
      "Reflux/GERD",
      "Coronary ischemia / ACS (acute)",
      "Pleurisy/infectious cough",
      "Anxiety/panic with somatic symptoms"
    ],
    firstaid:[
      "Stop exertion, rest",
      "Review triggers: meal, stress, effort",
      "Elevate head when lying (GERD)",
      "Warm pack, gentle stretch if musculoskeletal"
    ],
    otc:[
      {t:"Reflux relief: alginates/antacids",audience:"all"},
      {t:"Ibuprofen/naproxen for MSK pain (if suitable)",audience:"adult"},
      {t:"Topical warming gels",audience:"adult"}
    ],
    rx:[
      "Nitroglycerin per plan (suspected angina — ER if new/worsening)",
      "PPIs for GERD",
      "Cardiology therapy for CAD",
      "Antiarrhythmics as indicated"
    ],
    rehab:[
      "Weight management, avoid large late meals",
      "Diet tweaks (coffee/alcohol/spicy as tolerated)",
      "Regular light aerobic training (post evaluation)",
      "Relaxation/controlled breathing"
    ],
    urgent:[
      "New/severe pressure + dyspnea/cold sweat/nausea — call emergency",
      "Rest dyspnea, cyanosis",
      "Sudden sharp pain with hemoptysis (PE) — urgent",
      "Syncope with palpitations"
    ],
    myths:[
      {m:"If antacid helps, heart is fine",f:"GERD can coexist with CAD — ischemic signs need assessment."},
      {m:"Young people don’t get heart attacks",f:"Less common but possible; risk factors matter."}
    ],
    faq:[
      {q:"When to call 112/911?",a:"Severe/new pressure, dyspnea, cold sweat, radiation to arm/jaw, syncope — call immediately."},
      {q:"Initial tests?",a:"Clinician may order ECG, troponins, CXR, reflux workup — based on presentation."}
    ]
  },

  brzuch:{
    label:"Abdomen",
    symptoms:[
      "Crampy/colicky pain","Bloating","Diarrhea/constipation",
      "Heartburn/burning","Nausea/vomiting","Rigid abdomen"
    ],
    causes:[
      "Indigestion/IBS","Foodborne illness",
      "Viral gastroenteritis","GERD/ulcer disease",
      "Renal/biliary colic","Pregnancy-related pain (needs assessment)"
    ],
    firstaid:[
      "Oral rehydration in small sips",
      "Light diet 24–48 h",
      "Warm pack for cramps",
      "Rest; monitor stool/gas"
    ],
    otc:[
      {t:"Drotaverine for cramps (adults)",audience:"adult"},
      {t:"Probiotics/electrolytes for diarrhea",audience:"all"},
      {t:"Short course PPI/H2 for heartburn",audience:"adult"},
      {t:"Loperamide (no blood/fever)",audience:"adult"},
      {t:"Simethicone for bloating",audience:"all"}
    ],
    rx:[
      "PPI/H2 as indicated",
      "H. pylori eradication (if positive)",
      "Prokinetics as indicated",
      "Antibiotics for confirmed bacterial causes — clinician decision"
    ],
    rehab:[
      "Food diary; low-FODMAP trial (guided)",
      "Daily light activity; breathing work",
      "Sleep and stress hygiene (CBT can help in IBS)"
    ],
    urgent:[
      "Board-like rigid abdomen, persistent severe pain",
      "Blood in stool/emesis, black stools",
      "High fever, dehydration, no stool/gas",
      "RLQ pain + fever (appendicitis) — urgent",
      "Women: severe pain + missed period (ectopic?)"
    ],
    myths:[
      {m:"Best to fast for days",f:"Short light diet is fine; long fasting can harm."},
      {m:"All diarrhea needs antibiotics",f:"Most acute cases are viral — rehydration is key."}
    ],
    faq:[
      {q:"When urgent care?",a:"Persistent/worsening pain >24–48 h, blood, high fever, dehydration or rigid abdomen."},
      {q:"Will blood tests help?",a:"Often yes, but it depends; sometimes US/CT needed — clinician decides."}
    ]
  },

  serce:{
    label:"Heart / Palpitations",
    symptoms:[
      "Fast/irregular heartbeat","Dizziness",
      "Exertional dyspnea","Skipped beats","Fainting"
    ],
    causes:[
      "Stress/dehydration/caffeine/alcohol",
      "Sleep deficit, infection, fever",
      "Arrhythmias (e.g., SVT, AF)",
      "Secondary causes (anemia, hyperthyroidism)"
    ],
    firstaid:[
      "Sit/lie down, slow breathing",
      "Hydration; limit caffeine/alcohol",
      "Vagal maneuvers in SVT (as advised)"
    ],
    otc:[
      {t:"Electrolytes/hydration",audience:"all"},
      {t:"Magnesium/potassium (if deficient)",audience:"adult"}
    ],
    rx:[
      "ECG/Holter — therapy per diagnosis",
      "Beta-blockers/antiarrhythmics as indicated",
      "Anticoagulation for AF per CHA₂DS₂-VASc",
      "Treat underlying causes (thyroid, anemia)"
    ],
    rehab:[
      "Sleep hygiene and stress reduction",
      "Moderate aerobic activity (post assessment)",
      "Avoid stimulants; monitor electrolytes"
    ],
    urgent:[
      "Palpitations with syncope or chest pain — urgent",
      "Rest dyspnea, cyanosis",
      "Sustained tachycardia >150/min",
      "Stroke symptoms (AF + neuro deficits) — call emergency"
    ],
    myths:[
      {m:"Palpitations always mean dangerous arrhythmia",f:"Often benign ectopy — but needs ECG assessment."},
      {m:"Magnesium cures all palpitations",f:"Helps if deficient; not a fix for structural arrhythmias."}
    ],
    faq:[
      {q:"How to prep for a visit?",a:"Note episodes (when, trigger, duration), meds, conditions, HR/BP readings."},
      {q:"Is smartwatch enough?",a:"It can capture episodes; diagnosis still relies on ECG/Holter."}
    ]
  }
};
    const qs=new URLSearchParams(location.search);
    const RAW_TYP=(qs.get('typ')||'kobieta').toLowerCase();
    const RAW_CZESC=(qs.get('czesc')||'glowa').toLowerCase();
    const RAW_LABEL=(qs.get('label')||RAW_CZESC).toString();
    const ALIAS={'oko':'glowa','klatka-piersiowa':'klatka','zoladek':'brzuch'};
    const TYP=RAW_TYP, CZESC=(ALIAS[RAW_CZESC]||RAW_CZESC), LABEL=RAW_LABEL;

    /* --- zastosowanie i18n do UI (tylko nagłówki/teksty, nie listy) --- */
    (function applyI18N(){
      const d=I18N[L()];
      // breadcrumb
      const typMap = L()==='en' ? {kobieta:'Woman',mezczyzna:'Man',dziecko:'Child'} : {kobieta:'Kobieta',mezczyzna:'Mężczyzna',dziecko:'Dziecko'};
      document.getElementById('crumb-typ').textContent=(typMap[TYP]||TYP);
      document.getElementById('crumb-label').textContent=d.crumbs_details;

      // hero
      const note=document.querySelector('.hero-note'); if(note) note.innerHTML=d.hero_note;
      const leg=document.querySelector('.legend'); if(leg) leg.innerHTML=d.legend;

      // tabs
      const tab=(v,txt)=>{ const el=document.querySelector(`.tab[data-variant="${v}"]`); if(el) el.textContent=txt; };
      Object.entries(d.tabs).forEach(([k,v])=>tab(k,v));

      // headings
      const setTxt=(sel,txt)=>{ const el=document.querySelector(sel); if(el) el.textContent=txt; };
      setTxt('#h-obj', d.symptoms_head);
      setTxt('.subhead', d.urgent_head);
      setTxt('#h-cause', d.tabs.causes);
      setTxt('#h-aid', d.tabs.firstaid);
      setTxt('#h-otc', d.tabs.otc);
      setTxt('#h-rx', d.tabs.rx);
      setTxt('#h-rehab', d.tabs.rehab);
      setTxt('#h-mity', d.tabs.myths);
      setTxt('#h-faq', d.tabs.faq);
      setTxt('#h-dx', d.tabs.dx);
      setTxt('#h-docs', d.tabs.docs);

      // labels
      const lab=document.querySelector('.langpick label'); if(lab) lab.textContent=d.lang_label;

      // back + urgent strip + risk caption
      const back=document.getElementById('bhReturnTop'); if(back) back.textContent=d.back;
      const strip=document.getElementById('urgent-strip'); if(strip) strip.innerHTML=`${d.urgent_strip} <a class="cta" id="cta-112" href="tel:112" aria-label="${d.call_112}">${d.call_112}</a>`;
      const riskWrap=document.querySelector('.risk-mini small');
      if(riskWrap){
        const lbl=document.getElementById('risk-label')||document.createElement('span');
        lbl.id='risk-label'; lbl.textContent=d.risk_low;
        riskWrap.textContent=d.risk+' '; riskWrap.appendChild(lbl);
      }
    })();

    /* --- wybór contentu wg języka i części ciała --- */
    const CONTENT=(L()==='en')?CONTENT_EN:CONTENT_PL;
    const entry = CONTENT[CZESC] || CONTENT.glowa;
    // --- gender-specific filter for 'strefa' (intimate area), non-invasive ---
    (function(){
      if(CZESC!=='strefa') return;
      const isEN = (typeof L==='function' ? L()==='en' : (document.documentElement.lang||'pl')==='en');
      const prefW = isEN ? 'WOMEN:' : 'KOBIETA:';
      const prefM = isEN ? 'MEN:'   : 'MĘŻCZYZNA:';
      const prefDrop = new RegExp('^'+(isEN?'(?:WOMEN|MEN):':'(?:KOBIETA|MĘŻCZYZNA):')+'\s*');
      const who = (TYP==='kobieta') ? prefW : (TYP==='mezczyzna' ? prefM : null);
      function pick(arr){
        if(!Array.isArray(arr)) return arr;
        if(!who) return arr; // dziecko/other — zostaw bez zmian
        return arr.filter(x=>typeof x==='string' && x.indexOf(who)===0).map(x=>x.replace(prefDrop,''));
      }
      // twórz płytką kopię i podmień listy
      entry.symptoms = pick(entry.symptoms);
      entry.urgent   = pick(entry.urgent);
      entry.causes   = pick(entry.causes);
      entry.firstaid = pick(entry.firstaid);
      entry.otc      = pick(entry.otc);
      entry.rx       = pick(entry.rx);
      entry.rehab    = pick(entry.rehab);
      entry.myths    = pick(entry.myths);
      entry.faq      = pick(entry.faq);
    })();

    document.getElementById('label-text').innerHTML='<b>'+(entry.label||LABEL)+'</b> • '+TYP;

    /* --- helpers / scoring --- */
    const isChild=(TYP==='dziecko');
    const allowItem=(it)=> typeof it==='string' ? true : (isChild ? (it.audience!=='adult') : (it.audience!=='child'));
    const textOf =(it)=> typeof it==='string' ? it : it.t;

    const HIGH_PL=["duszność","sinica","utrata przytomności","krwawienie","twardy brzuch","najgorszy ból"];
    const MID_PL =["gorączka","sztywność karku","silny ból"];
    const HIGH_EN=["dyspnea","cyanosis","loss of consciousness","bleeding","rigid abdomen","thunderclap"];
    const MID_EN =["fever","neck stiffness","severe pain"];
    const phrases=()=> L()==='en'?{H:HIGH_EN,M:MID_EN}:{H:HIGH_PL,M:MID_PL};
    function weightFor(text,bucket){
      const s=(text||'').toLowerCase();
      if(bucket==='urgent') return 35;
      const P=phrases();
      if(P.H.some(k=>s.includes(k))) return 20;
      if(P.M.some(k=>s.includes(k))) return 10;
      if(bucket==='symptoms') return 6;
      return 0;
    }

    /* --- renderery list --- */
    let selectedWeights=0, selectedCount=0;
    function renderListInteractive(id,arr,bucket){
      const ul=document.getElementById(id); ul.innerHTML='';
      (arr||[]).filter(allowItem).map(textOf).forEach(txt=>{
        const li=document.createElement('li');
        const cb=document.createElement('span'); cb.className='cb'; cb.setAttribute('role','checkbox'); cb.setAttribute('aria-checked','false');
        const w=weightFor(txt,bucket); li.dataset.weight=w;
        li.appendChild(cb); li.appendChild(document.createTextNode(txt));
        function toggle(){
          const on=cb.classList.toggle('checked'); li.classList.toggle('li-checked',on); cb.setAttribute('aria-checked',on?'true':'false');
          selectedWeights += on? +w : -w; selectedCount += on? 1 : -1; updateRisk(); document.dispatchEvent(new CustomEvent('bh:symptoms-changed'));
        }
        li.addEventListener('click',e=>{ if(e.target!==cb) toggle(); });
        cb.addEventListener('click',e=>{ e.stopPropagation(); toggle(); });
        ul.appendChild(li);
      });
    }
    function renderListPlain(id,arr){
      const ul=document.getElementById(id); ul.innerHTML='';
      (arr||[]).filter(allowItem).map(textOf).forEach(txt=>{
        const li=document.createElement('li'); const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        li.appendChild(cb); li.appendChild(document.createTextNode(txt)); ul.appendChild(li);
      });
    }
    function fillPairs(id,arr){
      const ul=document.getElementById(id); ul.innerHTML='';
      (arr||[]).forEach(x=>{
        const li=document.createElement('li'); const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        li.appendChild(cb);
        const isEn=L()==='en';
        const m=document.createElement('div'); m.innerHTML='<strong>'+(isEn?'Myth:':'Mit:')+'</strong> '+(x.m||'—');
        const f=document.createElement('div'); f.innerHTML='<strong>'+(isEn?'Fact:':'Fakt:')+'</strong> '+(x.f||'—');
        li.appendChild(m); li.appendChild(f); ul.appendChild(li);
      });
    }
    function fillFAQ(id,arr){
      const ul=document.getElementById(id); ul.innerHTML='';
      (arr||[]).forEach(x=>{
        const li=document.createElement('li'); const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        li.appendChild(cb);
        li.innerHTML+='<strong>'+(x.q|| (L()==='en'?'Question':'Pytanie'))+'</strong><div style="margin-top:4px;color:#b8c2e0">'+(x.a|| (L()==='en'?'Answer':'Odpowiedź'))+'</div>';
        ul.appendChild(li);
      });
    }

    renderListInteractive('symp-common',entry.symptoms,'symptoms');
    renderListInteractive('urgent',entry.urgent||[],'urgent');
    renderListPlain('causes',entry.causes||[]);
    renderListPlain('firstaid',entry.firstaid||[]);
    renderListPlain('meds-otc',entry.otc||[]);
    renderListPlain('meds-rx',entry.rx||[]);
    renderListPlain('rehab',entry.rehab||[]);
    fillPairs('myths',entry.myths||[]);
    fillFAQ('faq',entry.faq||[]);

    function updateRisk(){
      const d=I18N[L()];
      const c=document.getElementById('risk-cursor-card');
      const lbl=document.getElementById('risk-label');
      const val=Math.max(0,Math.min(100,selectedWeights));
      if(c) c.style.left=val+'%';
      if(lbl){ let t=d.risk_low; if(val>=70) t=d.risk_high; else if(val>=40) t=d.risk_mid; lbl.textContent=t; }
      const hint=document.getElementById('dx-hint');
      hint.classList.toggle('show',selectedCount>0);
    }
    updateRisk();

    /* --- tabs --- */
    const tabs=[...document.querySelectorAll('.tab')];
    const panels=[...document.querySelectorAll('.card[role="tabpanel"]')];
    function showPanel(sel){
      panels.forEach(p=>p.setAttribute('aria-hidden',('#'+p.id)===sel?'false':'true'));
      tabs.forEach(t=>t.setAttribute('aria-selected', t.getAttribute('data-target')===sel?'true':'false'));
      document.querySelector(sel)?.scrollIntoView({behavior:'smooth',block:'start'});
    }
    tabs.forEach(t=>t.addEventListener('click',()=>showPanel(t.getAttribute('data-target'))));

    /* --- Dx / Doctors --- */
    function gather(){ const from=(id)=>[...document.querySelectorAll('#'+id+' li.li-checked')].map(li=>li.textContent.toLowerCase()); return {symp:from('symp-common'),urgent:from('urgent')}; }
    const DX_RULES={
      glowa:[
        {pl:{name:"Ból napięciowy",advice:"POZ / higiena snu"},en:{name:"Tension-type headache",advice:"GP / sleep hygiene"},keys:["ucisk","napięcie","bilateral"],badge:"poz"},
        {pl:{name:"Migrena",advice:"POZ; przy nawrotach neurolog"},en:{name:"Migraine",advice:"GP; neurologist if recurrent"},keys:["pulsujący","światło"],badge:"poz"},
        {pl:{name:"Zapalenie opon — pilnie",advice:"SOR/112"},en:{name:"Meningitis — urgent",advice:"ER/112"},keys:["sztywność karku","gorączka","najgorszy ból"],badge:"sor"}
      ],
      nos:[
        {pl:{name:"Nieżyt nosa",advice:"POZ / objawowo, sól"},en:{name:"Rhinitis",advice:"GP / symptomatic, saline"},keys:["katar","zatkanie"],badge:"poz"},
        {pl:{name:"Zapalenie zatok",advice:"POZ; ew. antybiotyk"},en:{name:"Sinusitis",advice:"GP; consider antibiotics"},keys:["ból zatok","gorączka"],badge:"poz"}
      ],
      klatka:[
        {pl:{name:"Refluks",advice:"POZ; dieta, PPI"},en:{name:"Reflux",advice:"GP; diet, PPI"},keys:["zgaga","pieczenie"],badge:"poz"},
        {pl:{name:"OZW/Zawał — pilnie",advice:"SOR/112"},en:{name:"ACS/MI — urgent",advice:"ER/112"},keys:["ucisk","duszność","zimny pot"],badge:"sor"}
      ],
      brzuch:[
        {pl:{name:"Niestrawność/IBS",advice:"POZ; dieta"},en:{name:"Indigestion/IBS",advice:"GP; diet"},keys:["wzdęcia","biegunka","zaparcie"],badge:"poz"},
        {pl:{name:"Ostry brzuch — pilnie",advice:"SOR/112"},en:{name:"Acute abdomen — urgent",advice:"ER/112"},keys:["twardy brzuch","silny ból"],badge:"sor"}
      ],
      serce:[
        {pl:{name:"Zaburzenia rytmu",advice:"POZ → EKG"},en:{name:"Arrhythmias",advice:"GP → ECG"},keys:["kołatanie","zawroty"],badge:"poz"}
      ]
    };
    function computeDx(){
      const {symp,urgent}=gather(); const picked=symp.concat(urgent);
      const rules=DX_RULES[CZESC]||[]; const hits=[];
      const urgentHit = (L()==='en' ? ["dyspnea","cyanosis","loss of consciousness","rigid abdomen","bleeding","thunderclap"]
                                     : ["duszność","sinica","utrata przytomności","twardy brzuch","krwawienie","najgorszy ból"])
                        .some(k=>picked.some(p=>p.includes(k)));
      if(urgentHit) hits.push({_score:999,name:L()==='en'?'Alarm signs':'Objawy alarmowe',advice:L()==='en'?'Call 112 / ER':'Zadzwoń 112 / SOR',badge:'sor',ico:'⚠️',_max:1,_match:[]});
      rules.forEach(r=>{
        const keys=(r.keys||[]).map(k=>String(k).toLowerCase());
        const matched=keys.filter(k=>picked.some(p=>p.includes(k)));
        if(matched.length){
          const meta=L()==='en'?r.en:r.pl;
          hits.push({_score:matched.length,name:meta.name,advice:meta.advice,badge:r.badge,ico:r.badge==='sor'?'⚠️':'🩺',_max:keys.length,_match:matched});
        }
      });
      return hits.length?hits.sort((a,b)=>b._score-a._score).slice(0,5):[{_score:0,name:L()==='en'?'Too little data':'Za mało danych',advice:L()==='en'?'Select symptoms first.':'Najpierw zaznacz objawy.',badge:'poz',ico:'ℹ️',_max:1,_match:[]}];
    }
    function renderDx(){
      const ul=document.getElementById('dx-list'); ul.innerHTML='';
      computeDx().forEach(it=>{
        const li=document.createElement('li');
        const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        const ico=document.createElement('span'); ico.className='dx-ico'; ico.textContent=it.ico||'🩺';
        const text=document.createElement('div'); const matchTxt=it._match?.length?` (${L()==='en'?'hits':'trafienia'}: ${it._match.length})`:''; text.innerHTML=`<strong title="${(it._match||[]).join(', ')}">${it.name}${matchTxt}</strong><div style="color:#b8c2e0;margin-top:4px">${it.advice}</div>`;
        const meta=document.createElement('div'); meta.className='dx-meta';
        const confWrap=document.createElement('div'); confWrap.className='conf-wrap';
        const confBar=document.createElement('div'); confBar.className='conf-bar';
        const ratio=it._max?Math.min(100,Math.round((it._score/it._max)*100)):(it._score>=999?100:0);
        confBar.style.width=ratio+'%'; confWrap.appendChild(confBar);
        const badge=document.createElement('span'); badge.className='dx-badge '+(it.badge==='sor'?'sor':'poz'); badge.textContent=it.badge==='sor'?I18N[L()].badge_sor:I18N[L()].badge_poz;
        meta.appendChild(confWrap); meta.appendChild(badge);
        li.appendChild(cb); li.appendChild(ico); li.appendChild(text); li.appendChild(meta); ul.appendChild(li);
      });
    }
    function computeDocs(){
      const {symp,urgent}=gather(); const picked=symp.concat(urgent);
      const urgentHit=(L()==='en'?["dyspnea","cyanosis","loss of consciousness","rigid abdomen","bleeding","thunderclap"]:["duszność","sinica","utrata przytomności","twardy brzuch","krwawienie","najgorszy ból"]).some(k=>picked.some(p=>p.includes(k)));
      const d=I18N[L()]; const list=[];
      if(urgentHit) list.push({name:L()==='en'?'ER / 112':'SOR / 112',why:L()==='en'?'Red flags — urgent care':'Czerwone flagi — pilnie',badge:'sor'});
      list.push({name:L()==='en'?'GP — family doctor':'POZ — lekarz rodzinny',why:L()==='en'?'First contact, assessment, referrals':'Pierwszy kontakt, ocena, skierowania',badge:'poz'});
      const spec=L()==='en'
        ? {glowa:["Neurologist"],nos:["ENT","Allergist"],klatka:["Cardiologist","Gastroenterologist"],brzuch:["Gastroenterologist"],serce:["Cardiologist"],zeby:["Dentist","Endodontist","Oral & maxillofacial surgeon","Emergency dental service"]}
        : {glowa:["Neurolog"],nos:["Laryngolog","Alergolog"],klatka:["Kardiolog","Gastroenterolog"],brzuch:["Gastroenterolog"],serce:["Kardiolog"],zeby:["Stomatolog (dentysta)","Endodonta","Chirurg stomatologiczny / szczękowo‑twarzowy","Pogotowie stomatologiczne"]};
      (spec[CZESC]||[]).forEach(s=>list.push({name:s,why:L()==='en'?'Relevant specialist':'Specjalista adekwatny',badge:'poz'}));
      return list;
    }
    function renderDocs(){
      const ul=document.getElementById('docs-list'); ul.innerHTML='';
      const d=I18N[L()];
      computeDocs().forEach(it=>{
        const li=document.createElement('li');
        const cb=document.createElement('span'); cb.className='cb'; cb.style.visibility='hidden';
        const t=document.createElement('div'); t.innerHTML=`<strong>${it.name}</strong><div style="color:#b8c2e0;margin-top:4px">${it.why}</div>`;
        const badge=document.createElement('span'); badge.className='doc-badge '+(it.badge==='sor'?'sor':'poz'); badge.textContent=it.badge==='sor'?d.badge_sor:d.badge_doc;
        const right=document.createElement('div'); right.style.marginLeft='auto'; right.appendChild(badge);
        li.appendChild(cb); li.appendChild(t); li.appendChild(right); ul.appendChild(li);
      });
    }

    // spiecie interakcji
    document.addEventListener('bh:symptoms-changed',()=>{ renderDx(); renderDocs(); });
    document.querySelector('[data-variant="dx"]').addEventListener('click',()=>{ renderDx(); showPanel('#s-dx'); });
    document.querySelector('[data-variant="docs"]').addEventListener('click',()=>{ renderDocs(); showPanel('#s-docs'); });

    // hint bind (po rekreacji treści)
    const hintBind=()=>{
      const a=document.getElementById('dx-open'), b=document.getElementById('docs-open');
      if(a) a.onclick=()=>{ renderDx(); showPanel('#s-dx'); };
      if(b) b.onclick=()=>{ renderDocs(); showPanel('#s-docs'); };
    };
    hintBind();
    const mo=new MutationObserver(()=>hintBind());
    mo.observe(document.getElementById('dx-hint'),{childList:true,subtree:true});

    /* --- Back behavior + start at top --- */
    try{ if('scrollRestoration' in history){ history.scrollRestoration='manual'; } }catch(e){}
    window.addEventListener('DOMContentLoaded',()=>{
      window.scrollTo(0,0);
      document.getElementById('bhReturnTop')?.addEventListener('click',()=>{
        if(document.referrer && document.referrer.includes(location.host)) history.back();
        else location.href='index.html';
      });
    });

    /* --- cząsteczki (canvas) --- */
    (function particles(){
      const c=document.getElementById('bh-particles'); if(!c) return;
      const ctx=c.getContext('2d'); const dpr=Math.min(2,devicePixelRatio||1);
      let W,H,dots=[];
      const prefersReduced=matchMedia?.('(prefers-reduced-motion: reduce)')?.matches;
      function targetCount(){ const t=Math.floor((innerWidth*innerHeight)/12000); return Math.max(90,Math.min(220,t)); }
      function resize(){
        W=c.width=Math.floor(innerWidth*dpr); H=c.height=Math.floor(innerHeight*dpr);
        c.style.width=innerWidth+'px'; c.style.height=innerHeight+'px';
        const N=targetCount(); dots=Array.from({length:N},()=>({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.18*dpr,vy:(Math.random()-.5)*.18*dpr,r:(Math.random()*1.7+0.9)*dpr,a:Math.random()*.6+.25}));
      }
      function step(){
        ctx.clearRect(0,0,W,H);
        for(const p of dots){
          p.x+=p.vx; p.y+=p.vy; if(p.x<0||p.x>W) p.vx*=-1; if(p.y<0||p.y>H) p.vy*=-1;
          ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          const g=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*3.2);
          g.addColorStop(0,`rgba(164,107,255,.26)`); g.addColorStop(1,`rgba(94,234,212,0)`); ctx.fillStyle=g; ctx.fill();
        }
        if(!prefersReduced) requestAnimationFrame(step);
      }
      addEventListener('resize',resize,{passive:true}); resize(); step();
    })();
  </script>
  <!-- (opcjonalnie) mini-sprzątacz: ukryj ewentualny duplikat selektora w headerze -->
  <script>
    (function(){
      var stray = document.querySelector('.header .tools .langpick, .header .tools #bhLangPick');
      if (stray) stray.style.display = 'none';
    })();
  </script>

  <!-- jeśli używasz dodatkowego pliku z tłumaczeniami/obsługą, zostaw poniższą linię -->
  <!-- <script src="assets/translator.js"></script> -->
<!-- FIX: Ujednolicenie przycisku tłumacza -->
<style>
  /* zawsze prawy górny róg */
  #lang-fab, 
  .langpick#bhLangPick {
    position: fixed !important;
    top: 10px !important;
    right: 10px !important;
    left: auto !important;
    margin: 0 !important;
    z-index: 5000 !important;
    display: inline-flex !important;
    align-items: center;
    gap: 6px;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.2);
    border-radius: 12px;
    padding: 6px 10px;
    backdrop-filter: blur(8px);
  }
  #bhLangPick label { display: none !important; }
  #bhLangSelect { font-size: 16px; font-weight: 600; color: #fff; background: transparent; border: none; }
</style>

<script>
  // zsynchronizuj język z localStorage, tak jak na innych stronach
  (function(){
    const KEY='bh.lang';
    const sel=document.getElementById('bhLangSelect');
    if(!sel) return;
    sel.value=localStorage.getItem(KEY)||'pl';
    sel.addEventListener('change',()=>{
      localStorage.setItem(KEY,sel.value);
      location.reload();
    });
  })();
</script>
<!-- FINAL FIX: tłumacz zawsze spójny i bez plamki -->
<style>
  /* Usuń stare duchy / plamki */
  .header .tools .lang,
  .header .tools .langpick,
  .header .tools #bhLangPick {
    display: none !important;
    content: none !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
  }

  /* Uniwersalny guzik tłumacza */
  #lang-fab,
  .langpick#bhLangPick {
    position: fixed !important;
    top: 10px !important;
    right: 10px !important;
    left: auto !important;
    margin: 0 !important;
    z-index: 5000 !important;

    display: inline-flex !important;
    align-items: center;
    gap: 6px;

    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.2);
    border-radius: 12px;
    padding: 6px 10px;

    backdrop-filter: blur(8px);
    font-weight: 600;
    line-height: 1;
  }

  #lang-fab label,
  #bhLangPick label {
    display: none !important;
  }

  #bhLangSelect {
    font-size: 16px;
    font-weight: 600;
    color: #fff;
    background: transparent;
    border: none;
    outline: none;
    cursor: pointer;
  }
</style>

<script>
  // Synchronizacja języka (spójna z innymi stronami)
  (function(){
    const KEY='bh.lang';
    const sel=document.getElementById('bhLangSelect');
    if(!sel) return;

    sel.value=localStorage.getItem(KEY)||'pl';
    sel.addEventListener('change',()=>{
      localStorage.setItem(KEY,sel.value);
      location.reload();
    });
  })();
</script>
<!-- SUPER FIX: tylko jeden guzik tłumacza, spójny wszędzie -->
<style>
  /* usuń starą plamkę i wszystko co niepotrzebne */
  #lang-fab,
  .goog-te-banner-frame,
  .goog-te-gadget,
  .goog-te-combo,
  .skiptranslate {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
    visibility: hidden !important;
  }

  /* nowy guzik - spójny z index/kobieta/mężczyzna/dziecko */
  #bhLangPick {
    position: fixed !important;
    top: 10px !important;
    right: 10px !important;
    left: auto !important;
    z-index: 5000 !important;

    display: inline-flex !important;
    align-items: center;
    gap: 6px;

    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.24);
    border-radius: 12px;
    padding: 6px 10px;

    backdrop-filter: saturate(120%) blur(6px);
  }

  #bhLangPick label {
    display: none !important; /* ukryj napis "Język" */
  }

  #bhLangSelect {
    font-size: 14px;
    font-weight: 700;
    color: #fff;
    background: transparent;
    border: none;
    outline: none;
    cursor: pointer;
    letter-spacing: .3px;
  }

  #bhLangSelect option {
    color: #0e1230;
    background: #ffffff;
  }
</style>
<!-- FINAL FIX 2: Spójny tłumacz na szczegóły -->
<div class="langpick" id="bhLangPick" aria-label="Wybór języka">
  <label for="bhLangSelect">Język</label>
  <select id="bhLangSelect">
    <option value="pl">PL</option>
    <option value="en">EN</option>
  </select>
</div>

<style>
  /* Wyłącz wszystkie stare duchy */
  #lang-fab,
  .goog-te-banner-frame,
  .goog-te-gadget,
  .goog-te-combo,
  .skiptranslate {
    display: none !important;
    visibility: hidden !important;
  }

  /* Guzik tłumacza – wspólny styl */
  #bhLangPick {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    left: auto !important;
    z-index: 5000 !important;

    display: inline-flex !important;
    align-items: center;
    gap: 6px;

    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.24);
    border-radius: 12px;
    padding: 6px 10px;

    backdrop-filter: saturate(120%) blur(6px);
  }

  #bhLangPick label {
    display: none !important; /* chowamy napis "Język" */
  }

  #bhLangSelect {
    font-size: 14px;
    font-weight: 700;
    color: #fff;
    background: transparent;
    border: none;
    outline: none;
    cursor: pointer;
    letter-spacing: .3px;
  }

  #bhLangSelect option {
    color: #0e1230;
    background: #ffffff;
  }

  /* Mobile: zostaw mniej miejsca od góry */
  @media (max-width:768px){
    #bhLangPick{
      top: 10px !important;
      right: 10px !important;
      padding: 5px 8px;
    }
    #bhLangSelect{ font-size: 13px; }
  }
</style>

<script>
  // Synchronizacja języka
  (function(){
    const KEY='bh.lang';
    const sel=document.getElementById('bhLangSelect');
    if(!sel) return;

    sel.value=localStorage.getItem(KEY)||'pl';
    sel.addEventListener('change',()=>{
      localStorage.setItem(KEY,sel.value);
      location.reload();
    });
  })();
</script>
<style>
  /* SPÓJNY WYGLĄD TŁUMACZA (PL/EN) */
  #bhLangPick {
    position: fixed !important;
    top: 16px !important;
    right: 24px !important;  /* odsunięcie od krawędzi na laptopie */
    z-index: 9999 !important;

    display: inline-flex !important;
    align-items: center;
    gap: 6px;

    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.22);
    border-radius: 12px;
    padding: 6px 10px;

    backdrop-filter: saturate(120%) blur(6px);
  }

  /* Ukryj napis "Język", zostaw tylko selektor */
  #bhLangPick label { display: none !important; }

  #bhLangSelect {
    font-size: 14px;
    font-weight: 700;
    color: #fff;
    background: transparent;
    border: none;
    outline: none;
    cursor: pointer;
    letter-spacing: .3px;
  }

  #bhLangSelect option {
    color: #0e1230;
    background: #ffffff;
  }

  /* TELEFON – ciut mniejsze i bliżej rogu */
  @media (max-width:768px){
    #bhLangPick{
      top: 10px !important;
      right: 12px !important;
      padding: 5px 8px;
    }
    #bhLangSelect{ font-size: 13px; }
  }
</style>
<script>
/* SZCZEGÓŁY: auto-przywracanie list i ochrona przed tłumaczem */

// jeśli ktoś przez i18n podmieni innerHTML w chronionych sekcjach – zignoruj
(function(){
  var setter = Object.getOwnPropertyDescriptor(Element.prototype,'innerHTML')?.set;
  if (!setter || Element.prototype.__bhNoI18nPatched) return;
  Object.defineProperty(Element.prototype,'innerHTML',{
    set:function(v){
      try{ if(this.closest('[data-no-i18n]')) return; }catch(e){}
      return setter.call(this,v);
    }
  });
  Element.prototype.__bhNoI18nPatched = true;
})();

// rerender list (korzysta z już istniejących funkcji/zmiennych tej strony)
(function(){
  function safe(fn){ try{ fn&&fn(); }catch(e){} }
  function reRender(){
    // entry / renderList* / fill* / updateRisk / renderDx / renderDocs już masz w tym pliku
    safe(()=>renderListInteractive('symp-common', entry && entry.symptoms, 'symptoms'));
    safe(()=>renderListInteractive('urgent',      entry && (entry.urgent||[]), 'urgent'));
    safe(()=>renderListPlain('causes',   entry && entry.causes));
    safe(()=>renderListPlain('firstaid', entry && entry.firstaid));
    safe(()=>renderListPlain('meds-otc', entry && entry.otc));
    safe(()=>renderListPlain('meds-rx',  entry && entry.rx));
    safe(()=>renderListPlain('rehab',    entry && entry.rehab));
    safe(()=>fillPairs('myths', entry && entry.myths));
    safe(()=>fillFAQ('faq',     entry && entry.faq));
    safe(()=>updateRisk && updateRisk());
    safe(()=>renderDx && renderDx());
    safe(()=>renderDocs && renderDocs());
  }

  // 1) jeśli listy są puste (po „zjedzeniu”) – odtwórz po starcie
  window.addEventListener('DOMContentLoaded', function(){
    var need = ['#symp-common','#urgent','#causes','#firstaid','#meds-otc','#meds-rx','#rehab','#myths','#faq']
      .some(sel=>{ var el=document.querySelector(sel); return el && el.children && el.children.length===0; });
    if(need) reRender();
  });

  // 2) po zmianie języka też odtwórz
  document.addEventListener('bh:lang-changed', reRender);
})();
</script>
<script>
/* 🔵 Pulsujące „Choroby” i „Lekarze” po zaznaczeniu objawów */
(function(){
  // elementy: taby na górze i karty na dole
  const tabDx   = document.querySelector('.tab[data-variant="dx"]');
  const tabDocs = document.querySelector('.tab[data-variant="docs"]');
  const cardDx  = document.getElementById('s-dx');
  const cardDoc = document.getElementById('s-docs');

  // funkcja, którą wywołujemy przy zmianach
  function setPulse(active){
    [tabDx, tabDocs, cardDx, cardDoc].forEach(el=>{
      if(!el) return;
      el.classList.toggle('pulse-blue', !!active);
    });
  }

  // 1) startowo – jeśli już są zaznaczone objawy (np. po powrocie)
  try {
    // spróbuj policzyć „li-checked” w sekcjach objawów/urgent
    const selCount =
      document.querySelectorAll('#symp-common li.li-checked').length +
      document.querySelectorAll('#urgent li.li-checked').length;
    setPulse(selCount > 0);
  } catch(e){}

  // 2) reaguj na każde zaznaczenie/odznaczenie objawu
  document.addEventListener('bh:symptoms-changed', function(){
    const selCount =
      document.querySelectorAll('#symp-common li.li-checked').length +
      document.querySelectorAll('#urgent li.li-checked').length;
    setPulse(selCount > 0);
  });

  // 3) gdy użytkownik wejdzie w karty „Choroby/Lekarze”, nadal świecimy
  document.querySelector('[data-variant="dx"]')?.addEventListener('click', ()=>setPulse(true));
  document.querySelector('[data-variant="docs"]')?.addEventListener('click', ()=>setPulse(true));
})();
</script>
<style>
/* 🔵 Pulsujący niebieski glow dla przycisków */
.bh-glow-blue {
  animation: bhBluePulse 2.4s ease-in-out infinite;
  box-shadow: 0 0 12px rgba(59,130,246,.55),
              0 0 24px rgba(59,130,246,.35),
              0 0 36px rgba(59,130,246,.25);
  border-color: rgba(59,130,246,.65) !important;
}
@keyframes bhBluePulse {
  0%   { box-shadow: 0 0 4px rgba(59,130,246,.35), 0 0 12px rgba(59,130,246,.25); }
  50%  { box-shadow: 0 0 16px rgba(59,130,246,.65), 0 0 32px rgba(59,130,246,.45); }
  100% { box-shadow: 0 0 4px rgba(59,130,246,.35), 0 0 12px rgba(59,130,246,.25); }
}
</style>

<script>
(function(){
  // Funkcja aktywująca glow na dole (przyciski w komunikacie)
  function activateHintButtonsGlow(){
    document.querySelectorAll('#symptom-hints button').forEach(btn=>{
      btn.classList.add('bh-glow-blue');
    });
  }

  // Gdy użytkownik wybierze objaw – uruchom glow
  document.addEventListener('bh:symptom-selected', activateHintButtonsGlow);

  // 🔄 Jeśli Twoje eventy nie używają customowego bh:symptom-selected,
  // możesz zamiast tego podpiąć się pod kliknięcia w objawy:
  document.querySelectorAll('#symp-common input[type=checkbox], #urgent input[type=checkbox]')
    .forEach(cb=>{
      cb.addEventListener('change', ()=>{
        if(cb.checked) activateHintButtonsGlow();
      });
    });
})();
</script>
<style>
/* ================================
   BOLI HELP • SZCZEGÓŁY — PRO LOOK
   (tylko UI: karty, glow, typografia)
   ================================ */
:root{
  /* kolory & glow */
  --bh-surface: rgba(28, 18, 50, .42);
  --bh-stroke:  rgba(164,107,255,.24);
  --bh-glow:    164,107,255;   /* fiolet */
  --bh-glow2:   94,234,212;    /* teal   */
  --bh-blue:    59,130,246;    /* niebieski akcent */
  --bh-green:   34,227,160;
  --bh-amber:   255,184,108;
  --bh-red:     255,107,107;

  /* promień narożników – „bardziej kwadratowe” */
  --bh-radius: 14px;

  /* typografia */
  --bh-h: 600;          /* waga nagłówków */
  --bh-body: 470;       /* waga tekstu */
  --bh-lh: 1.65;        /* line-height */
}

/* Typos: czytelniej na wszystkich kartach */
body[data-page="szczegoly"]{
  letter-spacing: .1px;
}
body[data-page="szczegoly"] .card,
body[data-page="szczegoly"] ul.clean li{
  font-variation-settings: "wght" var(--bh-body);
  line-height: var(--bh-lh);
}

/* ======================
   KAFLE: nowoczesny look
   ====================== */
.cards{ display: grid; gap: 14px; }
.card{
  position: relative;
  display: block;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border: 1px solid var(--bh-stroke);
  border-radius: var(--bh-radius);
  padding: 16px 16px 14px;
  /* bazowy delikatny glow */
  box-shadow:
    0 8px 28px rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.06) inset,
    0 0 0 0 rgba(var(--bh-glow), 0.0);
  transition: box-shadow .28s ease, transform .24s ease, border-color .24s ease, background .24s ease;
}

/* gradientowa „obrączka” na krawędzi (miękko, nowocześnie) */
.card::before{
  content:"";
  position:absolute; inset:-1px;
  border-radius: inherit;
  pointer-events:none;
  background: radial-gradient(120% 120% at 0% 0%, rgba(var(--bh-glow),.18), transparent 60%),
              radial-gradient(120% 120% at 100% 0%, rgba(var(--bh-glow2),.12), transparent 60%);
  mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
  -webkit-mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
  padding: 1px;
  opacity:.55;
}

/* focus/hover = „podniesienie” i mocniejszy glow */
.card:hover,
.card:focus-within{
  transform: translateY(-1px);
  border-color: rgba(255,255,255,.26);
  box-shadow:
    0 14px 34px rgba(0,0,0,.45),
    0 0 0 1px rgba(255,255,255,.10) inset,
    0 0 22px rgba(var(--bh-glow), .25);
}

/* aktywny tabpanel = ciut mocniejszy glow */
.card[aria-hidden="false"]{
  box-shadow:
    0 12px 32px rgba(0,0,0,.42),
    0 0 0 1px rgba(255,255,255,.10) inset,
    0 0 18px rgba(var(--bh-glow), .18);
}

/* NAGŁÓWKI w kartach */
.card h3{
  margin:.1rem 0 .85rem;
  font-weight: var(--bh-h);
  letter-spacing: .25px;
  color:#eaf2ff;
}
.card h3::after{
  content:"";
  display:block; height:1px; margin-top:.55rem;
  background: linear-gradient(90deg, rgba(207,226,255,.6), rgba(255,255,255,.08) 40%, transparent);
}

/* LISTY w kartach – równe, „kwadratowe” klocek-itemy */
ul.clean{ list-style:none; margin:0; padding:0; display:grid; gap:8px; }
@media (min-width:720px){ ul.clean{ grid-template-columns: 1fr; } } /* czytelność > siatka */
ul.clean li{
  position:relative;
  display:flex; align-items:center; gap:10px;
  padding:12px 12px 12px 40px;
  border-radius: calc(var(--bh-radius) - 2px);
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
ul.clean li:hover{
  border-color: rgba(255,255,255,.24);
  box-shadow: 0 0 0 1px rgba(255,255,255,.10) inset;
}
/* „kwadratowy” checkbox-znacznik */
.cb{
  position:absolute; left:10px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; border-radius: 6px;
  border:1px solid rgba(255,255,255,.35);
  background:rgba(255,255,255,.06);
  transition: background .2s ease, box-shadow .2s ease, border-color .2s ease;
}
.li-checked{
  background: linear-gradient(180deg, rgba(164,107,255,.20), rgba(255,255,255,.04));
  border-color: rgba(164,107,255,.55);
  box-shadow: 0 0 0 2px rgba(164,107,255,.20) inset, 0 6px 18px rgba(8,10,22,.35);
}
.cb.checked{
  background:#fff;
  border-color:#fff;
  box-shadow: 0 0 0 2px rgba(164,107,255,.25) inset;
}

/* Pasek ryzyka – subtelny lifting */
.riskbar{ outline:1px solid rgba(255,255,255,.20); height: 12px; }
.cursor{
  width:16px; height:16px; border-radius:8px; background:#fff;
  box-shadow: 0 0 0 2px rgba(59,130,246,.35);
}

/* Info strip (alarm) – złotawy akcent */
.strip{ 
  border-radius: calc(var(--bh-radius) - 4px);
  border-color: rgba(var(--bh-amber), .55);
  background: linear-gradient(180deg, rgba(var(--bh-amber),.16), rgba(255,255,255,.03));
}
.strip .cta{
  font-weight:800;
  border:1px solid rgba(255,255,255,.24);
  box-shadow: 0 4px 14px rgba(0,0,0,.25);
}

/* Tabs – kolory i glow */
.tab{
  border-radius: 12px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.04);
  font-weight:800;
}
.tab:hover{ transform: translateY(-1px); }
.tab[aria-selected="true"]{
  border-color: rgba(var(--bh-blue), .75);
  box-shadow: 0 0 0 2px rgba(var(--bh-blue), .45), 0 8px 18px rgba(8,10,22,.42);
}

/* „Choroby” i „Lekarze” — mocniejszy niebieski akcent (jak prosiłaś) */
#s-dx.card,
#s-docs.card{
  border-color: rgba(var(--bh-blue), .55);
  box-shadow:
    0 14px 34px rgba(8,10,22,.46),
    0 0 0 1px rgba(59,130,246,.25) inset,
    0 0 24px rgba(59,130,246,.30);
}
#s-dx.card:hover,
#s-docs.card:hover{
  box-shadow:
    0 16px 38px rgba(8,10,22,.50),
    0 0 0 1px rgba(59,130,246,.30) inset,
    0 0 36px rgba(59,130,246,.45);
}

/* Mity & FAQ – lekki „kafelek Q/A” */
#s-mity ul.clean li, #s-faq ul.clean li{
  padding-top: 14px; padding-bottom: 14px;
}

/* Diagnostyka – meta pasek pewności: płynniejszy */
.conf-wrap{ outline:1px solid rgba(255,255,255,.22); }
.conf-bar{
  transition: width .35s ease;
  background: linear-gradient(90deg, rgba(59,130,246,.75), rgba(94,234,212,.75));
}

/* Badges – delikatniej, ale czytelnie */
.dx-badge, .doc-badge{
  font-weight: 900;
  letter-spacing:.2px;
  border: 1px solid transparent;
}
.dx-badge.sor, .doc-badge.sor{
  background: rgba(var(--bh-red), .20);
  border-color: rgba(var(--bh-red), .65);
}
.dx-badge.poz, .doc-badge.poz{
  background: rgba(var(--bh-green), .18);
  border-color: rgba(var(--bh-green), .45);
}

/* Responsywność – estetyka na telefonie */
@media (max-width: 720px){
  .card{ padding: 14px 12px; }
  ul.clean li{ padding: 12px 12px 12px 38px; }
  .tabs{ gap: 6px; }
}
</style>

<!-- Opcjonalny, subtelny puls tylko dla aktywnych „Choroby” i „Lekarze” -->
<style>
.bh-pulse-blue{
  animation: bhBluePulse 2.3s ease-in-out infinite;
}
@keyframes bhBluePulse{
  0%   { box-shadow: 0 0 10px rgba(59,130,246,.35), 0 0 22px rgba(59,130,246,.20); }
  50%  { box-shadow: 0 0 20px rgba(59,130,246,.65), 0 0 36px rgba(59,130,246,.40); }
  100% { box-shadow: 0 0 10px rgba(59,130,246,.35), 0 0 22px rgba(59,130,246,.20); }
}
/* Dołóż puls NIE zmieniając logiki – jeśli te panele staną się aktywne,
   dostaną klasę (dodajemy ją tylko wizualnie niżej w JS). */
</style>
<script>
(function(){
  const dxTab = document.querySelector('.tab[data-variant="dx"]');
  const docsTab = document.querySelector('.tab[data-variant="docs"]');
  const dxPanel = document.getElementById('s-dx');
  const docsPanel = document.getElementById('s-docs');

  function syncPulse(){
    // Tab ma aria-selected="true" gdy wybrany – nadaj puls panelowi i tabowi
    const dxOn   = dxTab?.getAttribute('aria-selected')==='true';
    const docsOn = docsTab?.getAttribute('aria-selected')==='true';
    [dxTab, dxPanel].forEach(el=> el && el.classList.toggle('bh-pulse-blue', dxOn));
    [docsTab, docsPanel].forEach(el=> el && el.classList.toggle('bh-pulse-blue', docsOn));
  }

  // Pierwsza synchronizacja i nasłuch klików w taby
  syncPulse();
  document.querySelectorAll('.tab').forEach(t=>{
    t.addEventListener('click', ()=> setTimeout(syncPulse, 40));
  });

  // Delikatny hint: jeśli użytkownik zaznaczy jakieś objawy – podkreśl oba taby
  document.addEventListener('bh:symptoms-changed', ()=>{
    if (dxTab && docsTab){
      dxTab.classList.add('bh-pulse-blue');
      docsTab.classList.add('bh-pulse-blue');
      // Zdejmij po pierwszym odwiedzeniu któregoś z paneli
      const off = () => {
        dxTab.classList.remove('bh-pulse-blue');
        docsTab.classList.remove('bh-pulse-blue');
        dxTab.removeEventListener('click', off);
        docsTab.removeEventListener('click', off);
      };
      dxTab.addEventListener('click', off, {once:true});
      docsTab.addEventListener('click', off, {once:true});
    }
  });
})();
</script>
<style id="bh-hotfix-cards-visibility">
  /* ✅ 1) Tylko jedna karta na raz — przywrócenie logiki aria-hidden */
  .cards .card { display: none !important; }
  .cards .card[aria-hidden="false"] { display: block !important; }

  /* ✅ 2) Delikatny „wow” look (kwadratowiej, glow) – bez ruszania treści */
  :root{
    --bh-radius: 12px;                  /* bardziej kwadratowo */
  }
  .cards .card{
    border-radius: var(--bh-radius);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border: 1px solid rgba(164,107,255,.22);
    box-shadow:
      0 10px 28px rgba(0,0,0,.38),
      0 0 0 1px rgba(255,255,255,.08) inset,
      0 0 18px rgba(164,107,255,.18);
    transition: box-shadow .28s ease, transform .24s ease, border-color .24s ease, background .24s ease;
  }
  .cards .card:hover,
  .cards .card:focus-within{
    transform: translateY(-1px);
    border-color: rgba(255,255,255,.26);
    box-shadow:
      0 14px 36px rgba(0,0,0,.46),
      0 0 0 1px rgba(255,255,255,.12) inset,
      0 0 28px rgba(164,107,255,.28);
  }

  /* „kwadratowe” itemy w kartach */
  .cards .card ul.clean li{
    border-radius: 10px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.04);
  }

  /* Choroby/Lekarze – nadal mocniejszy niebieski akcent */
  #s-dx.card,
  #s-docs.card{
    border-color: rgba(59,130,246,.55);
    box-shadow:
      0 14px 34px rgba(8,10,22,.46),
      0 0 0 1px rgba(59,130,246,.25) inset,
      0 0 24px rgba(59,130,246,.30);
  }
  #s-dx.card:hover,
  #s-docs.card:hover{
    box-shadow:
      0 16px 38px rgba(8,10,22,.50),
      0 0 0 1px rgba(59,130,246,.30) inset,
      0 0 36px rgba(59,130,246,.45);
  }
</style>
<style id="bh-ultra-card-ui">
  /* 1) Tylko jedna karta naraz (zostawiamy działanie JS z aria-hidden) */
  .cards .card { display: none !important; }
  .cards .card[aria-hidden="false"] { display: block !important; }

  /* 2) Akcenty i emoji per karta (kolor = --ac, emoji = --em) */
  #s-objawy   { --ac: 94,234,212; --em:"📝"; }
  #s-przyczyny{ --ac:164,107,255; --em:"🧠"; }
  #s-aid      { --ac:112,225,177; --em:"🆘"; }
  #s-otc      { --ac:255,184,108; --em:"💊"; }
  #s-rx       { --ac:255,107,107; --em:"🧾"; }
  #s-rehab    { --ac: 94,234,212; --em:"🏃"; }
  #s-mity     { --ac:164,107,255; --em:"🤔"; }
  #s-faq      { --ac: 94,234,212; --em:"❓"; }
  #s-dx       { --ac: 59,130,246; --em:"🩺"; }
  #s-docs     { --ac: 59,130,246; --em:"👩‍⚕️"; }

  :root{
    --bh-card-r:12px;        /* „bardziej kwadratowe” */
    --bh-border: rgba(255,255,255,.14);
    --bh-card-bg: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  }

  /* 3) Karty – szkło + neon + subtelny gradient ramki */
  .cards .card{
    position: relative;
    border-radius: var(--bh-card-r);
    padding: 16px 16px 14px;
    background: var(--bh-card-bg);
    border: 1px solid var(--bh-border);
    backdrop-filter: blur(10px) saturate(125%);
    box-shadow:
      0 14px 34px rgba(8,10,22,.42),
      0 0 0 1px rgba(255,255,255,.08) inset,
      0 0 22px rgba(164,107,255,.14);
    transition: box-shadow .28s ease, transform .22s ease, border-color .24s ease, background .24s ease;
    isolation: isolate;
  }
  .cards .card[aria-hidden="false"]:hover{
    transform: translateY(-1px);
    border-color: rgba(255,255,255,.22);
    box-shadow:
      0 16px 40px rgba(8,10,22,.50),
      0 0 0 1px rgba(255,255,255,.12) inset,
      0 0 34px rgba(164,107,255,.24);
  }

  /* cienka neonowa aureola w kolorze akcentu karty */
  .cards .card[aria-hidden="false"]::after{
    content:"";
    position:absolute; inset:-2px;
    border-radius: calc(var(--bh-card-r) + 2px);
    pointer-events:none; z-index:-1;
    background: radial-gradient(60% 80% at 50% 0%, rgba(var(--ac),.35), rgba(0,0,0,0)),
                radial-gradient(60% 80% at 50% 100%, rgba(var(--ac),.18), rgba(0,0,0,0));
    filter: blur(8px);
  }

  /* 4) Nagłówki – emotka + linia gradientowa */
  .cards .card h3{
    display:flex; align-items:center; gap:10px;
    margin:.15rem 0 .9rem; font-size:16px; font-weight:900; letter-spacing:.3px; color:#e6f0ff;
  }
  .cards .card h3::before{
    content: var(--em, "•");
    display:inline-grid; place-items:center;
    width:26px; height:26px; border-radius:9px;
    background: rgba(var(--ac), .14);
    border: 1px solid rgba(var(--ac), .45);
    box-shadow: inset 0 0 0 1px rgba(var(--ac), .18);
    font-size:14px;
  }
  .cards .card h3::after{
    content:""; flex:1; height:1px; margin-left:10px;
    background: linear-gradient(90deg, rgba(207,226,255,.55), rgba(255,255,255,.06) 45%, transparent);
  }

  /* 5) Listy – „kafelkowe” wiersze z paskiem akcentu i stanem zaznaczenia */
  ul.clean{ list-style:none; margin:0; padding:0; display:grid; gap:8px; }
  /* na większych ekranach w niektórych sekcjach możemy składać w kolumny */
  @media (min-width: 960px){
    #s-objawy ul.clean, #s-przyczyny ul.clean, #s-aid ul.clean, #s-otc ul.clean,
    #s-rx ul.clean, #s-rehab ul.clean, #s-mity ul.clean, #s-faq ul.clean{
      grid-template-columns: 1fr;
    }
  }
  ul.clean li{
    position:relative; padding:12px 12px 12px 46px;
    border-radius: 12px;
    border:1px solid rgba(255,255,255,.14);
    background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    color:#f6f8ff;
    transition: border-color .2s ease, box-shadow .2s ease, transform .12s ease, background .2s ease;
  }
  /* pionowy pasek akcentu */
  ul.clean li::before{
    content:"";
    position:absolute; left:10px; top:10px; bottom:10px; width:6px; border-radius:6px;
    background: linear-gradient(180deg, rgba(var(--ac),.55), rgba(var(--ac),.18));
    box-shadow: 0 0 10px rgba(var(--ac),.28);
    opacity:.6; transition:opacity .2s ease, box-shadow .2s ease;
  }
  /* checkbox-badge (zostawiamy Twój .cb, tylko go upiększamy) */
  .cb{
    position:absolute; left:22px; top:50%; transform:translate(-50%,-50%);
    width:18px; height:18px; border-radius:6px;
    border:1px solid rgba(255,255,255,.35);
    background: rgba(255,255,255,.06);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
    transition: all .15s ease;
  }
  .li-checked .cb{
    background:#fff;
    box-shadow: 0 0 0 2px rgba(var(--ac), .35), 0 0 14px rgba(var(--ac), .35);
  }
  /* hover/aktywny stan wiersza */
  ul.clean li:hover{
    border-color: rgba(255,255,255,.22);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    transform: translateY(-1px);
  }
  ul.clean li:hover::before{ opacity:.9; box-shadow: 0 0 16px rgba(var(--ac), .42); }

  /* zaznaczony wiersz – mocniejszy glow */
  ul.clean li.li-checked{
    border-color: rgba(var(--ac), .55);
    box-shadow:
      0 10px 24px rgba(0,0,0,.28),
      0 0 0 1px rgba(var(--ac), .28) inset,
      0 0 20px rgba(var(--ac), .28);
  }

  /* 6) Pasek ryzyka – delikatny lifting */
  .riskbar{
    outline: 1px solid rgba(255,255,255,.16);
    background: linear-gradient(90deg, #70e1b1, #ffd16c, #ff6b6b);
  }
  .cursor{
    box-shadow: 0 0 0 2px rgba(255,255,255,.6), 0 0 14px rgba(255,255,255,.25);
  }

  /* 7) Choroby/Lekarze – premium blue neon (serce strony) */
  #s-dx.card,
  #s-docs.card{
    border-color: rgba(59,130,246,.65);
    box-shadow:
      0 16px 42px rgba(8,10,22,.52),
      0 0 0 1px rgba(59,130,246,.28) inset,
      0 0 28px rgba(59,130,246,.34);
  }
  #s-dx.card[aria-hidden="false"]::after,
  #s-docs.card[aria-hidden="false"]::after{
    background: radial-gradient(60% 80% at 50% 0%, rgba(59,130,246,.35), rgba(0,0,0,0)),
                radial-gradient(60% 80% at 50% 100%, rgba(59,130,246,.20), rgba(0,0,0,0));
  }

  /* 8) Małe ekrany – ciasno, ale elegancko */
  @media (max-width: 640px){
    .cards .card{ padding: 14px 12px; border-radius: 10px; }
    ul.clean li{ padding: 10px 10px 10px 42px; border-radius: 10px; }
    .cards .card h3{ font-size: 15px; }
  }
</style>
<style id="bh-click-polish">
  /* 1) CAŁY WIERSZ = PRZYCISK */
  ul.clean li{
    position: relative;
    padding: 12px 12px 12px 48px;  /* więcej miejsca na lewą kolumnę */
    cursor: pointer;
    user-select: none;
  }

  /* 2) PASEK AKCENTU – tło, nie łapie kliknięć */
  ul.clean li::before{
    content:"";
    position:absolute;
    left: 12px; top: 10px; bottom: 10px;
    width: 4px;                      /* cieńszy */
    border-radius: 4px;
    background: linear-gradient(180deg, rgba(var(--ac),.55), rgba(var(--ac),.18));
    box-shadow: 0 0 10px rgba(var(--ac),.25);
    pointer-events: none;            /* <— najważniejsze: nie blokuje kliknięć */
    opacity: .7;
  }

  /* 3) CHECKBOX – większy i „miękki”, ale dekoracyjny */
  .cb{
    width: 22px; height: 22px;
    border-radius: 8px;
    left: 26px;                      /* wyrównany do nowego paddingu */
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
  }
  .cb::after{
    content:"";
    position:absolute; inset:4px;
    border-radius:6px;
    background: transparent;
    transition: background .15s ease, box-shadow .15s ease;
  }
  .li-checked .cb{
    background:#fff;
    box-shadow: 0 0 0 2px rgba(var(--ac),.35), 0 0 14px rgba(var(--ac),.30);
  }
  .li-checked .cb::after{
    background: linear-gradient(180deg, rgba(var(--ac),.95), rgba(var(--ac),.75));
    box-shadow: 0 0 10px rgba(var(--ac),.35) inset;
  }

  /* 4) FEEDBACK DOTYKU */
  ul.clean li:active{ transform: translateY(0); }
  ul.clean li:hover{
    border-color: rgba(255,255,255,.22);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  }

  /* 5) WYBÓR – mocniejszy glow, ale bez migotania tekstu */
  ul.clean li.li-checked{
    border-color: rgba(var(--ac), .55);
    box-shadow:
      0 10px 22px rgba(0,0,0,.26),
      0 0 0 1px rgba(var(--ac), .26) inset,
      0 0 18px rgba(var(--ac), .26);
    background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
  }

  /* 6) MOBILE – trochę ciaśniej, ale wciąż wygodnie */
  @media (max-width:640px){
    ul.clean li{ padding: 11px 10px 11px 46px; }
    .cb{ left: 24px; width: 20px; height: 20px; border-radius: 7px; }
    ul.clean li::before{ left: 10px; }
  }
</style>

<script>
  // Delikatny „pressed” feedback – bez ingerencji w Twoją logikę.
  (function(){
    const list = document.querySelectorAll('ul.clean li');
    list.forEach(li=>{
      li.addEventListener('pointerdown', ()=> li.classList.add('bh-pressed'));
      li.addEventListener('pointerup',   ()=> li.classList.remove('bh-pressed'));
      li.addEventListener('pointerleave',()=> li.classList.remove('bh-pressed'));
    });
  })();
</script>
<style id="bh-no-sidebars">
  /* Usuń WSZELKIE pionowe paski-akcenty przy pozycjach listy */
  ul.clean li::before { content: none !important; display: none !important; }

  /* Uporządkowane klikanie: cały wiersz = przycisk, większa strefa po lewej */
  ul.clean li{
    position: relative;
    padding: 12px 12px 12px 48px;   /* miejsce na checkbox */
    cursor: pointer;
    user-select: none;
  }
  /* Sam checkbox – większy i miękki, ale nie nachodzi na tekst */
  .cb{
    position:absolute; left: 18px; top: 50%;
    transform: translateY(-50%);
    width: 22px; height: 22px; border-radius: 8px;
    border:1px solid rgba(255,255,255,.28);
    background: rgba(255,255,255,.06);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
  }
  .li-checked .cb{
    background:#fff;
    box-shadow: 0 0 0 2px rgba(94,234,212,.35), 0 0 14px rgba(94,234,212,.28);
  }

  /* Subtelny hover/tap — zero ingerencji w Twoją logikę */
  ul.clean li:hover{
    border-color: rgba(255,255,255,.22);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  }

  /* Mobile – ciut ciaśniej, dalej wygodnie */
  @media (max-width:640px){
    ul.clean li{ padding: 11px 10px 11px 46px; }
    .cb{ left: 16px; width: 20px; height: 20px; border-radius: 7px; }
  }
</style>
<style id="bh-objawy-redesign">
  /* Sekcja OBJAWY – nowoczesny grid */
  #symp-common ul.clean {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 14px;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  #symp-common ul.clean li {
    position: relative;
    padding: 18px 14px 18px 14px;
    border-radius: 16px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(164,107,255,0.25);
    font-weight: 600;
    font-size: 15px;
    line-height: 1.4;
    color: #eef2ff;
    cursor: pointer;
    text-align: center;
    transition: all 0.25s ease;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
  }

  /* Hover */
  #symp-common ul.clean li:hover {
    background: rgba(164,107,255,0.08);
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(0,0,0,.35), 0 0 18px rgba(164,107,255,.28);
  }

  /* Stan zaznaczenia (Twoja logika dokłada klasę .li-checked) */
  #symp-common ul.clean li.li-checked {
    background: rgba(94,234,212,0.12);
    border-color: rgba(94,234,212,.6);
    box-shadow: 0 0 0 2px rgba(94,234,212,.55), 0 0 20px rgba(94,234,212,.45);
    font-weight: 700;
    color: #ffffff;
  }

  /* Checkbox zastąpiony eleganckim "✓" */
  #symp-common ul.clean li .cb {
    display: none;
  }
  #symp-common ul.clean li.li-checked::after {
    content: "✓";
    position: absolute;
    top: 10px;
    right: 12px;
    font-size: 18px;
    color: #5eead4;
    text-shadow: 0 0 8px rgba(94,234,212,.6);
  }

  /* Responsywność */
  @media (max-width: 640px) {
    #symp-common ul.clean {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
    }
    #symp-common ul.clean li {
      font-size: 14px;
      padding: 14px 10px;
    }
  }
</style>
<style id="bh-objawy-redesign-v2">
  /* OBJAWY = ładna siatka kart (tylko sekcja Objawy) */
  .card#s-objawy #symp-common{
    display:grid !important;
    grid-template-columns:repeat(auto-fill, minmax(180px,1fr));
    gap:14px;
    list-style:none;
    margin:0;
    padding:0;
  }

  .card#s-objawy #symp-common > li{
    position:relative;
    padding:18px 14px;
    border-radius:16px;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(164,107,255,.25);
    color:#eef2ff;
    font-weight:600;
    font-size:15px;
    line-height:1.4;
    text-align:center;
    cursor:pointer;
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
  }

  .card#s-objawy #symp-common > li:hover{
    background:rgba(164,107,255,.08);
    transform:translateY(-2px);
    box-shadow:0 6px 14px rgba(0,0,0,.35), 0 0 18px rgba(164,107,255,.28);
  }

  /* Zaznaczone (Twoja logika dodaje .li-checked) */
  .card#s-objawy #symp-common > li.li-checked{
    background:rgba(94,234,212,.12);
    border-color:rgba(94,234,212,.6);
    box-shadow:0 0 0 2px rgba(94,234,212,.55), 0 0 20px rgba(94,234,212,.45);
    font-weight:700;
    color:#fff;
  }

  /* schowaj techniczny „checkbox” i usuń lewy padding z niego */
  .card#s-objawy #symp-common > li .cb{
    display:none !important;
  }

  /* znaczek ✓ w prawym górnym rogu po zaznaczeniu */
  .card#s-objawy #symp-common > li.li-checked::after{
    content:"✓";
    position:absolute;
    top:10px;
    right:12px;
    font-size:18px;
    color:#5eead4;
    text-shadow:0 0 8px rgba(94,234,212,.6);
    pointer-events:none;
  }

  /* Mobile */
  @media (max-width:640px){
    .card#s-objawy #symp-common{
      grid-template-columns:repeat(auto-fill, minmax(150px,1fr));
      gap:10px;
    }
    .card#s-objawy #symp-common > li{ font-size:14px; padding:14px 10px; }
  }
</style>
<style id="bh-objawy-risk-v3">
  /* OBJAWY – grid nowoczesnych kart */
  .card#s-objawy #symp-common{
    display:grid!important;
    grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
    gap:14px;
    list-style:none;margin:0;padding:0;
  }
  .card#s-objawy #symp-common>li{
    position:relative;
    padding:20px 14px;
    border-radius:18px;
    background:rgba(255,255,255,.04);
    border:1px solid rgba(164,107,255,.25);
    color:#e7ebff;
    font-weight:600;
    font-size:15px;
    text-align:center;
    cursor:pointer;
    transition:.25s ease;
    backdrop-filter:blur(8px) saturate(120%);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
  }
  .card#s-objawy #symp-common>li:hover{
    background:rgba(164,107,255,.08);
    transform:translateY(-3px) scale(1.02);
    box-shadow:0 8px 18px rgba(0,0,0,.4),0 0 16px rgba(164,107,255,.35);
  }
  .card#s-objawy #symp-common>li.li-checked{
    background:linear-gradient(180deg,rgba(94,234,212,.18),rgba(94,234,212,.10));
    border-color:rgba(94,234,212,.65);
    box-shadow:0 0 0 2px rgba(94,234,212,.55),0 0 24px rgba(94,234,212,.5);
    color:#fff;
    font-weight:700;
    transform:scale(1.03);
  }
  .card#s-objawy #symp-common>li .cb{display:none!important}
  .card#s-objawy #symp-common>li.li-checked::after{
    content:"✓";
    position:absolute;top:10px;right:12px;
    font-size:18px;color:#5eead4;
    text-shadow:0 0 8px rgba(94,234,212,.7);
  }

  /* TYTUŁ sekcji */
  .card#s-objawy .section-title{
    font-size:18px;
    font-weight:800;
    letter-spacing:.3px;
    margin-bottom:12px;
    color:#cfe2ff;
    text-shadow:0 1px 2px rgba(0,0,0,.6);
  }

  /* PASEK RYZYKA – glass/gradient + animacja */
  .risk-bar{
    margin-top:22px;
    padding:14px;
    border-radius:16px;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.16);
    backdrop-filter:blur(6px) saturate(130%);
    box-shadow:inset 0 0 12px rgba(0,0,0,.35);
  }
  .risk-bar .risk-label{
    font-size:14px;
    font-weight:800;
    margin-bottom:8px;
    color:#cfe2ff;
  }
  .risk-bar .risk-track{
    position:relative;
    height:18px;
    border-radius:999px;
    background:linear-gradient(90deg,#4ade80,#facc15,#ef4444);
    overflow:hidden;
  }
  .risk-bar .risk-fill{
    position:absolute;top:0;left:0;
    height:100%;border-radius:inherit;
    background:rgba(255,255,255,.4);
    box-shadow:0 0 8px rgba(255,255,255,.5);
    transition:width .6s ease;
  }
  .risk-bar .risk-text{
    margin-top:6px;
    font-size:13px;
    font-weight:700;
    text-align:right;
    color:#cfd8ff;
  }
  .risk-bar.low .risk-text{color:#4ade80}
  .risk-bar.mid .risk-text{color:#facc15}
  .risk-bar.high .risk-text{color:#ef4444}

  /* MOBILE */
  @media(max-width:640px){
    .card#s-objawy #symp-common{
      grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
      gap:10px;
    }
    .card#s-objawy #symp-common>li{font-size:14px;padding:16px 10px}
  }
</style>
<style id="bh-risk-visual-v1">
  /* kontener „Ryzyko” */
  .card#s-objawy .risk-mini{
    display:flex; align-items:center; gap:10px;
    padding:12px 14px; margin:.35rem 0 .6rem;
    border-radius:14px;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.16);
    backdrop-filter:blur(8px) saturate(130%);
    box-shadow:inset 0 0 12px rgba(0,0,0,.35);
  }
  .card#s-objawy .risk-mini small{
    font-weight:900; letter-spacing:.2px; color:#cfe2ff;
    min-width:120px;
  }

  /* tor paska */
  .card#s-objawy .riskbar{
    position:relative; width:100%; height:18px;
    border-radius:999px; overflow:hidden;
    outline:1px solid rgba(255,255,255,.16);
    background:linear-gradient(90deg,#4ade80,#facc15,#ef4444);
  }
  /* kursor (kropka) */
  .card#s-objawy .riskbar .cursor{
    top:50%; transform:translate(-50%,-50%);
    width:18px; height:18px; border-radius:50%;
    background:#fff;
    box-shadow:0 0 0 4px rgba(255,255,255,.35), 0 0 16px rgba(255,255,255,.6);
    transition:left .55s ease;   /* płynne przesuwanie */
  }

  /* kolor napisu „Ryzyko niskie/…” */
  .card#s-objawy .risk-mini[data-level="low"]    small #risk-label{ color:#4ade80 }
  .card#s-objawy .risk-mini[data-level="mid"]    small #risk-label{ color:#facc15 }
  .card#s-objawy .risk-mini[data-level="high"]   small #risk-label{ color:#ef4444 }

  /* lekkie „pompowanie” przy mid/high */
  @keyframes bhPulseRisk{0%{box-shadow:0 0 0 0 rgba(255,255,255,.2)}70%{box-shadow:0 0 0 10px rgba(255,255,255,0)}100%{box-shadow:0 0 0 0 rgba(255,255,255,0)}}
  .card#s-objawy .risk-mini[data-level="mid"]  .cursor{ animation:bhPulseRisk 1.8s ease-in-out infinite; }
  .card#s-objawy .risk-mini[data-level="high"] .cursor{ animation:bhPulseRisk 1.2s ease-in-out infinite; }
</style>

<script>
/* dopnij się do istniejącej funkcji – tylko wizualny status */
(function(){
  const wrap = document.querySelector('.card#s-objawy .risk-mini');
  const bar  = document.getElementById('riskbar');
  if(!wrap || !bar) return;

  const _oldUpdate = window.updateRisk;
  window.updateRisk = function(){
    if(typeof _oldUpdate === 'function') _oldUpdate();

    // po wyliczeniu przez Twój kod:
    const lbl = document.getElementById('risk-label')?.textContent || '';
    let level = 'low';
    if(/wysokie|high/i.test(lbl)) level='high';
    else if(/umiark|moderate|średnie/i.test(lbl)) level='mid';
    wrap.setAttribute('data-level', level);
  };

  // ustaw od razu przy starcie
  try{ window.updateRisk(); }catch(e){}
})();
</script>
<style id="bh-urgent-cards-v1">
  .card#s-objawy .subhead{
    margin:.9rem 0 .5rem;
    font-size:14px; font-weight:900; letter-spacing:.25px;
    color:#ffdfd9;
    text-shadow:0 1px 2px rgba(0,0,0,.5);
  }

  /* lista czerwonych flag */
  .card#s-objawy #urgent{
    list-style:none; margin:.2rem 0 0; padding:0;
    display:flex; flex-direction:column; gap:10px;
  }
  .card#s-objawy #urgent > li{
    position:relative;
    padding:12px 14px 12px 44px;
    border-radius:14px;
    background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.16);
    color:#ffeaea;
    font-weight:700;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
  }
  .card#s-objawy #urgent > li::before{
    content:"⚠️";
    position:absolute; left:12px; top:50%; transform:translateY(-50%);
    width:24px; height:24px; display:grid; place-items:center;
    border-radius:8px;
    background:rgba(255,107,107,.18);
    box-shadow:inset 0 0 0 1px rgba(255,107,107,.45), 0 0 18px rgba(255,107,107,.25);
  }
  /* delikatne podświetlenie przy hoverze/aktywnym elemencie */
  .card#s-objawy #urgent > li:hover{
    box-shadow:0 10px 22px rgba(0,0,0,.35), 0 0 24px rgba(255,107,107,.35);
    transform:translateY(-1px);
  }
</style>
<style id="bh-urgent-flags-v2">
/* Nowoczesne kafelki dla czerwonych flag i innych list pod paskiem ryzyka */
.urgent-list li,
#urgent li {
  list-style: none;
  margin: 10px 0;
  padding: 14px 16px;
  border-radius: 14px;
  font-weight: 600;
  letter-spacing: .2px;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border: 1px solid rgba(255,255,255,.14);
  color: #f8faff;
  box-shadow: 0 4px 14px rgba(0,0,0,.35), 0 0 0 1px rgba(164,107,255,.15) inset;
  backdrop-filter: blur(6px) saturate(120%);
  transition: transform .2s ease, box-shadow .2s ease;
  display: flex;
  align-items: center;
  gap: 10px;
}
.urgent-list li:hover,
#urgent li:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 22px rgba(0,0,0,.45), 0 0 14px rgba(164,107,255,.35), 0 0 0 1px rgba(164,107,255,.25) inset;
}
.urgent-list li::before,
#urgent li::before {
  content: "⚠️";
  flex-shrink: 0;
  font-size: 1.1em;
  opacity: .85;
}
</style>
<style id="bh-urgent-chips-v3">
/* Siatka jak w Objawach: równe, „kafelkowe” elementy */
#s-objawy #urgent{
  display:grid !important;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)) !important;
  gap:12px !important;
  margin-top:10px !important;
}

/* Każdy punkt = nowoczesny kafelek (kwadratowy/zaokrąglone rogi) */
#s-objawy #urgent li{
  display:flex !important;
  align-items:center !important;
  gap:10px !important;

  min-height:56px !important;
  padding:12px 14px !important;

  border-radius:16px !important;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)) !important;
  border:1px solid rgba(164,107,255,.20) !important;
  color:#eaf2ff !important;

  box-shadow:
    0 8px 22px rgba(8,10,22,.42),
    0 0 0 1px rgba(164,107,255,.14) inset,
    0 0 18px rgba(96,165,250,.18) !important;
  backdrop-filter: blur(6px) saturate(120%) !important;

  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease !important;

  width:100% !important;   /* równe szerokości w kolumnach */
  margin:0 !important;
  word-break: break-word !important;
}

/* ikonka ostrzeżenia – dyskretna, spójna */
#s-objawy #urgent li::before{
  content:"🚨";
  display:inline-grid;
  place-items:center;
  width:22px; height:22px;
  border-radius:8px;
  font-size:14px;
  background: rgba(59,130,246,.18);
  border:1px solid rgba(59,130,246,.45);
  box-shadow: inset 0 0 0 1px rgba(59,130,246,.2);
}

/* usuń kwadracik .cb – żeby nic nie nachodziło */
#s-objawy #urgent li .cb{ display:none !important; }

/* hover */
#s-objawy #urgent li:hover{
  transform: translateY(-2px);
  border-color: rgba(94,234,212,.55) !important;
  box-shadow:
    0 12px 28px rgba(8,10,22,.48),
    0 0 0 1px rgba(94,234,212,.28) inset,
    0 0 24px rgba(96,165,250,.32) !important;
}

/* „zaznaczony” (jeśli któryś punkt stanie się checked) – bardziej świeci */
#s-objawy #urgent li.li-checked{
  background:
    linear-gradient(180deg, rgba(59,130,246,.22), rgba(255,255,255,.04)) !important;
  border-color: rgba(59,130,246,.75) !important;
  box-shadow:
    0 0 0 2px rgba(59,130,246,.65),
    0 10px 26px rgba(8,10,22,.5) !important;
}

/* nagłówek sekcji czerwonych flag – taki sam vibe */
#s-objawy .subhead{
  display:flex; align-items:center; gap:8px;
  font-weight:900; letter-spacing:.3px;
}
#s-objawy .subhead::before{ content:"🚩"; }

/* Responsywność – na bardzo wąskich ekranach jedna kolumna */
@media (max-width:420px){
  #s-objawy #urgent{
    grid-template-columns: 1fr !important;
  }
}
</style>

<style id="bh-objawy-final-wow">
/* ——— typografia i równa siatka ——— */
#s-objawy .card{border-radius:18px}
#s-objawy h3{font-weight:900; letter-spacing:.3px}
#s-objawy .subhead{display:flex;align-items:center;gap:8px;font-weight:900;letter-spacing:.3px}
#s-objawy .subhead::before{content:"🚩";}

/* ——— CHIPS „Objawy” (NIEBIESKIE) ——— */
#s-objawy #symp-common{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:12px; margin:10px 0 12px;
}
#s-objawy #symp-common li{
  display:flex; align-items:center; justify-content:center; text-align:center;
  min-height:54px; padding:10px 12px; margin:0; word-break:break-word;
  border-radius:16px; border:1px solid rgba(59,130,246,.35);
  background:linear-gradient(180deg,rgba(59,130,246,.18),rgba(255,255,255,.03));
  color:#eaf2ff;
  box-shadow:0 10px 24px rgba(8,10,22,.45), 0 0 0 1px rgba(59,130,246,.22) inset;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
#s-objawy #symp-common li:hover{transform:translateY(-2px);box-shadow:0 14px 30px rgba(8,10,22,.52),0 0 0 1px rgba(59,130,246,.42) inset}
#s-objawy #symp-common li .cb{display:none}
#s-objawy #symp-common li.li-checked{
  border-color:rgba(59,130,246,.9);
  box-shadow:0 0 0 2px rgba(59,130,246,.65), 0 14px 30px rgba(8,10,22,.55);
}

/* ——— RYZYKO (pasek turbo) ——— */
#s-objawy .risk-mini{margin:8px 0 8px}
#s-objawy .riskbar{
  height:14px; outline:1px solid rgba(255,255,255,.22); border-radius:999px; overflow:hidden;
  background:linear-gradient(90deg,#70e1b1,#ffd16c,#ff6b6b);
  box-shadow: inset 0 0 12px rgba(0,0,0,.25), 0 2px 16px rgba(59,130,246,.22);
}
#s-objawy .riskbar .cursor{
  width:18px; height:18px; border-radius:50%; background:#fff;
  box-shadow:0 0 0 4px rgba(255,255,255,.25), 0 0 22px rgba(59,130,246,.35);
}
#s-objawy .riskbar.bh-high{ animation: bhRiskPulse 1.4s ease-in-out infinite; }
@keyframes bhRiskPulse{
  0%{box-shadow: inset 0 0 12px rgba(0,0,0,.25), 0 0 16px rgba(255,107,107,.28)}
  50%{box-shadow: inset 0 0 16px rgba(0,0,0,.30), 0 0 28px rgba(255,107,107,.48)}
  100%{box-shadow: inset 0 0 12px rgba(0,0,0,.25), 0 0 16px rgba(255,107,107,.28)}
}

/* ——— CZERWONE FLAGI (CZERWONE, kwadratowe kafelki) ——— */
#s-objawy #urgent{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:12px; margin-top:10px;
}
#s-objawy #urgent li{
  display:flex; align-items:center; justify-content:center; text-align:center;
  min-height:56px; padding:12px 14px; margin:0; word-break:break-word;
  border-radius:16px;
  border:1px solid rgba(255,107,107,.35);
  background:linear-gradient(180deg,rgba(255,107,107,.14),rgba(255,255,255,.03));
  color:#ffeef0;
  box-shadow:0 10px 24px rgba(8,10,22,.45), 0 0 0 1px rgba(255,107,107,.18) inset;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
#s-objawy #urgent li:hover{transform:translateY(-2px);box-shadow:0 14px 30px rgba(8,10,22,.52),0 0 0 1px rgba(255,107,107,.42) inset}
#s-objawy #urgent li .cb{display:none}

/* ——— Pasek 112 – puls na czerwono przy zaznaczonych symptomach/flagach ——— */
#urgent-strip{
  margin-top:10px;
  border-radius:14px;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.16);
}
#urgent-strip .cta{font-weight:900}
#urgent-strip.bh-alert{
  border-color:rgba(255,107,107,.75);
  box-shadow:0 0 0 2px rgba(255,107,107,.55), 0 10px 26px rgba(8,10,22,.5);
  animation: bhRedPulse 1.8s ease-in-out infinite;
}
@keyframes bhRedPulse{
  0%{box-shadow:0 0 0 2px rgba(255,107,107,.35),0 10px 26px rgba(8,10,22,.45)}
  50%{box-shadow:0 0 0 6px rgba(255,107,107,.25),0 10px 30px rgba(8,10,22,.55)}
  100%{box-shadow:0 0 0 2px rgba(255,107,107,.35),0 10px 26px rgba(8,10,22,.45)}
}

/* ——— Hint „Choroby / Lekarze” – puls niebieski gdy coś zaznaczone ——— */
#dx-hint .bh-cta-pulse{
  box-shadow:0 0 0 2px rgba(59,130,246,.55), 0 12px 28px rgba(8,10,22,.5);
  border:1px solid rgba(59,130,246,.85);
  background:linear-gradient(180deg,rgba(59,130,246,.22),rgba(255,255,255,.05));
  animation: bhBluePulse 2.1s ease-in-out infinite;
}
@keyframes bhBluePulse{
  0%{box-shadow:0 0 0 2px rgba(59,130,246,.45), 0 10px 22px rgba(8,10,22,.45)}
  50%{box-shadow:0 0 0 6px rgba(59,130,246,.30), 0 14px 30px rgba(8,10,22,.55)}
  100%{box-shadow:0 0 0 2px rgba(59,130,246,.45), 0 10px 22px rgba(8,10,22,.45)}
}

/* responsywność: jedna kolumna na bardzo małych ekranach */
@media (max-width:420px){
  #s-objawy #symp-common, #s-objawy #urgent{ grid-template-columns:1fr; }
}
</style>
<script id="bh-objawy-final-js">
(function(){
  // bezpieczne wywołanie po każdym kliknięciu na objaw/flagę
  function syncUIStates(){
    const selectedSymptoms = document.querySelectorAll('#symp-common li.li-checked').length;
    const selectedUrgent   = document.querySelectorAll('#urgent li.li-checked').length;

    // czerwony puls na pasku „Zadzwoń 112” jeśli cokolwiek zaznaczone (objawy lub flagi)
    const strip = document.getElementById('urgent-strip');
    if(strip) strip.classList.toggle('bh-alert', (selectedSymptoms + selectedUrgent) > 0);

    // niebieski puls na przyciskach "Choroby" / "Lekarze" w hint'cie
    const dxBtn   = document.getElementById('dx-open');
    const docsBtn = document.getElementById('docs-open');
    const shouldPulse = (selectedSymptoms + selectedUrgent) > 0;
    if(dxBtn)   dxBtn.classList.toggle('bh-cta-pulse', shouldPulse);
    if(docsBtn) docsBtn.classList.toggle('bh-cta-pulse', shouldPulse);

    // „High risk” – jeśli suwak ryzyka ≥ 70%, podbij glow paska
    const riskBar = document.getElementById('riskbar') || document.querySelector('#s-objawy .riskbar');
    const cursor  = document.getElementById('risk-cursor-card');
    if(riskBar && cursor){
      const left = parseFloat(cursor.style.left||'0');
      riskBar.classList.toggle('bh-high', left >= 70);
    }
  }

  // zepnij pod istniejące zdarzenie z Twojego pliku
  document.addEventListener('bh:symptoms-changed', syncUIStates);

  // oraz obserwuj hint – bo jego węzły bywają podmieniane
  const hint = document.getElementById('dx-hint');
  if(hint){
    new MutationObserver(syncUIStates).observe(hint,{childList:true,subtree:true});
  }

  // pierwsze wywołanie po załadowaniu
  window.addEventListener('DOMContentLoaded', syncUIStates);
})();
</script>
<style id="bh-hero-pro">
/* —— KARTA HERO (glass + siatka + eleganckie tytuły) —— */
header.app .hero{
  border-radius:20px;
  border:1px solid rgba(164,107,255,.22);
  background:
    radial-gradient(120% 140% at 20% 0%, rgba(164,107,255,.10), transparent 60%),
    radial-gradient(120% 140% at 100% 0%, rgba(94,234,212,.10), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  backdrop-filter: blur(10px) saturate(125%);
  box-shadow: 0 22px 54px rgba(8,10,22,.55), inset 0 0 0 1px rgba(255,255,255,.05);
}

/* breadcrumb + label */
header.app .crumbs{
  font-weight:900; letter-spacing:.3px; color:#d8e6ff; opacity:.95;
}
header.app .label{
  background:linear-gradient(180deg,rgba(164,107,255,.16),rgba(255,255,255,.03));
  border:1px solid rgba(164,107,255,.35);
  box-shadow:0 8px 22px rgba(8,10,22,.45), inset 0 0 0 1px rgba(255,255,255,.06);
  border-radius:999px;
}

/* —— KROKI — kwadratowe „capsule” z numerem —— */
.steps{
  display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin:14px 0 0;
}
.step{
  position:relative; border-radius:16px; padding:14px 12px;
  text-align:center; font-weight:900; letter-spacing:.3px; color:#e8f0ff;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:0 12px 28px rgba(8,10,22,.42), inset 0 0 0 1px rgba(255,255,255,.04);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.step::before{
  /* numer jako badge (odczyta cyfrę z treści „1. …”) */
  content: attr(id);
}
.step:hover{ transform:translateY(-2px) }
.step.active{
  border-color:rgba(59,130,246,.75);
  box-shadow:0 0 0 2px rgba(59,130,246,.55), 0 14px 34px rgba(8,10,22,.52);
}
.step small{display:block;color:#bcd2ff;font-weight:800;margin-top:4px}

/* —— ZAKŁADKI (Objawy/Przyczyny/…/Lekarze) —— */
.tabs{ gap:10px; margin:16px 0 8px }
.tab{
  padding:10px 14px; border-radius:14px; font-weight:900; letter-spacing:.3px;
  border:1px solid rgba(255,255,255,.16);
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  color:#e9efff; cursor:pointer; user-select:none;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
  transition:transform .12s ease, box-shadow .18s ease, border-color .18s ease;
}
.tab:hover{ transform:translateY(-1px) }
.tab[aria-selected="true"]{
  border-color:rgba(94,234,212,.7);
  box-shadow:0 0 0 2px rgba(94,234,212,.55), 0 10px 24px rgba(8,10,22,.45);
}

/* ikonki na podstawie data-variant (bez JS) */
.tab[data-variant="symptoms"]::before{content:"🩺 "; }
.tab[data-variant="causes"]::before{content:"🧩 "; }
.tab[data-variant="firstaid"]::before{content:"⛑️ "; }
.tab[data-variant="otc"]::before{content:"💊 "; }
.tab[data-variant="rx"]::before{content:"🧾 "; }
.tab[data-variant="rehab"]::before{content:"🏃 "; }
.tab[data-variant="myths"]::before{content:"❗ "; }
.tab[data-variant="faq"]::before{content:"❓ "; }
.tab[data-variant="dx"]::before{content:"🧠 "; }
.tab[data-variant="docs"]::before{content:"👩‍⚕️ "; }

/* —— komunikaty pod zakładkami —— */
.hero-note,.legend{
  position:relative; padding:.6rem .8rem; border-radius:12px; margin:.3rem 0 0;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.14);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
}
.hero-note{ color:#cfe2ff; font-weight:800 }
.legend{ color:#e9f2ff; font-weight:900 }

/* responsywność: ciasne ekrany */
@media (max-width:720px){
  .steps{grid-template-columns:repeat(2,1fr)}
  .tab{padding:9px 12px}
}
@media (max-width:420px){
  .steps{grid-template-columns:1fr}
}
</style>
<script id="bh-hero-pro-js">
(function(){
  const steps = {
    one:  ['symptoms','causes','firstaid','otc','rx','rehab','myths','faq'],
    two:  ['dx'],
    three:['docs'],
    four: [] // „co dalej” zostaje pasywny
  };
  function markStep(){
    const current = document.querySelector('.tabs .tab[aria-selected="true"]')?.dataset.variant || 'symptoms';
    const s1 = document.getElementById('step-1'),
          s2 = document.getElementById('step-2'),
          s3 = document.getElementById('step-3'),
          s4 = document.getElementById('step-4');
    [s1,s2,s3,s4].forEach(el=>el && el.classList.remove('active'));
    if(steps.one.includes(current))  s1?.classList.add('active');
    else if(steps.two.includes(current))  s2?.classList.add('active');
    else if(steps.three.includes(current))s3?.classList.add('active');
    else                                  s4?.classList.add('active');
  }
  // start + każdy klik w tab
  window.addEventListener('DOMContentLoaded', markStep);
  document.querySelectorAll('.tabs .tab').forEach(t=>t.addEventListener('click', markStep));
})();
</script>
<style id="bh-card-fix">
/* Wyłącz mocny glow dla dużych kart Choroby i Lekarze */
#s-dx, #s-docs {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.08),
              0 10px 24px rgba(8,10,22,.45);
  border:1px solid rgba(164,107,255,.25);
  background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
}

/* Przywracamy glow tylko dla guzików Choroby / Lekarze */
.tab[data-variant="dx"][aria-selected="true"],
.tab[data-variant="docs"][aria-selected="true"],
a.bh-dx-btn, a.bh-docs-btn {
  animation: pulseBlue 2s infinite;
  border-color:rgba(94,234,212,.8)!important;
  box-shadow:0 0 0 2px rgba(94,234,212,.55),
             0 0 18px rgba(94,234,212,.45);
}

@keyframes pulseBlue {
  0% { box-shadow:0 0 0 2px rgba(94,234,212,.55),
                   0 0 12px rgba(94,234,212,.4); }
  50%{ box-shadow:0 0 0 3px rgba(94,234,212,.85),
                   0 0 22px rgba(94,234,212,.75); }
  100%{ box-shadow:0 0 0 2px rgba(94,234,212,.55),
                   0 0 12px rgba(94,234,212,.4); }
}
</style>
<style id="bh-card-fix-strong">
/* WYŁĄCZ GLOW TYLKO NA DUŻYCH KARTACH TREŚCI */
#s-dx.card, #s-docs.card,
#s-dx.card.glow--blue, #s-docs.card.glow--blue {
  /* spokojna, elegancka karta */
  border: 1px solid rgba(164,107,255,.24) !important;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)) !important;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.08) !important,
    0 10px 24px rgba(8,10,22,.45) !important;
  animation: none !important;
  filter: none !important;
}

/* jeśli glow był robiony pseudo-elementami – wyłącz je */
#s-dx.card::before, #s-dx.card::after,
#s-docs.card::before, #s-docs.card::after {
  content: none !important;
  display: none !important;
}

/* ZOSTAW glow NA PRZYCISKACH „Choroby” / „Lekarze” (góra i dół) */
.tab[data-variant="dx"][aria-selected="true"],
.tab[data-variant="docs"][aria-selected="true"],
#dx-open, #docs-open {
  border-color: rgba(94,234,212,.85) !important;
  box-shadow:
    0 0 0 2px rgba(94,234,212,.55),
    0 0 18px rgba(94,234,212,.45) !important;
  animation: bhPulseBlue 2s ease-in-out infinite !important;
}

@keyframes bhPulseBlue {
  0%   { box-shadow:0 0 0 2px rgba(94,234,212,.55), 0 0 12px rgba(94,234,212,.40); }
  50%  { box-shadow:0 0 0 4px rgba(94,234,212,.85), 0 0 26px rgba(94,234,212,.70); }
  100% { box-shadow:0 0 0 2px rgba(94,234,212,.55), 0 0 12px rgba(94,234,212,.40); }
}
</style>
<style id="bh-topbar-neo">
/* ====== NOWOCZESNY TOPBAR (breadcrumbs + steps + tabsy) ====== */

/* kontener nagłówka */
header.app .hero{
  border-radius: 18px;
  border: 1px solid rgba(164,107,255,.22);
  background: radial-gradient(120% 140% at 0% 0%, rgba(94,234,212,.08), transparent 55%),
              radial-gradient(120% 140% at 100% 0%, rgba(164,107,255,.08), transparent 55%),
              linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  box-shadow:
    0 22px 48px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06);
}

/* ---------- Breadcrumb = chipsy ---------- */
.crumbs{
  display:flex; flex-wrap:wrap; gap:8px; align-items:center;
  font-weight:900; letter-spacing:.25px;
}
.crumbs .bh-crumb{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:
    0 6px 14px rgba(8,10,22,.35),
    inset 0 0 0 1px rgba(255,255,255,.06);
  --tx:linear-gradient(90deg,#e6f0ff,#b9c7ff);
  -webkit-background-clip:text; background-clip:text;
  color:transparent; background-image:var(--tx);
  white-space:nowrap;
}
.crumbs .bh-sep{
  opacity:.55; color:#cfe2ff; font-weight:900;
  padding:0 2px;
}

/* ---------- Prawy badge (label) ---------- */
.hero-top .label{
  background: rgba(30,40,90,.35);
  border:1px solid rgba(164,107,255,.32);
  box-shadow:
    0 10px 24px rgba(8,10,22,.45),
    0 0 0 1px rgba(255,255,255,.06) inset,
    0 0 24px rgba(94,234,212,.18);
  color:#eaf2ff;
}
.hero-top .label #label-icon{
  display:inline-grid; place-items:center;
  width:18px; height:18px; border-radius:6px;
  background:rgba(94,234,212,.18);
  box-shadow:inset 0 0 0 1px rgba(94,234,212,.35);
}

/* ---------- Kafelki step-1..4 ---------- */
.steps{gap:12px}
.steps .step{
  border-radius:16px;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 14px 28px rgba(8,10,22,.42), inset 0 0 0 1px rgba(255,255,255,.06);
  color:#eaf2ff;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.steps .step:hover{ transform:translateY(-2px); border-color:rgba(94,234,212,.45) }
.steps .step.active{
  box-shadow:
    0 0 0 2px rgba(94,234,212,.45),
    0 16px 34px rgba(8,10,22,.5);
}

/* ---------- Tabsy (Objawy/Przyczyny/...) ---------- */
.tabs{ gap:10px; }
.tabs .tab{
  display:inline-flex; align-items:center; gap:8px;
  border-radius:14px; padding:10px 14px; font-weight:900;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.20);
  color:#eaf2ff;
  box-shadow:0 10px 20px rgba(8,10,22,.42), inset 0 0 0 1px rgba(255,255,255,.05);
}
.tabs .tab[aria-selected="true"]{
  border-color:rgba(94,234,212,.65);
  box-shadow:
    0 0 0 2px rgba(94,234,212,.55),
    0 0 22px rgba(94,234,212,.35),
    inset 0 0 0 1px rgba(255,255,255,.06);
}

/* drobny porządek napisów edukacyjnych */
.hero .hero-note, .hero .legend{
  font-weight:800; letter-spacing:.2px;
  color:#d6e4ff;
  text-shadow:0 1px 0 rgba(0,0,0,.2);
}
.hero .hero-note b, .hero .legend b{ color:#fff }
@media (prefers-reduced-motion:no-preference){
  .crumbs .bh-crumb{ animation:bhSheen 6s linear infinite; }
  @keyframes bhSheen{
    0%{ --tx:linear-gradient(90deg,#e6f0ff,#b9c7ff) }
    50%{ --tx:linear-gradient(90deg,#b9c7ff,#e6f0ff) }
    100%{ --tx:linear-gradient(90deg,#e6f0ff,#b9c7ff) }
  }
}
</style>

<script>
/* Rebuild breadcrumb → „chipsy” z separatorami ─ bez zmiany logiki */
(function(){
  const cr = document.getElementById('crumbs');
  if(!cr || cr.dataset.bhCrBuilt) return;
  cr.dataset.bhCrBuilt = '1';

  // Zbierz obecne elementy typ/label
  const typ  = document.getElementById('crumb-typ')?.textContent?.trim() || '';
  const det  = document.getElementById('crumb-label')?.textContent?.trim() || '';
  // Z czego zbudować listę
  const items = [
    { ico:'🏠', txt:'Boli Help' },
    { ico:'👤', txt: typ },
    { ico:'📄', txt: det }
  ].filter(x => x.txt);

  // Czyść i zbuduj
  cr.innerHTML = '';
  items.forEach((it,i)=>{
    const span = document.createElement('span');
    span.className = 'bh-crumb';
    span.innerHTML = `<span aria-hidden="true">${it.ico}</span><span>${it.txt}</span>`;
    cr.appendChild(span);
    if(i < items.length - 1){
      const sep = document.createElement('span');
      sep.className = 'bh-sep'; sep.textContent = '›';
      cr.appendChild(sep);
    }
  });
})();
</script>
<style id="bh-topbar-clean">
/* ——— Top hero: tylko „Boli Help” + tytuł na środku ——— */
.hero-top{
  align-items:center; gap:12px;
}
.crumbs{
  display:inline-flex; align-items:center; gap:10px;
  font-weight:900; color:#eaf2ff;
}
.crumbs .home-chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 6px 14px rgba(8,10,22,.35), inset 0 0 0 1px rgba(255,255,255,.06);
}
.bh-title{
  margin:0 auto;                    /* wycentruj */
  font-weight:1000; letter-spacing:.3px;
  font-size:clamp(18px, 2.2vw, 24px);
  color:#f3f7ff;
  text-shadow:0 2px 10px rgba(0,0,0,.35);
}
.bh-title small{
  display:block; margin-top:2px; font-weight:800; color:#cfe2ff;
}

/* badge po prawej zostawiamy, ale tonujemy */
.hero-top .label{
  background:rgba(30,40,90,.28);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 8px 20px rgba(8,10,22,.4), inset 0 0 0 1px rgba(255,255,255,.06);
  color:#eaf2ff;
}

/* ——— Tabsy (Objawy/Przyczyny/…) eleganckie, trochę większe ——— */
.tabs{ gap:12px; }
.tabs .tab{
  padding:12px 16px;                /* większe */
  border-radius:12px;
  font-weight:900;
  background:
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.18);
  color:#eaf2ff;
  box-shadow:0 10px 20px rgba(8,10,22,.38), inset 0 0 0 1px rgba(255,255,255,.05);
  transition:transform .16s ease, box-shadow .16s ease, border-color .16s ease, background .16s ease;
}
.tabs .tab:hover{
  transform:translateY(-1px);
  border-color:rgba(146,174,255,.45);
}
.tabs .tab[aria-selected="true"]{
  background:
    linear-gradient(180deg, rgba(146,174,255,.18), rgba(255,255,255,.03));
  border-color:rgba(146,174,255,.6);
  box-shadow:
    0 0 0 2px rgba(146,174,255,.45),
    0 12px 28px rgba(8,10,22,.46),
    inset 0 0 0 1px rgba(255,255,255,.06);
}

/* drobne porządki responsywne */
@media (max-width:780px){
  .hero-top{ row-gap:8px }
  .bh-title{ order:2; text-align:center; width:100% }
  .crumbs{ order:1 }
  .hero-top .label{ order:3 }
}
</style>

<script>
/* Zredukowany breadcrumb + tytuł centralny „Kobieta — Głowa” */
(function(){
  const wrap = document.querySelector('.hero-top');
  const crumbs = document.getElementById('crumbs');
  if(!wrap || !crumbs || crumbs.dataset.bhSlimmed) return;
  crumbs.dataset.bhSlimmed = '1';

  // 1) breadcrumb → tylko home chip
  crumbs.innerHTML = '';
  const chip = document.createElement('span');
  chip.className = 'home-chip';
  chip.innerHTML = '🏠 <span>Boli Help</span>';
  crumbs.appendChild(chip);

  // 2) centralny tytuł
  const title = document.createElement('div');
  title.className = 'bh-title';

  // dane: mamy TYP, entry, LABEL w tym pliku
  const typMapPL = { kobieta:'Kobieta', mezczyzna:'Mężczyzna', dziecko:'Dziecko' };
  const typMapEN = { kobieta:'Woman',   mezczyzna:'Man',       dziecko:'Child'   };
  const isEN = (typeof L==='function' ? L()==='en' : false);
  const typTxt = (isEN ? typMapEN : typMapPL)[(typeof TYP!=='undefined'?TYP:'kobieta')] || (isEN?'Person':'Osoba');

  // nazwa części: bierzemy label z #label-text lub z entry.label
  const part = (document.getElementById('label-text')?.textContent || (typeof entry!=='undefined' && entry.label) || (typeof LABEL!=='undefined' && LABEL) || '').replace(/\s+•\s+.*$/,'').trim();
  const line = isEN ? `${typTxt} — ${part}` : `${typTxt} — ${part}`;

  title.innerHTML = line;

  // wstaw tytuł jako drugi element (na środku)
  // jeśli już mamy jakiś tytuł, podmień
  const old = wrap.querySelector('.bh-title');
  if(old) old.remove();
  wrap.insertBefore(title, wrap.children[1]);
})();
</script>
<style id="bh-urgent-red-polish">
/* ========== OBJAWY (łagodne dopieszczenie kształtu) ========== */
#symp-common.clean{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px;
}
#symp-common.clean > li{
  display:flex; align-items:center; justify-content:center;
  padding:14px 16px; min-height:56px; text-align:center;
  border-radius:16px;                           /* bardziej „kwadratowe” */
  border:1px solid rgba(146,174,255,.35);
  background:linear-gradient(180deg, rgba(146,174,255,.10), rgba(255,255,255,.02));
  box-shadow:
    0 6px 18px rgba(8,10,22,.45),
    inset 0 0 0 1px rgba(255,255,255,.05);
  transition:.16s ease;
  position:relative; overflow:hidden;
}
#symp-common.clean > li:hover{
  transform:translateY(-1px);
  border-color:rgba(146,174,255,.55);
}
#symp-common.clean > li.li-checked{
  border-color:rgba(94,234,212,.75);
  background:linear-gradient(180deg, rgba(94,234,212,.18), rgba(255,255,255,.03));
  box-shadow:
    0 0 0 2px rgba(94,234,212,.45),
    0 14px 26px rgba(8,10,22,.50),
    inset 0 0 0 1px rgba(255,255,255,.06);
}
/* schowaj „techniczny” kwadracik przy chipie */
#symp-common .cb{ display:none !important }

/* ✔ zielony „ptaszek” po prawej – tylko dla OBJAWÓW */
#symp-common.clean > li.li-checked::after{
  content:"✓";
  position:absolute; right:12px; top:10px;
  font-weight:900; font-size:16px;
  color:#6ef5ce; opacity:.95;
}

/* ========== FLAGI (czerwone) ========== */
#urgent.clean{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:12px;
  margin-top:10px;
}
#urgent.clean > li{
  display:flex; align-items:center; justify-content:center;
  padding:14px 16px; min-height:58px; text-align:center;
  border-radius:16px;                           /* taki sam kształt jak u objawów */
  border:1px solid rgba(164,107,255,.35);
  background:linear-gradient(180deg, rgba(164,107,255,.10), rgba(255,255,255,.02));
  box-shadow:0 6px 18px rgba(8,10,22,.45), inset 0 0 0 1px rgba(255,255,255,.05);
  transition:.16s ease;
  position:relative; overflow:hidden;
  color:#eaf2ff;
}
/* efekt hover – delikatny, fiołkowy */
#urgent.clean > li:hover{
  transform:translateY(-1px);
  border-color:rgba(255,107,107,.45);
}
/* ZAZNACZONA FLAGA – czerwone wypełnienie, brak „ptaszka” */
#urgent.clean > li.li-checked{
  border-color:rgba(255,107,107,.80);
  background:
    linear-gradient(180deg, rgba(255,107,107,.22), rgba(255,255,255,.03));
  box-shadow:
    0 0 0 2px rgba(255,107,107,.55),
    0 14px 26px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06);
}
/* zero checkboxa i zero zielonego ptaszka przy flagach */
#urgent .cb{ display:none !important }
#urgent.clean > li::after{ content:""; }       /* pewność: żadnych ikon */

/* Pasek „Ryzyko” – lekko pogrubiony napis */
.risk-mini small{ font-size:13px; letter-spacing:.2px; }

/* responsywnie – ciut gęściej na wąskich */
@media (max-width:560px){
  #symp-common.clean{ grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:10px; }
  #urgent.clean{ grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px; }
}
</style>
<style id="bh-urgent-force-red">
/* --- FORSUJEMY NOWY KSZTAŁT/UKŁAD DLA FLAG --- */
main #urgent.clean{
  display:grid !important;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr)) !important;
  gap:12px !important;
  margin-top:10px !important;
}

/* stan podstawowy (niezaznaczone) – ten sam kształt co Objawy */
main #urgent.clean > li{
  display:flex !important; align-items:center !important; justify-content:center !important;
  padding:14px 16px !important; min-height:58px !important; text-align:center !important;
  border-radius:16px !important;
  border:1px solid rgba(164,107,255,.35) !important;
  background:linear-gradient(180deg, rgba(164,107,255,.10), rgba(255,255,255,.02)) !important;
  box-shadow:0 6px 18px rgba(8,10,22,.45), inset 0 0 0 1px rgba(255,255,255,.05) !important;
  transition:.16s ease !important; position:relative !important; overflow:hidden !important;
  color:#eaf2ff !important;
}

/* hover */
main #urgent.clean > li:hover{
  transform:translateY(-1px) !important;
  border-color:rgba(255,107,107,.45) !important;
}

/* ZAZNACZONA FLAGA – CZERWONA (bez żadnych ptaszków) */
main #urgent.clean > li.li-checked{
  border-color:rgba(255,107,107,.85) !important;
  background:linear-gradient(180deg, rgba(255,107,107,.22), rgba(255,255,255,.03)) !important;
  box-shadow:
    0 0 0 2px rgba(255,107,107,.55),
    0 14px 26px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06) !important;
}

/* wyłącz „techniczne” checkboxy i JAKIEKOLWIEK pseudo-ikonki */
main #urgent .cb{ display:none !important; }
main #urgent.clean > li::after{ content:"" !important; display:none !important; }
main #urgent.clean > li.li-checked::after{ content:"" !important; display:none !important; }

/* responsywność – gęściej na wąskich */
@media (max-width:560px){
  main #urgent.clean{
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr)) !important;
    gap:10px !important;
  }
}
</style>
<style id="bh-urgent-override">
/* UL — układ siatki jak w Objawach */
body[data-page="szczegoly"] main .cards .card ul#urgent.clean{
  display:grid !important;
  grid-template-columns:repeat(auto-fit, minmax(240px,1fr)) !important;
  gap:12px !important;
  margin-top:10px !important;
}

/* LI — kształt/wygląd (stan bazowy) */
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li{
  display:flex !important; align-items:center !important; justify-content:center !important;
  padding:14px 16px !important; min-height:58px !important; text-align:center !important;
  border-radius:16px !important;
  border:1px solid rgba(164,107,255,.35) !important;
  background:linear-gradient(180deg, rgba(164,107,255,.10), rgba(255,255,255,.02)) !important;
  box-shadow:0 6px 18px rgba(8,10,22,.45), inset 0 0 0 1px rgba(255,255,255,.05) !important;
  color:#eaf2ff !important; position:relative !important; overflow:hidden !important;
  transition:transform .16s ease, box-shadow .16s ease, border-color .16s ease !important;
}
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li:hover{
  transform:translateY(-1px) !important;
  border-color:rgba(255,107,107,.45) !important;
}

/* ZAZNACZONA FLAGA — czerwony motyw (bez ptaszka) */
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li.li-checked{
  border-color:rgba(255,107,107,.85) !important;
  background:linear-gradient(180deg, rgba(255,107,107,.22), rgba(255,255,255,.03)) !important;
  box-shadow:
    0 0 0 2px rgba(255,107,107,.55),
    0 14px 26px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06) !important;
}

/* Wyłącz checkbox i jakiekolwiek pseudo-ikonki tylko w #urgent */
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li .cb{ display:none !important; }
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li::before,
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li::after{ content:none !important; display:none !important; }
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li.li-checked::before,
body[data-page="szczegoly"] main .cards .card ul#urgent.clean > li.li-checked::after{ content:none !important; display:none !important; }

/* Trochę gęściej na wąskich ekranach */
@media (max-width:560px){
  body[data-page="szczegoly"] main .cards .card ul#urgent.clean{
    grid-template-columns:repeat(auto-fit, minmax(180px,1fr)) !important;
    gap:10px !important;
  }
}
</style>
<style id="bh-final-pill-shape-and-red">
/* --- wspólna siatka dla Objawów i Flag --- */
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean,
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean{
  display:grid !important;
  grid-template-columns:repeat(auto-fit, minmax(240px,1fr)) !important;
  gap:12px !important;
}

/* --- wygląd kafelków (stan bazowy) --- */
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean > li,
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean      > li{
  display:flex !important; align-items:center !important; justify-content:center !important;
  min-height:58px !important; padding:14px 16px !important; text-align:center !important;
  border-radius:16px !important;
  border:1px solid rgba(164,107,255,.35) !important;
  background:linear-gradient(180deg, rgba(164,107,255,.10), rgba(255,255,255,.02)) !important;
  color:#eaf2ff !important;
  box-shadow:0 6px 18px rgba(8,10,22,.45), inset 0 0 0 1px rgba(255,255,255,.05) !important;
  transition:transform .16s ease, box-shadow .16s ease, border-color .16s ease !important;
  position:relative !important; overflow:hidden !important;
}
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean > li:hover,
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean      > li:hover{
  transform:translateY(-1px) !important;
  border-color:rgba(255,107,107,.45) !important;
}

/* --- ZAZNACZONE = CZERWONE (bez ptaszka) --- */
/* Objawy */
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean > li.li-checked{
  border-color:rgba(255,107,107,.9) !important;
  background:linear-gradient(180deg, rgba(255,107,107,.22), rgba(255,255,255,.03)) !important;
  box-shadow:
    0 0 0 2px rgba(255,107,107,.55),
    0 14px 26px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06) !important;
}
/* Flagi */
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean > li.li-checked{
  border-color:rgba(255,107,107,.9) !important;
  background:linear-gradient(180deg, rgba(255,107,107,.22), rgba(255,255,255,.03)) !important;
  box-shadow:
    0 0 0 2px rgba(255,107,107,.55),
    0 14px 26px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06) !important;
}

/* --- usuń wizualny checkbox i ptaszki tylko w tych listach --- */
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean > li .cb,
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean      > li .cb{
  display:none !important;
}
/* jeśli gdzieś był pseudo-„ptaszek” przez ::after — wyłącz */
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean > li::before,
body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean > li::after,
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean      > li::before,
body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean      > li::after{
  content:none !important;
}

/* węższe ekrany */
@media (max-width:560px){
  body[data-page="szczegoly"] .cards #s-objawy ul#symp-common.clean,
  body[data-page="szczegoly"] .cards #s-objawy ul#urgent.clean{
    grid-template-columns:repeat(auto-fit, minmax(180px,1fr)) !important;
    gap:10px !important;
  }
}
</style>
<style id="bh-symptoms-urgent-polish">
/* --- WSPÓLNA SIATKA — objawy + czerwone flagi --- */
body[data-page="szczegoly"] #s-objawy ul#symp-common.clean,
body[data-page="szczegoly"] #s-objawy ul#urgent.clean{
  display:grid !important;
  grid-template-columns:repeat(3, minmax(220px, 1fr)) !important;
  gap:12px !important;
  align-items:stretch !important;
}

/* Duże ekrany – 4 kolumny */
@media (min-width:1180px){
  body[data-page="szczegoly"] #s-objawy ul#symp-common.clean,
  body[data-page="szczegoly"] #s-objawy ul#urgent.clean{
    grid-template-columns:repeat(4, minmax(220px, 1fr)) !important;
  }
}
/* Tablety */
@media (max-width:900px){
  body[data-page="szczegoly"] #s-objawy ul#symp-common.clean,
  body[data-page="szczegoly"] #s-objawy ul#urgent.clean{
    grid-template-columns:repeat(2, minmax(180px, 1fr)) !important;
  }
}
/* Telefony wąskie */
@media (max-width:520px){
  body[data-page="szczegoly"] #s-objawy ul#symp-common.clean,
  body[data-page="szczegoly"] #s-objawy ul#urgent.clean{
    grid-template-columns:1fr !important;
    gap:10px !important;
  }
}

/* --- BAZOWY KAFEL — jednakowy kształt/typografia --- */
:root{
  --chip-r:16px;             /* promień */
  --chip-h:56px;             /* wysokość objawów */
  --chip-h-urgent:54px;      /* wysokość flag (odrobinę niższe) */
  --chip-b:1px;              /* grubość obramowania */
  --chip-t:15px;             /* bazowy rozmiar fontu */
}
body[data-page="szczegoly"] #s-objawy ul#symp-common.clean > li,
body[data-page="szczegoly"] #s-objawy ul#urgent.clean      > li{
  display:flex !important; align-items:center !important; justify-content:center !important;
  text-align:center !important;
  border-radius:var(--chip-r) !important;
  border:var(--chip-b) solid rgba(164,107,255,.32) !important;
  background:linear-gradient(180deg, rgba(164,107,255,.10), rgba(255,255,255,.02)) !important;
  box-shadow:
    0 10px 22px rgba(8,10,22,.40),
    inset 0 0 0 1px rgba(255,255,255,.05) !important;
  padding:12px 14px !important;
  color:#e9f2ff !important;
  font-weight:800 !important;
  letter-spacing:.2px !important;
  font-size:var(--chip-t) !important;
  line-height:1.2 !important;
  min-height:var(--chip-h) !important;
  position:relative !important; overflow:hidden !important;
  transition:transform .16s ease, box-shadow .16s ease, border-color .16s ease, background .16s ease !important;
}

/* Flagi – odrobinę niższe, żeby wizualnie „ustąpiły” objawom, ale ten sam kształt */
body[data-page="szczegoly"] #s-objawy ul#urgent.clean > li{
  min-height:var(--chip-h-urgent) !important;
}

/* Hover – delikatny podbłysk */
body[data-page="szczegoly"] #s-objawy ul#symp-common.clean > li:hover,
body[data-page="szczegoly"] #s-objawy ul#urgent.clean      > li:hover{
  transform:translateY(-1px) !important;
  border-color:rgba(255,255,255,.38) !important;
  box-shadow:
    0 14px 26px rgba(8,10,22,.46),
    0 0 0 1px rgba(164,107,255,.26) inset !important;
}

/* ZAZNACZONE (obu list) — czerwone, spójne, bez ptaszków */
body[data-page="szczegoly"] #s-objawy :is(ul#symp-common.clean, ul#urgent.clean) > li.li-checked{
  border-color:rgba(255,107,107,.90) !important;
  background:
    radial-gradient(120% 120% at 50% 0%, rgba(255,107,107,.25), rgba(255,255,255,0)) ,
    linear-gradient(180deg, rgba(255,107,107,.18), rgba(255,255,255,.03)) !important;
  box-shadow:
    0 0 0 2px rgba(255,107,107,.55),
    0 16px 30px rgba(8,10,22,.55),
    inset 0 0 0 1px rgba(255,255,255,.06) !important;
  color:#fff !important;
}

/* Usuń mini-checkboxy/ptaszki tylko w tych listach */
body[data-page="szczegoly"] #s-objawy :is(#symp-common,#urgent) .cb{ display:none !important; }

/* Podpis „Kiedy się niepokoić …” – równo z siatką */
body[data-page="szczegoly"] #s-objawy .subhead{
  display:flex; align-items:center; gap:8px;
  font-weight:900; letter-spacing:.25px; color:#f0f5ff;
  margin: 14px 2px 6px !important;
}
body[data-page="szczegoly"] #s-objawy .subhead::before{
  content:"⚠️"; opacity:.9; filter:drop-shadow(0 0 6px rgba(255,107,107,.35));
}

/* Pasek ryzyka – kosmetyka spacingu, żeby całość była symetryczna */
body[data-page="szczegoly"] #s-objawy .risk-mini{ margin:.35rem 2px .65rem !important; }
body[data-page="szczegoly"] #s-objawy .riskbar{ height:14px !important; }
body[data-page="szczegoly"] #s-objawy .cursor{ width:18px !important; height:18px !important; }
</style>
<style>
  /* Delikatne przesunięcie tłumacza w lewo */
  #bhLangPick {
    right: 40px !important; /* było 20px/24px, teraz dalej od krawędzi */
  }

  @media (max-width:768px){
    #bhLangPick {
      right: 24px !important; /* na telefonach też ciut w lewo */
    }
  }
</style>
<style id="bh-lang-override-final">
  /* Najwyższa możliwa specyficzność + !important, tylko na tej stronie */
  html body[data-page="szczegoly"] .langpick#bhLangPick,
  html body[data-page="szczegoly"] #bhLangPick,
  body[data-page="szczegoly"] #bhLangPick {
    position: fixed !important;
    top: 16px !important;
    right: 56px !important;  /* ← przesuń w lewo o tyle pikseli */
    left: auto !important;
    z-index: 99999 !important;
  }

  /* Telefon: trochę mniej w lewo */
  @media (max-width: 768px){
    html body[data-page="szczegoly"] #bhLangPick {
      top: 10px !important;
      right: 28px !important; /* ← telefon */
    }
  }
</style>

<script>
  // Ostateczny „armor” – wbicie stylu inline z !important
  (function(){
    var el = document.getElementById('bhLangPick');
    if(!el) return;

    function apply(forceMobile){
      el.style.setProperty('position','fixed','important');
      el.style.setProperty('left','auto','important');
      el.style.setProperty('top', (forceMobile ? '10px' : '16px'), 'important');
      el.style.setProperty('right', (forceMobile ? '28px' : '56px'), 'important');
      el.style.setProperty('z-index','99999','important');
    }

    // start
    apply(window.innerWidth <= 768);

    // popraw po zmianie rozmiaru / orientacji
    window.addEventListener('resize', function(){
      apply(window.innerWidth <= 768);
    });

    // gdyby ktoś przebijał po czasie – spróbuj jeszcze raz po renderze
    requestAnimationFrame(function(){ apply(window.innerWidth <= 768); });
    setTimeout(function(){ apply(window.innerWidth <= 768); }, 300);
  })();
</script>
<style id="bh-lang-arrow-killer">
  /* usuń domyślną strzałkę z selecta */
  body[data-page="szczegoly"] #bhLangPick select {
    appearance: none !important;
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    background-image: none !important;
    background-color: rgba(255,255,255,.08) !important;
    border: 1px solid rgba(255,255,255,.24) !important;
    padding-right: 12px !important; /* trochę miejsca, by tekst nie kleił się do krawędzi */
    text-align: center !important;
  }
</style>
<style id="bh-lang-toggle-fix">
  body[data-page="szczegoly"] #bhLangPick select {
    appearance: none !important;
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    background: rgba(255,255,255,.08) !important;
    border: none !important;            /* usuwa ramkę */
    outline: none !important;
    box-shadow: none !important;        /* usuwa cień/ramkę */
    padding: 8px 16px !important;       /* minimalnie większe */
    font-size: 15px !important;         /* trochę większy font */
    font-weight: 900 !important;
    text-align: center !important;      /* centrowanie */
    min-width: 70px !important;         /* szerokość, żeby PL i EN były idealnie */
    border-radius: 12px !important;     /* ładne zaokrąglenie */
    cursor: pointer !important;
  }

  /* wyrównanie labelki "Język" zniknie, zostaje sam toggle */
  body[data-page="szczegoly"] #bhLangPick label {
    display: none !important;
  }
</style>
<style id="bh-lang-toggle-fix">
  body[data-page="szczegoly"] #bhLangPick select {
    appearance: none !important;
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    background: rgba(255,255,255,.06) !important;
    border: none !important;        /* brak ramki */
    outline: none !important;
    box-shadow: none !important;    /* brak cienia */
    padding: 6px 12px !important;   /* trochę mniejsze */
    font-size: 14px !important;     /* minimalnie mniejszy font */
    font-weight: 800 !important;
    text-align: center !important;
    min-width: 64px !important;     /* idealna szerokość pod PL/EN */
    border-radius: 10px !important;
    cursor: pointer !important;
  }

  /* usuń napis "Język" obok */
  body[data-page="szczegoly"] #bhLangPick label {
    display: none !important;
  }
</style>
<style id="bh-lang-toggle-fix">
  body[data-page="szczegoly"] #bhLangPick select {
    appearance: none !important;
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    background: transparent !important;   /* całkowicie czyste tło */
    border: none !important;
    outline: none !important;
    box-shadow: none !important;          /* zero cienia */
    padding: 4px 10px !important;         /* minimalnie mniejsze */
    font-size: 13px !important;           /* subtelnie mniejszy font */
    font-weight: 800 !important;
    text-align: center !important;
    min-width: 58px !important;           /* pod PL/EN */
    border-radius: 8px !important;
    cursor: pointer !important;
    color: #fff !important;               /* biały, spójny z UI */
  }

  /* usuń label obok */
  body[data-page="szczegoly"] #bhLangPick label {
    display: none !important;
  }
</style>
<script>
/* BH LANG — twarda synchronizacja selektora i atrybutów na szczegóły.html */
(function(){
  const KEY = 'bh.lang';
  const norm = v => (String(v||'pl').toLowerCase() === 'en' ? 'en' : 'pl');

  function currentLang(){
    try { return norm(localStorage.getItem(KEY)); } catch(e){ return 'pl'; }
  }

  function applyLang(){
    const v = currentLang();
    // Ustaw atrybuty <html>
    const root = document.documentElement;
    root.setAttribute('lang', v);
    root.setAttribute('data-lang', v);

    // Ustaw KAŻDY (nawet zdublowany) selektor #bhLangSelect na właściwą wartość
    document.querySelectorAll('#bhLangSelect').forEach(sel=>{
      if (sel && sel.value !== v) sel.value = v;
    });
  }

  // Reakcja na zmianę selektora — zapis globalny i reload (jak na innych stronach)
  function onChange(e){
    const t = e.target;
    if (!t || t.id !== 'bhLangSelect') return;
    const v = norm(t.value);
    try { localStorage.setItem(KEY, v); } catch(e){}
    location.reload();
  }

  // 1) Zastosuj od razu (zanim inne skrypty zdążą „wymusić” PL)
  applyLang();

  // 2) Po załadowaniu DOM też ustaw poprawnie
  document.addEventListener('DOMContentLoaded', applyLang, {once:true});

  // 3) Nasłuchuj zmian selektora
  document.addEventListener('change', onChange);

  // 4) „Strażnik” na wypadek, gdyby inne skrypty próbowały nadpisać wartość
  const mo = new MutationObserver(applyLang);
  mo.observe(document.body, {childList:true,subtree:true});

  // 5) Dodatkowo powiadom UI (jeśli coś słucha)
  try { document.dispatchEvent(new CustomEvent('bh:lang-changed',{detail:{lang: currentLang()}})); }catch(e){}
})();
</script>
<script>
/* ANTY-DUPLIKACJA LIST + BEZPIECZNE CZYSZCZENIE (bez innerHTML) */
(function(){
  // 1) Uniwersalne czyszczenie węzła bez innerHTML (nie łamie naszej ochrony data-no-i18n)
  function safeClear(el){ if(!el) return; while(el.firstChild) el.removeChild(el.firstChild); }

  // 2) Owiń istniejące renderery tak, by przed ich wykonaniem czyścić listy "fizycznie"
  const wrap = (fnName) => {
    const orig = window[fnName];
    if (typeof orig !== 'function') return;
    window[fnName] = function(id, ...rest){
      const el = (typeof id === 'string') ? document.getElementById(id) : id;
      if (el) safeClear(el);           // czyść zanim oryginał ruszy (on może próbować innerHTML='')
      return orig.apply(this, [id, ...rest]);
    };
  };
  wrap('renderListInteractive');
  wrap('renderListPlain');
  wrap('fillPairs');
  wrap('fillFAQ');

  // 3) Jednorazowe odduplikowanie istniejących list po załadowaniu
  function dedupeListByText(ul){
    if(!ul) return;
    const seen = new Set();
    [...ul.children].forEach(li=>{
      const key = (li.textContent || '').trim().toLowerCase().replace(/\s+/g,' ');
      if (seen.has(key)) li.remove();
      else seen.add(key);
    });
  }

  function runOnce(){
    ['symp-common','urgent','causes','firstaid','meds-otc','meds-rx','rehab','myths','faq'].forEach(id=>{
      const el = document.getElementById(id);
      dedupeListByText(el);
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', runOnce, {once:true});
  } else {
    runOnce();
  }
})();
</script>
<style id="bh-mobile-step-fix">
/* 🔹 Stepy na górze — widok mobilny */
@media (max-width: 768px) {
  .bh-steps {                /* kontener stepów */
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
  }
  .bh-step {
    flex: none !important;
    width: 100% !important;
    min-height: 48px !important;
    font-size: 14px !important;
    border-radius: 12px !important;
    text-align: center !important;
    padding: 8px 10px !important;
    background: rgba(255,255,255,0.06) !important;
    border: 1px solid rgba(255,255,255,0.16) !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25) !important;
  }
}

/* 🔹 Guziki (Objawy, Przyczyny, Pierwsza pomoc, Leki itd.) */
.section-nav .btn {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  gap: 8px !important;
  width: 100% !important;
  min-height: 64px !important;
  border-radius: 14px !important;
  font-size: 15px !important;
  font-weight: 800 !important;
  letter-spacing: .3px !important;
  margin: 6px 0 !important;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)), rgba(164,107,255,.14) !important;
  border: 1px solid rgba(164,107,255,.35) !important;
  box-shadow: 0 8px 18px rgba(164,107,255,.25), 0 0 0 1px rgba(164,107,255,.3) inset !important;
  transition: all .25s ease !important;
}
.section-nav .btn:hover,
.section-nav .btn:focus-visible {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 28px rgba(164,107,255,.4), 0 0 0 2px rgba(164,107,255,.45), 0 0 26px rgba(164,107,255,.45) !important;
}
</style>

<style id="bh-mobile-polish">
/* TELEFON: cztery kroki w jednym rzędzie, małe karty */
@media (max-width: 768px){
  .steps{
    display:grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap:6px !important;
    margin:10px 0 !important;
  }
  .steps .step{
    min-height:42px !important;
    padding:6px !important;
    font-size:12px !important;
    border-radius:10px !important;
    text-align:center !important;
    font-weight:800 !important;
    background:rgba(255,255,255,.06) !important;
    border:1px solid rgba(255,255,255,.18) !important;
    box-shadow:0 4px 10px rgba(0,0,0,.25) !important;
  }

  /* Guziki sekcji (Objawy / Przyczyny / Pierwsza pomoc / Leki itd.) */
  .tabs{
    display:grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap:10px !important;
    margin:14px 0 8px !important;
  }
  @media (max-width: 380px){
    .tabs{ grid-template-columns: 1fr !important; }
  }
  .tabs .tab{
    display:flex !important;
    align-items:center !important;
    justify-content:center !important;
    min-height:56px !important;
    border-radius:14px !important;
    font-size:15px !important;
    font-weight:900 !important;
    letter-spacing:.3px !important;
    background:
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
      rgba(164,107,255,.14) !important;
    border:1px solid rgba(164,107,255,.35) !important;
    box-shadow:
      0 8px 18px rgba(164,107,255,.25),
      0 0 0 1px rgba(164,107,255,.30) inset !important;
    transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease !important;
  }
  .tabs .tab:hover,
  .tabs .tab:focus-visible{
    transform: translateY(-2px) scale(1.02) !important;
    box-shadow:
      0 14px 28px rgba(164,107,255,.40),
      0 0 0 2px rgba(164,107,255,.45),
      0 0 26px rgba(164,107,255,.45) !important;
  }
  .tabs .tab[aria-selected="true"]{
    border-color: rgba(94,234,212,.60) !important;
    box-shadow:
      0 12px 26px rgba(94,234,212,.35),
      0 0 0 2px rgba(94,234,212,.50),
      0 0 22px rgba(94,234,212,.40) !important;
  }
}
</style>
<style id="bh-hide-path">
/* Usuń pasek "● Głowa (ból) • kobieta" na desktop i mobile */
.subhead,
.path,
#bhSubhead {
  display: none !important;
}
</style>
<style id="bh-hide-path-strong">
/* Usuń pasek np. "● Głowa (ból) • kobieta" */
h2, h3, .subhead, .path, .breadcrumb {
  /* jeśli któryś z tych elementów zawiera kropkę ● + nazwę części ciała */
}
h2:has(span), h3:has(span){
  display:none !important;
}
h2:contains("●"), h3:contains("●"),
.subhead:contains("●"),
.path:contains("●"),
.breadcrumb:contains("●"){
  display:none !important;
}
</style>
<script>
document.addEventListener("DOMContentLoaded", ()=>{
  document.querySelectorAll("h1,h2,h3,.subhead,.path,.breadcrumb").forEach(el=>{
    if(el.textContent.includes("●") && el.textContent.includes("•")){
      el.style.display="none";
    }
  });
});
</script>
<style id="bh-kill-label">
  /* zabij pasek "● Głowa (ból) • kobieta" */
  .hero .label,
  #label-icon,
  #label-text{
    display:none !important;
    visibility:hidden !important;
    width:0 !important;
    height:0 !important;
    margin:0 !important;
    padding:0 !important;
    border:0 !important;
  }
</style>

<script>
  (function(){
    function killLabel(){
      document.querySelectorAll('.hero .label, #label-icon, #label-text')
        .forEach(el => { try{ el.remove(); }catch(e){ el.style.display='none'; } });
    }
    // po załadowaniu:
    document.addEventListener('DOMContentLoaded', killLabel);
    // oraz gdyby skrypt później znowu wstawił label:
    new MutationObserver(killLabel).observe(document.body, { childList:true, subtree:true });
  })();
</script>
<script src="assets/copilot.js"></script>
<style id="bh-objawy-force"></style>
<script>
(function(){
  // usuń wcześniejsze wersje, jeśli były
  document.getElementById('bh-objawy-force')?.remove();
  const styleTag = document.createElement('style');
  styleTag.id = 'bh-objawy-force';
  document.head.appendChild(styleTag);

  const obj = document.querySelector('article.card#s-objawy') || 
              Array.from(document.querySelectorAll('article.card'))
                   .find(c => /objawy/i.test(c.textContent||''));
  if(!obj) return;

  // znajdź kartę RX po nagłówku (PL/EN)
  const rx = Array.from(document.querySelectorAll('article.card'))
    .find(c=>{
      const h = c.querySelector('h3, .card h3');
      const t = (h?.textContent||c.textContent||'').trim().toLowerCase();
      return /leki na receptę|leki na recepte|prescription/.test(t);
    });

  function applyFrom(el){
    const cs = getComputedStyle(el);
    const bgImg = cs.getPropertyValue('background-image');
    const bgCol = cs.getPropertyValue('background-color');
    const bg    = cs.getPropertyValue('background');
    const border= cs.getPropertyValue('border');
    const bcol  = cs.getPropertyValue('border-color');
    const bwd   = cs.getPropertyValue('border-width');
    const bst   = cs.getPropertyValue('border-style');
    const shadow= cs.getPropertyValue('box-shadow');
    const bdFilter = cs.getPropertyValue('backdrop-filter');

    // twarde nadpisanie styli karty Objawy
    obj.style.setProperty('position','relative','important');
    obj.style.setProperty('background', bg!=='none'&&bg?bg:(bgImg+', '+bgCol), 'important');
    if(border && border!=='medium none color'){
      obj.style.setProperty('border', border, 'important');
    } else {
      obj.style.setProperty('border-color', bcol||'transparent','important');
      obj.style.setProperty('border-width', bwd||'1px','important');
      obj.style.setProperty('border-style', bst||'solid','important');
    }
    if(shadow && shadow!=='none') obj.style.setProperty('box-shadow', shadow, 'important');
    if(bdFilter && bdFilter!=='none') obj.style.setProperty('backdrop-filter', bdFilter, 'important');

    // zgaś istniejące nakładki Objawów
    const kill = document.createElement('style');
    kill.textContent = '#s-objawy::before,#s-objawy::after{content:none !important;}';
    document.head.appendChild(kill);

    // sklonuj nakładki z RX (jeśli ma)
    const rxB = getComputedStyle(el, '::before');
    const rxA = getComputedStyle(el, '::after');
    const bBg = rxB.getPropertyValue('background'), aBg = rxA.getPropertyValue('background');
    const bSh = rxB.getPropertyValue('box-shadow'), aSh = rxA.getPropertyValue('box-shadow');

    let extra = '';
    if(bBg && bBg!=='none' || (bSh && bSh!=='none')){
      extra += '#s-objawy::before{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;';
      if(bBg && bBg!=='none') extra += 'background:'+bBg+' !important;';
      if(bSh && bSh!=='none') extra += 'box-shadow:'+bSh+' !important;';
      extra += '}';
    }
    if(aBg && aBg!=='none' || (aSh && aSh!=='none')){
      extra += '#s-objawy::after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;';
      if(aBg && aBg!=='none') extra += 'background:'+aBg+' !important;';
      if(aSh && aSh!=='none') extra += 'box-shadow:'+aSh+' !important;';
      extra += '}';
    }
    if(extra) styleTag.appendChild(document.createTextNode(extra));
  }

  if(rx) {
    applyFrom(rx);
  } else {
    // gdyby RX nie został znaleziony – NIC nie zmieniamy (żeby znów nie trafić innym kolorem)
    // Możesz doprecyzować ID karty RX i podam wersję na twardo.
  }
})();
</script>
</body>
</html>
