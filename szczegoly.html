<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Szczeg√≥≈Çy</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#0f1116; --fg:#eaf0ff; --muted:#a7b3c7;
      --card:#18202e; --card-2:#1d2636;
      --accent:#3aa3ff; --ok:#1db954; --warn:#ffb020; --danger:#ff4d4f;
      --border:#2b364a;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(ellipse at 20% -20%, #172033, #0f1116 50%) fixed, var(--bg);
      color:var(--fg); line-height:1.6;
    }
    .container{max-width:1100px;margin:0 auto;padding:24px}
    a{color:#6ec0ff;text-decoration:none}
    a:hover{text-decoration:underline}
    header h1{
      margin:10px 0 18px; font-weight:800; letter-spacing:.2px;
      font-size:clamp(28px,4.5vw,44px);
    }
    .lede{color:var(--muted); margin-bottom:18px}
    .grid{display:grid; gap:14px}
    .card{
      background:linear-gradient(180deg,var(--card),var(--card-2));
      border:1px solid var(--border); border-radius:16px; padding:16px;
      box-shadow:0 8px 26px rgba(0,0,0,.28);
    }
    .card h3{margin:0 0 10px; font-size:20px}
    .pill{display:inline-block; padding:2px 10px; border-radius:999px; font-size:12px;
      background:#213147; border:1px solid #2f3f58; color:#a9c9ff; margin-right:6px}
    ul{margin:0; padding-left:18px}
    .emergency{
      border:2px solid var(--danger);
      background:linear-gradient(180deg,#3a1012 0%, #2a0d10 100%);
      border-radius:16px; padding:16px; margin:6px 0 8px;
      box-shadow:0 10px 30px rgba(255,77,79,.15);
    }
    .emergency h3{color:#ffd3d4; margin:0 0 10px}
    .emergency p, .emergency li{color:#ffdede}
    footer{color:#8aa1bd; margin-top:26px; font-size:14px}
    @media (min-width:880px){
      .grid{grid-template-columns:repeat(2,1fr)}
    }
  </style>
</head>
<body>
  <div class="container">
    <p><a href="index.html">‚Üê Strona g≈Ç√≥wna</a></p>
    <header>
      <h1 id="title">Szczeg√≥≈Çy</h1>
      <p class="lede" id="desc"></p>
    </header>

    <!-- EMERGENCY -->
    <section id="emergencyBox" class="emergency" style="display:none">
      <h3>üÜò Kiedy pilnie po pomoc (112 / SOR)</h3>
      <ul id="emergencyList"></ul>
    </section>

    <section class="grid">
      <div class="card">
        <span class="pill">Mo≈ºliwe przyczyny b√≥lu</span>
        <ul id="causes"></ul>
      </div>
      <div class="card">
        <span class="pill">Typowe objawy</span>
        <ul id="symptoms"></ul>
      </div>
      <div class="card">
        <span class="pill">Kto mo≈ºe pom√≥c</span>
        <ul id="doctors"></ul>
      </div>
      <div class="card">
        <span class="pill">Co mo≈ºe pom√≥c (leki / dzia≈Çania)</span>
        <ul id="medications"></ul>
      </div>
      <div class="card" id="firstAidWrap">
        <span class="pill">Pierwsza pomoc / domowe sposoby</span>
        <p id="firstAid"></p>
      </div>
    </section>

    <footer>¬© 2025 Iminpain ‚Äî Materia≈Ç poglƒÖdowy, nie zastƒôpuje konsultacji z lekarzem.</footer>
  </div>

  <script>
    // Pobierz id z query string
    const params = new URLSearchParams(location.search);
    const id = params.get('id');

    // Fallback sytuacji nag≈Çych ‚Äì dzia≈Ça nawet, gdy w JSON nie ma pola "emergency"
    function emergencyFallback(id){
      const t = (s)=>({type:'generic', items:s});
      const chest = [
        "nag≈Çy, silny ucisk w klatce piersiowej",
        "duszno≈õƒá lub trudno≈õci w m√≥wieniu",
        "b√≥l promieniujƒÖcy do ≈ºuchwy/ramienia",
        "zawroty g≈Çowy, zimne poty, omdlenie"
      ];
      const breath = [
        "spoczynkowa duszno≈õƒá, sinienie warg",
        "szybkie narastanie kaszlu/duszno≈õci",
        "plwocina z krwiƒÖ lub b√≥l nasilany oddechem"
      ];
      const neuro = [
        "nagle pojawiajƒÖcy siƒô najsilniejszy b√≥l g≈Çowy",
        "niedow≈Çad, drƒôtwienie po≈Çowicze, be≈Çkotliwa mowa",
        "nag≈Çe zaburzenia widzenia lub r√≥wnowagi"
      ];
      const bleed = ["masywny krwotok", "podejrzenie z≈Çamania/urazu z deformacjƒÖ"];
      const abdomen = [
        "narastajƒÖcy, sta≈Çy b√≥l brzucha z gorƒÖczkƒÖ",
        "twardy brzuch, wymioty tre≈õciƒÖ krwistƒÖ/‚ÄûfusowatƒÖ‚Äù",
        "czarne stolce lub krew w stolcu"
      ];
      const pregnancy = [
        "silny b√≥l podbrzusza, krwawienie",
        "brak/znaczne os≈Çabienie ruch√≥w p≈Çodu",
        "nag≈Çy b√≥l g≈Çowy + zaburzenia widzenia + obrzƒôki (podejrzenie stanu przedrzucawkowego)"
      ];

      if(!id) return [];
      const key = id.toLowerCase();
      if(key.includes('serce') || key.includes('klatka_m') || key.includes('klatka_k')) return chest;
      if(key.includes('pluca') || key.includes('oddech')) return breath;
      if(key.includes('oczy') || key.includes('szyja') || key.includes('szczeka') || key.includes('nos')) return neuro;
      if(key.includes('stopy') || key.includes('kolano') || key.includes('uda') || key.includes('biodra')) return bleed;
      if(key.includes('brzuch') || key.includes('pokarm')) return abdomen;
      if(key.includes('ciaza')) return pregnancy;
      return ["nag≈Çe, silne lub nietypowe objawy; szybkie pogorszenie stanu; utrata przytomno≈õci ‚Äî dzwo≈Ñ 112."];
    }

    // Render lista <ul>
    function fillList(el, arr){
      el.innerHTML = '';
      (arr||[]).forEach(item=>{
        const li = document.createElement('li');
        li.textContent = item;
        el.appendChild(li);
      });
    }

    fetch('conditions.json')
      .then(r=>r.json())
      .then(db=>{
        const data = db[id];
        const title = document.getElementById('title');
        const desc  = document.getElementById('desc');
        const causes = document.getElementById('causes');
        const symptoms = document.getElementById('symptoms');
        const doctors = document.getElementById('doctors');
        const meds = document.getElementById('medications');
        const firstAid = document.getElementById('firstAid');
        const emergencyBox = document.getElementById('emergencyBox');
        const emergencyList = document.getElementById('emergencyList');

        if(!data){
          title.textContent = "Brak danych";
          desc.textContent = "Nie znaleziono szczeg√≥≈Ç√≥w dla wskazanego elementu.";
          document.querySelector('.grid').style.display = 'none';
          return;
        }

        title.textContent = data.title || "Szczeg√≥≈Çy";
        desc.textContent = data.description || "";

        fillList(causes, data.causes);
        fillList(symptoms, data.symptoms);
        fillList(doctors, data.doctors);
        fillList(meds, data.medications);
        firstAid.textContent = data.first_aid || data.firstAid || "";

        // EMERGENCY: u≈ºyj pola z JSON je≈õli istnieje, w przeciwnym razie fallback
        const emergencyItems = (data.emergency && data.emergency.length) ? data.emergency
                               : emergencyFallback(id);
        if(emergencyItems && emergencyItems.length){
          fillList(emergencyList, emergencyItems);
          emergencyBox.style.display = 'block';
        }
      })
      .catch(()=>{
        document.getElementById('title').textContent = "B≈ÇƒÖd wczytywania danych";
        document.querySelector('.grid').style.display = 'none';
      });
  </script>
</body>
</html>
