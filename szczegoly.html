<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Boli Help — Szczegóły</title>
    <meta name="theme-color" content="#0e1230" />
    
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="/icons/icon-192.png" sizes="192x192" type="image/png">
    <link rel="apple-touch-icon" href="/icons/icon-512.png">

    <style>
        :root{
            --bg:#0e1230; --text:#eef2ff; --muted:#b8c2e0;
            --card: rgba(60,32,100,.30); --stroke: rgba(164,107,255,.18);
            --accent:#a46bff; --pink:#ff6ec7; --teal:#5eead4;
            --ok:#70e1b1; --warn:#ffd16c; --danger:#ff6b6b;
            --radius:16px; --gap:14px; --speed:.24s;
            --c-symptoms: rgba(94,234,212,.55);
            --c-causes:   rgba(164,107,255,.55);
            --c-firstaid: rgba(112,225,177,.55);
            --c-otc:      rgba(255,184,108,.65);
            --c-rx:       rgba(255,107,107,.70);
            --c-rehab:    rgba(94,234,212,.65);
            --c-myths:    rgba(164,107,255,.65);
            --c-faq:      rgba(94,234,212,.55);
            --c-dx:       rgba(164,107,255,.65);
            --c-docs:     rgba(94,234,212,.65);
        }
        *{box-sizing:border-box} html,body{height:100%}
        body[data-page="szczegoly"]{margin:0; background:var(--bg); color:var(--text);
            font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
            -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
        .bg-anim{position:fixed; inset:0; z-index:-3; pointer-events:none;
            background:
                radial-gradient(42vw 36vh at 16% 12%, rgba(255,110,199,.26), transparent 60%),
                radial-gradient(36vw 30vh at 84% 10%, rgba(94,234,212,.22), transparent 60%),
                radial-gradient(40vw 44vh at 20% 88%, rgba(164,107,255,.16), transparent 60%),
                linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
            filter: blur(10px) saturate(118%);
        }
        .grid-bg{position:fixed; inset:0; z-index:-2; pointer-events:none; opacity:.22;
            background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='104' viewBox='0 0 120 104'%3E%3Cg fill='none' stroke='rgba(173,216,255,0.26)' stroke-width='1'%3E%3Cpolygon points='30,0 90,0 120,52 90,104 30,104 0,52'/%3E%3C/g%3E%3C/svg%3E");
            background-size:160px 138px; background-position:center;}
        #bh-particles{ position:fixed; inset:0; z-index:-1; opacity:.85; pointer-events:none }
    
        header.app{ max-width:1100px; margin:16px auto 0; padding:16px 16px 8px; }
        main{ max-width:1100px; margin:0 auto 72px; padding:0 16px 24px; }
        .bh-backbar{max-width:1100px; margin:8px auto 0; padding:0 16px;}
        #bhReturnTop{
            appearance:none; border:1px solid rgba(164,107,255,.28); background:rgba(60,32,100,.28);
            color:#eef2ff; font-weight:800; letter-spacing:.2px; padding:10px 14px; border-radius:12px; cursor:pointer;
            box-shadow:0 6px 16px rgba(8,10,22,.35), inset 0 0 0 1px rgba(164,107,255,.12), 0 0 8px rgba(164,107,255,.45);
            transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
        }
        #bhReturnTop:hover{ transform:translateY(-1px); border-color:rgba(164,107,255,.55); box-shadow:0 10px 20px rgba(8,10,22,.45), 0 0 14px rgba(164,107,255,.65), inset 0 0 0 1px rgba(164,107,255,.18) }
        #bhReturnTop:focus-visible{ outline:2px solid rgba(164,107,255,.75); outline-offset:2px }
    
        .hero{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
            border:1px solid var(--stroke); border-radius:var(--radius); padding:16px;
            backdrop-filter: blur(6px) saturate(120%); box-shadow: 0 18px 48px rgba(8,10,22,.55), 0 0 22px rgba(164,107,255,.18);}
        .hero-top{ display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
        .crumbs{font-weight:800; letter-spacing:.2px; color:#cfe2ff}
        .label{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
            background: rgba(164,107,255,.18); border:1px solid var(--stroke); font-weight:800; letter-spacing:.3px; }
        .hero-note{ margin-top:10px; color:#b8c2e0; font-size:13px; }
        .legend{ color:#d6e4ff; font-weight:700; margin-top:6px; font-size:13px }
    
        .steps{display:grid; grid-template-columns:repeat(4,1fr); gap:8px; margin:14px 0 0}
        .step{position:relative; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
            background:rgba(255,255,255,.05); font-weight:900; letter-spacing:.2px; color:#dfe6ff; text-align:center}
        .step.active{border-color:rgba(94,234,212,.55); box-shadow:0 0 0 2px rgba(94,234,212,.35), 0 8px 18px rgba(8,10,22,.35)}
    
        .tabs{ display:flex; flex-wrap:wrap; gap:8px; margin:16px 0 8px; }
        .tab{ padding:9px 13px; border-radius:10px; font-weight:800; letter-spacing:.2px; cursor:pointer; user-select:none;
            background: transparent; border:1px solid rgba(255,255,255,.16); color:#e9efff;
            transition: box-shadow var(--speed), transform var(--speed), border-color var(--speed), background var(--speed);}
        .tab:hover{ transform: translateY(-1px); }
        .tab[aria-selected="true"]{ box-shadow:0 0 0 2px rgba(94,234,212,.35); border-color:rgba(94,234,212,.55) }
    
        .cards{ margin-top:8px }
        .card{ display:none; background: var(--card); border:1px solid var(--stroke); border-radius:var(--radius);
            padding:16px 16px 14px; backdrop-filter: blur(10px) saturate(125%); box-shadow: 0 14px 34px rgba(8,10,22,.42);
            transition: transform var(--speed), box-shadow var(--speed), border-color var(--speed); color:var(--text); }
        .card[aria-hidden="false"]{ display:block; animation:fadeIn .28s ease both }
        @keyframes fadeIn{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none} }
        .card h3{ position:relative; margin:.15rem 0 .85rem; font-size:16px; font-weight:900; letter-spacing:.3px; color:#e6f0ff }
        .card h3::after{ content:""; display:block; height:1px; margin-top:.55rem;
            background:linear-gradient(90deg, rgba(207,226,255,.55), rgba(255,255,255,.08) 45%, transparent); }
    
        ul.clean{ list-style:none; margin:0; padding:0 }
        ul.clean li{ position:relative; padding:10px 12px 10px 36px; border-radius:10px; margin-bottom:7px;
            border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.03); color:#f6f8ff; }
        .cb{ position:absolute; left:10px; top:50%; transform:translateY(-50%); width:18px; height:18px; border-radius:4px;
            border:1px solid rgba(255,255,255,.35); background:rgba(255,255,255,.05); display:inline-block }
        .cb.checked{ background:#fff; box-shadow:0 0 0 2px rgba(164,107,255,.25) inset }
        .li-checked{ outline:1px solid rgba(164,107,255,.45); background: rgba(164,107,255,.10) }
    
        .risk-mini{ display:flex; align-items:center; gap:10px; margin:.15rem 0 .35rem }
        .risk-mini small{ color:#d6e4ff; font-weight:800 }
        .riskbar{ position:relative; width:200px; height:12px; border-radius:999px; overflow:hidden;
            outline:1px solid rgba(255,255,255,.16);
            background: linear-gradient(90deg, var(--ok), var(--warn), var(--danger)); }
        .cursor{ position:absolute; top:50%; transform:translate(-50%,-50%); width:16px; height:16px; border-radius:50%; background:#fff }
    
        .strip{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
            border: 1px solid rgba(255,255,255,.16); padding:.7rem 1rem; border-radius:.8rem; margin:.6rem 0; }
        .strip--warn{ background: linear-gradient(180deg, rgba(255,184,108,.18), rgba(255,255,255,.04)); border-color: rgba(255,184,108,.55); }
        .cta{ display:inline-block; padding:8px 12px; border-radius:10px; font-weight:900; background:rgba(255,255,255,.08);
            border:1px solid rgba(255,255,255,.18); text-decoration:none; color:var(--text); }
    
        .dx-hint{ display:none; margin-top:10px; border-radius:10px; padding:10px 12px;
            background:rgba(164,107,255,.12); border:1px solid rgba(164,107,255,.35); color:#e9e6ff; }
        .dx-hint.show{ display:block }
        .dx-hint button{ margin-left:8px; padding:8px 10px; border-radius:10px; font-weight:900; cursor:pointer;
            background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); color:#fff }
    
        .dx-ico{ width:22px; height:22px; display:grid; place-items:center; border-radius:6px;
            background:rgba(164,107,255,.18); border:1px solid rgba(164,107,255,.35) }
        .dx-meta{ margin-left:auto; display:flex; flex-direction:column; align-items:flex-end; gap:6px; min-width:160px }
        .conf-wrap{ width:120px; height:8px; border-radius:999px; outline:1px solid rgba(255,255,255,.16); overflow:hidden;
            background:linear-gradient(90deg, rgba(94,234,212,.25), rgba(164,107,255,.25)); }
        .conf-bar{ height:100%; width:0%; background:linear-gradient(90deg, rgba(94,234,212,.65), rgba(164,107,255,.65)) }
        .dx-badge,.doc-badge{ font-size:12px; padding:4px 8px; border-radius:999px; font-weight:900; letter-spacing:.2px; }
        .dx-badge.poz,.doc-badge.poz{ background:rgba(94,234,212,.18); border:1px solid rgba(94,234,212,.45); color:#d9fffa }
        .dx-badge.sor,.doc-badge.sor{ background:rgba(255,107,107,.20); border:1px solid rgba(255,107,107,.65); color:#ffe6e6 }
    </style>
    
    <style>
        html,body{max-width:100%;overflow-x:hidden}
        *,*::before,*::after{box-sizing:border-box}
        img,video,canvas{max-width:100%;height:auto}
        .bg-anim,.grid-bg,#bh-particles{position:fixed;inset:0;pointer-events:none}
    
        @media (max-width:768px){
            /* ukryj ewentualny stary selektor w headerze */
            .header .tools :is(.lang,.langpick,#bhLangPick){display:none!important}
            .header .tools :is(.lang,.langpick,#bhLangPick)::before,
            .header .tools :is(.lang,.langpick,#bhLangPick)::after{content:none!important;display:none!important}
    
            /* jedyna definicja pływającego guzika języka */
            #lang-fab{
                position:fixed; top:10px; right:10px; z-index:4000;
                display:inline-flex; align-items:center; gap:6px;
                padding:8px 10px; border-radius:12px;
                background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2);
                backdrop-filter:blur(8px); line-height:1; font-weight:600;
                max-width:92px; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
            }
            #lang-fab label{ display:none; }
            #bhLangSelect{ font-size:16px; }  /* brak zoomu na iOS */
            body{ padding-top:0!important; }
        }
    </style>
    <style>
        /* --- dopieszczenie układu kroków i ciasnych ekranów --- */
    
        /* rozdziel 1. tytuł i podtytuł; niech podtytuł spada w nową linię */
        .steps .step{
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
        }
        .steps .step small{
            display:block;              /* wymuś nową linię */
            margin-top:4px;
            color:#b8c2e0;
            font-weight:700;
        }
    
        /* kiedy jest węziej – 2 kolumny; bardzo wąsko – 1 kolumna */
        @media (max-width: 600px){
            .steps{ grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 380px){
            .steps{ grid-template-columns: 1fr; }
        }
    
        /* minimalne odstępy, by nic nie nachodziło na górze w trybie poziomym */
        @media (max-height: 420px) and (orientation: landscape){
            header.app{ margin-top: 8px; }
        }
    </style><style id="bh-upgrade-2025">
        /* Nowoczesna czcionka */
        body[data-page="szczegoly"] {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            letter-spacing: 0.2px;
        }
    
        /* Kafle/ramki (cards) – kwadratowe, szklane */
        .card {
            border-radius: 20px !important;
            padding: 20px !important;
            background: rgba(255, 255, 255, 0.06) !important;
            border: 1px solid rgba(255, 255, 255, 0.15) !important;
            backdrop-filter: blur(16px) saturate(140%) !important;
            box-shadow: 0 8px 28px rgba(0, 0, 0, 0.45),
                        inset 0 0 8px rgba(255, 255, 255, 0.08) !important;
            transition: transform .25s ease, box-shadow .25s ease;
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 14px 34px rgba(0, 0, 0, 0.55),
                        0 0 12px rgba(164, 107, 255, 0.5);
        }
    
        /* Nagłówki w kartach */
        .card h3 {
            font-size: 18px !important;
            font-weight: 800 !important;
            color: #ffffff !important;
            text-transform: uppercase;
            letter-spacing: 0.6px;
        }
    
        /* Lista objawów/przyczyn – styl nowoczesny */
        ul.clean li {
            border-radius: 14px !important;
            margin-bottom: 10px !important;
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            padding: 12px 14px 12px 38px !important;
            transition: background .25s ease, transform .2s ease;
        }
        ul.clean li:hover {
            background: rgba(164, 107, 255, 0.12) !important;
            transform: scale(1.02);
        }
    
        /* Checkbox (cb) – świecący kwadrat */
        .cb {
            width: 18px; height: 18px;
            border-radius: 6px !important;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 0 4px rgba(255,255,255,0.2);
        }
        .cb.checked {
            background: linear-gradient(135deg, #a46bff, #5eead4);
            box-shadow: 0 0 8px rgba(164,107,255,0.8);
        }
    
        /* FAQ i mity – elegancki wygląd */
        #faq li, #myths li {
            background: rgba(255,255,255,0.07) !important;
            border-left: 3px solid #a46bff !important;
            padding: 14px 16px 14px 40px !important;
        }
    
        /* Guziki (np. Choroby, Lekarze) */
        .tab {
            border-radius: 12px !important;
            background: rgba(255, 255, 255, 0.04) !important;
            font-weight: 700 !important;
            transition: background .25s, transform .2s;
        }
        .tab:hover {
            background: rgba(164, 107, 255, 0.15) !important;
            transform: translateY(-2px);
        }
        .tab[aria-selected="true"] {
            background: linear-gradient(135deg, #a46bff, #5eead4) !important;
            color: #fff !important;
            box-shadow: 0 0 10px rgba(164,107,255,0.6);
        }
    </style>
    <style id="bh-cards-glow-2025">
        /* delikatny kolor dla każdej zakładki */
        .tab[data-variant="symptoms"]{ box-shadow: 0 0 0 1px rgba(94,234,212,.25) inset, 0 0 10px rgba(94,234,212,.20); border-color: rgba(94,234,212,.45) }
        .tab[data-variant="causes"]  { box-shadow: 0 0 0 1px rgba(164,107,255,.25) inset, 0 0 10px rgba(164,107,255,.20); border-color: rgba(164,107,255,.45) }
        .tab[data-variant="firstaid"]{ box-shadow: 0 0 0 1px rgba(112,225,177,.25) inset, 0 0 10px rgba(112,225,177,.20); border-color: rgba(112,225,177,.45) }
        .tab[data-variant="otc"]     { box-shadow: 0 0 0 1px rgba(255,184,108,.25) inset, 0 0 10px rgba(255,184,108,.20); border-color: rgba(255,184,108,.45) }
        .tab[data-variant="rx"]      { box-shadow: 0 0 0 1px rgba(255,107,107,.25) inset, 0 0 10px rgba(255,107,107,.20); border-color: rgba(255,107,107,.45) }
        .tab[data-variant="rehab"]   { box-shadow: 0 0 0 1px rgba(94,234,212,.25)  inset, 0 0 10px rgba(94,234,212,.20);  border-color: rgba(94,234,212,.45) }
        .tab[data-variant="myths"]   { box-shadow: 0 0 0 1px rgba(164,107,255,.25) inset, 0 0 10px rgba(164,107,255,.20); border-color: rgba(164,107,255,.45) }
        .tab[data-variant="faq"]     { box-shadow: 0 0 0 1px rgba(135,207,255,.22) inset, 0 0 10px rgba(135,207,255,.18); border-color: rgba(135,207,255,.40) }
    
        /* jeszcze ładniejsze hoverki */
        .tab:not([aria-selected="true"]):hover{
            transform: translateY(-2px);
            filter: saturate(120%);
        }
    
        /* 🔵 animacja „pulse” – użyjemy dla DX i DOCS */
        @keyframes bhBluePulse {
            0%   { box-shadow: 0 0 0 0 rgba(96,165,250,.25), 0 0 14px rgba(96,165,250,.35) }
            50%  { box-shadow: 0 0 0 8px rgba(96,165,250,.12), 0 0 26px rgba(96,165,250,.55) }
            100% { box-shadow: 0 0 0 0 rgba(96,165,250,.25), 0 0 14px rgba(96,165,250,.35) }
        }
        @media (prefers-reduced-motion: reduce){
            .pulse-blue { animation: none !important; }
        }
    
        /* klasa włączana JS-em (taby i karty) */
        .pulse-blue {
            border-color: rgba(59,130,246,.85) !important;
            animation: bhBluePulse 2.2s ease-in-out infinite;
        }
    
        /* gdy „pulsujące” są całe karty Choroby/Lekarze na dole */
        #s-dx.pulse-blue, #s-docs.pulse-blue{
            box-shadow:
                0 14px 34px rgba(8,10,22,.55),
                0 0 0 2px rgba(59,130,246,.45) inset,
                0 0 28px rgba(96,165,250,.55) !important;
        }
    </style>
    <style id="bh-cards-glow-fix">
        /* upewnij się, że karta może „wylewać” poświatę poza obrys */
        .card.pulse-blue{ overflow: visible; position: relative; }
    
        /* 🔵 niezależny, animowany halo jako pseudo-element (działa nawet przy ciężkich box-shadow karty) */
        .card.pulse-blue::after{
            content:"";
            position:absolute;
            inset:-8px;             /* halo nieco większe niż karta */
            border-radius: inherit;
            pointer-events:none;
            /* startowa poświata */
            box-shadow:
                0 0 0 2px rgba(59,130,246,.45) inset,
                0 0 22px rgba(96,165,250,.55),
                0 10px 26px rgba(8,10,22,.45);
            opacity:.9;
            animation: bhBluePulseCard 2.2s ease-in-out infinite;
        }
    
        /* animacja dla kart (odrobinkę mocniejsza niż dla tabów) */
        @keyframes bhBluePulseCard{
            0%   { box-shadow:
                    0 0 0 2px rgba(59,130,246,.45) inset,
                    0 0 16px rgba(96,165,250,.40),
                    0 10px 24px rgba(8,10,22,.40);
                  opacity:.85; }
            50%  { box-shadow:
                    0 0 0 2px rgba(59,130,246,.75) inset,
                    0 0 34px rgba(96,165,250,.75),
                    0 14px 34px rgba(8,10,22,.55);
                  opacity:1; }
            100% { box-shadow:
                    0 0 0 2px rgba(59,130,246,.45) inset,
                    0 0 16px rgba(96,165,250,.40),
                    0 10px 24px rgba(8,10,22,.40);
                  opacity:.85; }
        }
    
        /* szacunek dla preferencji systemowych */
        @media (prefers-reduced-motion: reduce){
            .card.pulse-blue::after{ animation:none !important }
        }
    </style>
    <style id="bh-blue-pulse-final">
        /* Upewnij się że glow jest widoczny nad innymi cieniami */
        #s-dx.pulse-blue, 
        #s-docs.pulse-blue {
            position: relative;
            z-index: 5; /* ponad inne elementy */
        }
    
        #s-dx.pulse-blue::after, 
        #s-docs.pulse-blue::after {
            content: "";
            position: absolute;
            inset: -6px;  /* halo większe od karty */
            border-radius: 18px;
            pointer-events: none;
            animation: bhPulseDxDocs 2.4s ease-in-out infinite;
        }
    
        @keyframes bhPulseDxDocs {
            0% {
                box-shadow: 0 0 0 2px rgba(59,130,246,.5),
                            0 0 18px rgba(96,165,250,.45),
                            0 0 28px rgba(96,165,250,.55);
                opacity: .85;
            }
            50% {
                box-shadow: 0 0 0 4px rgba(59,130,246,.7),
                            0 0 28px rgba(96,165,250,.75),
                            0 0 42px rgba(96,165,250,.8);
                opacity: 1;
            }
            100% {
                box-shadow: 0 0 0 2px rgba(59,130,246,.5),
                            0 0 18px rgba(96,165,250,.45),
                            0 0 28px rgba(96,165,250,.55);
                opacity: .85;
            }
        }
    </style>
    <style id="bh-objawy-like-rx">
        /* OBJAWY = kolorystyka jak „leki na receptę” (fiolet + glow) */
    
        /* Kafelek/sekcja Objawy – łapiemy kilka możliwych struktur */
        .section-objawy .bh-card,
        #sec-objawy .bh-card,
        .card-objawy,
        #objawy .bh-card,
        #objawy,
        [data-section="objawy"] .bh-card,
        [data-section="objawy"] {
            background:
                linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
                rgba(60,32,100,.34) !important; /* ta sama baza co „receptowe” */
            border: 1px solid rgba(164,107,255,.38) !important;
            box-shadow:
                0 10px 26px rgba(8,10,22,.45),
                0 0 0 1px rgba(164,107,255,.18) inset,
                0 0 26px rgba(164,107,255,.28) !important;
            backdrop-filter: saturate(120%) blur(6px) !important;
        }
    
        /* Teksty i nagłówki w objawach – spójny kontrast jak w „receptowych” */
        .section-objawy .bh-card h3,
        #sec-objawy .bh-card h3,
        .card-objawy h3,
        #objawy h3,
        [data-section="objawy"] h3 {
            color: #eef2ff !important;
            letter-spacing: .2px;
            font-weight: 800;
        }
    
        /* Separator/obramowanie górnej belki w kafelku – identyczne jak RX */
        .section-objawy .bh-card .caption,
        #sec-objawy .bh-card .caption,
        .card-objawy .caption,
        #objawy .caption,
        [data-section="objawy"] .caption {
            border-top: 1px solid rgba(164,107,255,.22) !important;
            background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)) !important;
        }
    
        /* Hover/Focus – delikatny podbity glow jak w „leki na receptę” */
        .section-objawy .bh-card:hover,
        #sec-objawy .bh-card:hover,
        .card-objawy:hover,
        #objawy:hover,
        [data-section="objawy"] .bh-card:hover,
        [data-section="objawy"]:hover {
            transform: translateY(-2px);
            border-color: rgba(164,107,255,.55) !important;
            box-shadow:
                0 16px 28px rgba(8,10,22,.55),
                0 0 18px rgba(164,107,255,.35),
                0 0 0 1px rgba(164,107,255,.34) inset !important;
            transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
        }
    
        /* Focus widoczny i elegancki */
        .section-objawy .bh-card:focus-visible,
        #sec-objawy .bh-card:focus-visible,
        .card-objawy:focus-visible,
        #objawy:focus-visible,
        [data-section="objawy"] .bh-card:focus-visible,
        [data-section="objawy"]:focus-visible {
            outline: 2px solid rgba(164,107,255,.75) !important;
            outline-offset: 2px;
            border-radius: 16px;
        }
    </style>
    <style>
        #bhSideNav {
            position: fixed;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            z-index: 99;
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            backdrop-filter: blur(10px) saturate(150%);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        #bhSideNav.show {
            opacity: 1;
            visibility: visible;
        }
        #bhSideNav button {
            background: transparent;
            border: none;
            color: white;
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            position: relative;
        }
        #bhSideNav button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        #bhSideNav button.active {
            background: linear-gradient(135deg, #a46bff, #5eead4);
            box-shadow: 0 0 10px rgba(164, 107, 255, 0.6);
        }
        @media (max-width: 900px) {
            #bhSideNav {
                display: none;
            }
        }
    </style>
</head>
<body data-page="szczegoly">
    <div class="bg-anim" aria-hidden="true"></div>
    <div class="grid-bg" aria-hidden="true"></div>
    <canvas id="bh-particles" aria-hidden="true"></canvas>

    <div id="lang-fab">
        <div class="langpick" id="bhLangPick" aria-label="Wybór języka">
            <label for="bhLangSelect">Język</label>
            <select id="bhLangSelect">
                <option value="pl">PL</option>
                <option value="en">EN</option>
            </select>
        </div>
    </div>
    
    <nav id="bhSideNav">
        <button data-target="#s-objawy" aria-label="Objawy">💡</button>
        <button data-target="#s-przyczyny" aria-label="Przyczyny">🤔</button>
        <button data-target="#s-aid" aria-label="Pierwsza pomoc">🚑</button>
        <button data-target="#s-otc" aria-label="Leki OTC">💊</button>
        <button data-target="#s-rx" aria-label="Leki na receptę">💉</button>
        <button data-target="#s-rehab" aria-label="Rehabilitacja">🏋️</button>
        <button data-target="#s-mity" aria-label="Mity vs Fakty">📖</button>
        <button data-target="#s-faq" aria-label="FAQ">❓</button>
        <button data-target="#s-dx" aria-label="Choroby">🦠</button>
        <button data-target="#s-docs" aria-label="Lekarze">🧑‍⚕️</button>
    </nav>

    <div class="bh-backbar">
        <button id="bhReturnTop" type="button" aria-label="Wróć do poprzedniej strony">↑</button>
    </div>

    <header class="app" aria-label="Nawigacja lokalna">
        <div class="hero" role="region" aria-label="Nagłówek szczegółów">
            <div class="hero-top">
                <div class="crumbs" id="crumbs">Boli Help / <span id="crumb-typ">—</span> / <span id="crumb-label">Szczegóły</span></div>
                <div class="label"><span id="label-icon" aria-hidden="true">●</span><span id="label-text"><b>—</b></span></div>
            </div>
    
            <div class="steps" aria-label="Asystent kroków">
                <div class="step" id="step-1">1. Objawy<small>Zaznacz</small></div>
                <div class="step" id="step-2">2. Choroby<small>Zobacz podpowiedzi</small></div>
                <div class="step" id="step-3">3. Lekarze<small>Gdzie iść?</small></div>
                <div class="step" id="step-4">4. Co dalej<small>112/SOR lub dom</small></div>
            </div>
    
            <div class="tabs" role="tablist" aria-label="Sekcje treści">
                <button class="tab" data-variant="symptoms" role="tab" aria-selected="true"  data-target="#s-objawy">Objawy</button>
                <button class="tab" data-variant="causes"   role="tab" aria-selected="false" data-target="#s-przyczyny">Przyczyny</button>
                <button class="tab" data-variant="firstaid" role="tab" aria-selected="false" data-target="#s-aid">Pierwsza pomoc</button>
                <button class="tab" data-variant="otc"      role="tab" aria-selected="false" data-target="#s-otc">Leki OTC</button>
                <button class="tab" data-variant="rx"       role="tab" aria-selected="false" data-target="#s-rx">Leki na receptę</button>
                <button class="tab" data-variant="rehab"    role="tab" aria-selected="false" data-target="#s-rehab">Rehabilitacja / Profilaktyka</button>
                <button class="tab" data-variant="myths"    role="tab" aria-selected="false" data-target="#s-mity">Mity vs Fakty</button>
                <button class="tab" data-variant="faq"      role="tab" aria-selected="false" data-target="#s-faq">FAQ</button>
                <button class="tab" data-variant="dx"       role="tab" aria-selected="false" data-target="#s-dx">Choroby (beta)</button>
                <button class="tab" data-variant="docs"     role="tab" aria-selected="false" data-target="#s-docs">Lekarze</button>
            </div>
    
            <p class="hero-note">Edukacyjnie, nie diagnostycznie. W nagłej, ciężkiej dolegliwości lub przy czerwonych flagach — skorzystaj z <b>112</b> lub SOR.</p>
            <p class="legend">Zaznacz <strong>objawy</strong> — pasek <b>Ryzyko</b> oraz karty <b>Choroby</b>/<b>Lekarze</b> dopasują się automatycznie.</p>
        </div>
    </header>
    
    <main data-no-i18n="1">
        <section class="cards" aria-label="Karty z informacjami szczegółowymi">
            <article class="card" id="s-objawy" role="tabpanel" aria-hidden="false">
                <h3 id="h-obj">Objawy</h3>
                <ul class="clean" id="symp-common"></ul>
    
                <div class="subhead">Kiedy się niepokoić (czerwone flagi)</div>
                <div class="risk-mini" aria-label="Szacowany poziom ryzyka">
                    <small>Ryzyko: <span id="risk-label">niskie</span></small>
                    <span class="riskbar" id="riskbar"><span class="cursor" id="risk-cursor-card" style="left:0%"></span></span>
                </div>
                <ul class="clean" id="urgent"></ul>
    
                <div class="strip strip--warn" id="urgent-strip">
                    Masz objawy alarmowe? <strong>Nie zwlekaj.</strong>
                    <a class="cta" id="cta-112" href="tel:112" aria-label="Zadzwoń 112">Zadzwoń 112</a>
                </div>
    
                <div id="dx-hint" class="dx-hint" role="status" aria-live="polite">
                    Masz zaznaczone objawy. Zobacz edukacyjne podpowiedzi w <strong>Choroby</strong> lub przejdź do <strong>Lekarze</strong>.
                    <button type="button" id="dx-open">Choroby</button>
                    <button type="button" id="docs-open">Lekarze</button>
                </div>
            </article>
    
            <article class="card" id="s-przyczyny" role="tabpanel" aria-hidden="true">
                <h3 id="h-cause">Przyczyny</h3>
                <ul class="clean" id="causes"></ul>
            </article>
    
            <article class="card" id="s-aid" role="tabpanel" aria-hidden="true">
                <h3 id="h-aid">Pierwsza pomoc</h3>
                <ul class="clean" id="firstaid"></ul>
            </article>
    
            <article class="card" id="s-otc" role="tabpanel" aria-hidden="true">
                <h3 id="h-otc">Leki bez recepty (OTC)</h3>
                <ul class="clean" id="meds-otc"></ul>
            </article>
    
            <article class="card" id="s-rx" role="tabpanel" aria-hidden="true">
                <h3 id="h-rx">Leki na receptę (informacyjnie)</h3>
                <ul class="clean" id="meds-rx"></ul>
            </article>
    
            <article class="card" id="s-rehab" role="tabpanel" aria-hidden="true">
                <h3 id="h-rehab">Rehabilitacja / Profilaktyka</h3>
                <ul class="clean" id="rehab"></ul>
            </article>
    
            <article class="card" id="s-mity" role="tabpanel" aria-hidden="true">
                <h3 id="h-mity">Mity vs Fakty</h3>
                <ul class="clean" id="myths"></ul>
            </article>
    
            <article class="card" id="s-faq" role="tabpanel" aria-hidden="true">
                <h3 id="h-faq">FAQ</h3>
                <ul class="clean" id="faq"></ul>
            </article>
    
            <article class="card" id="s-dx" role="tabpanel" aria-hidden="true">
                <h3 id="h-dx">Choroby (beta)</h3>
                <p class="dx-note">Podpowiedzi edukacyjne z zaznaczonych objawów. Nie zastępują konsultacji.</p>
                <ul class="clean dx-list" id="dx-list"></ul>
            </article>
    
            <article class="card" id="s-docs" role="tabpanel" aria-hidden="true">
                <h3 id="h-docs">Lekarze</h3>
                <p class="docs-note">Kolejność: <b>POZ</b> → specjaliści. Czerwone flagi kierują do <b>SOR/112</b>.</p>
                <ul class="clean" id="docs-list"></ul>
            </article>
        </section>
    </main>

    <audio id="audio-click-1" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-sci-fi-click-2275.mp3" preload="auto"></audio>
    <audio id="audio-click-2" src="https://assets.mixkit.co/sfx/preview/mixkit-tech-click-1140.mp3" preload="auto"></audio>
    <script>
        const audioClick1 = document.getElementById('audio-click-1');
        const audioClick2 = document.getElementById('audio-click-2');
        let currentAudio = audioClick1;
        function playClickSound() {
            currentAudio.currentTime = 0;
            currentAudio.play().catch(e => console.warn("Audio play failed:", e));
            currentAudio = (currentAudio === audioClick1) ? audioClick2 : audioClick1;
        }
    </script>

    <script>
        /* --- język (localStorage) --- */
        (function langInit(){
            const KEY='bh.lang';
            const get = ()=> localStorage.getItem(KEY) || 'pl';
            const set = (v)=> localStorage.setItem(KEY, v);
            window.__getLang = get;
    
            const sel = document.getElementById('bhLangSelect');
            if (sel){
                sel.value = get();
                sel.addEventListener('change', ()=>{
                    set(sel.value||'pl');
                    // odśwież stronę, by UI/teksty przeładowały się w wybranym języku
                    location.replace(location.href);
                });
            }
        })();
        const L = ()=> (window.__getLang && window.__getLang()) || 'pl';
    
        /* --- i18n słowniki (UI) --- */
        const I18N={
            pl:{lang_label:'Język',back:'← Wróć',
                hero_note:'Edukacyjnie, nie diagnostycznie. W nagłej, ciężkiej dolegliwości lub przy czerwonych flagach — skorzystaj z <b>112</b> lub SOR.',
                legend:'Zaznacz <strong>objawy</strong> — pasek <b>Ryzyko</b> oraz karty <b>Choroby</b>/<b>Lekarze</b> dopasują się automatycznie.',
                tabs:{symptoms:'Objawy',causes:'Przyczyny',firstaid:'Pierwsza pomoc',otc:'Leki OTC',rx:'Leki na receptę',rehab:'Rehabilitacja / Profilaktyka',myths:'Mity vs Fakty',faq:'FAQ',dx:'Choroby (beta)',docs:'Lekarze'},
                symptoms_head:'Objawy', urgent_head:'Kiedy się niepokoić (czerwone flagi)',
                risk:'Ryzyko:', risk_low:'niskie', risk_mid:'umiarkowane', risk_high:'wysokie',
                urgent_strip:'Masz objawy alarmowe? <strong>Nie zwlekaj.</strong>', call_112:'Zadzwoń 112',
                hint:'Masz zaznaczone objawy. Zobacz edukacyjne podpowiedzi w <strong>Choroby</strong> lub przejdź do <strong>Lekarze</strong>.',
                hint_btn_dx:'Choroby', hint_btn_docs:'Lekarze',
                badge_sor:'pilnie SOR', badge_poz:'POZ', badge_doc:'POZ/specjalista',
                crumbs_details:'Szczegóły'},
            en:{lang_label:'Language',back:'← Back',
                hero_note:'Educational, not diagnostic. If symptoms are severe or red flags — use <b>112</b> / ER.',
                legend:'Select <strong>symptoms</strong> — <b>Risk</b> and <b>Conditions/Doctors</b> auto-adjust.',
                tabs:{symptoms:'Symptoms',causes:'Causes',firstaid:'First aid',otc:'OTC',rx:'Prescription',rehab:'Rehab / Prevention',myths:'Myths vs Facts',faq:'FAQ',dx:'Conditions (beta)',docs:'Doctors'},
                symptoms_head:'Symptoms', urgent_head:'When to worry (red flags)',
                risk:'Risk:', risk_low:'low', risk_mid:'moderate', risk_high:'high',
                urgent_strip:'Alarm signs? <strong>Don’t wait.</strong>', call_112:'Call 112',
                hint:'You selected symptoms. See hints in <strong>Conditions</strong> or open <strong>Doctors</strong>.',
                hint_btn_dx:'Conditions', hint_btn_docs:'Doctors',
                badge_sor:'urgent ER', badge_poz:'GP', badge_doc:'GP/specialist',
                crumbs_details:'Details'}
        };
    
        /* --- minimalne dane demonstracyjne (wystarczają do działania UI) --- */
        const BASE={pl:{rehabCommon:["Sen 7–9 h","Nawodnienie","Lekka aktywność"],
                    otcPain:[{t:"Paracetamol — ból/gorączka",audience:"all"},{t:"Ibuprofen — dorośli",audience:"adult"}],
                    urgentCommon:["Utrata przytomności","Duszność","Krwawienie nie do opanowania"]},
                en:{rehabCommon:["Sleep 7–9 h","Hydration","Light activity"],
                    otcPain:[{t:"Paracetamol — pain/fever",audience:"all"},{t:"Ibuprofen — adults",audience:"adult"}],
                    urgentCommon:["Loss of consciousness","Dyspnea","Uncontrolled bleeding"]}};
    
       const CONTENT_PL={
     glowa:{
       label:"Głowa (ból)",
       symptoms:[
         "Ucisk obustronny","Pulsujący jednostronny","Nadwrażliwość na światło",
         "Nudności/wymioty","Aura (mroczki, błyski)","Ból przy wysiłku","Nasilenie przy schylaniu"
       ],
       causes:[
         "Ból napięciowy (stres, brak snu, odwodnienie)",
         "Migrena (czasem z aurą)",
         "Zatokowy (zapalny, alergiczny)",
         "Odwodnienie / kofeinowy withdrawal",
         "Nadciśnienie (ból potylicy)",
         "Bruksizm / napięcie karku",
         "Polekowy ból głowy (nadużycie NLPZ)"
       ],
       firstaid:[
         "Nawodnienie, lekki posiłek",
         "Cisza, przyciemnione pomieszczenie",
         "Chłodny okład na czoło/kark",
         "Delikatna mobilizacja karku/rozluźnienie barków",
         "Higiena snu (stałe pory, ekran off ≥1h przed snem)"
       ],
       otc:[
         {t:"Paracetamol — ból/gorączka",audience:"all"},
         {t:"Ibuprofen — dorośli (jeśli brak przeciwwskazań)"},
         {t:"Naproxen — silny ból (tylko dorośli)",audience:"adult"},
         {t:"Leki na migrenę (np. ketoprofen, kwas acetylosalicylowy) — dorośli",audience:"adult"},
         {t:"Leki ziołowe uspokajające (np. melisa, waleriana)",audience:"all"}
       ],
       rx:[
         {t:"Tryptany (sumatryptan, zolmitryptan) — na migrenę",badge:"Rx",audience:"adult"},
         {t:"Betablokery (propranolol) — profilaktyka migreny",badge:"Rx",audience:"adult"},
         {t:"Przeciwpadaczkowe (topiramat) — profilaktyka migreny",badge:"Rx",audience:"adult"}
       ],
       rehab:[
         "Kinezjoterapia (ćwiczenia rozluźniające kark, barki)",
         "Trening autogenny, medytacja, mindfulness",
         "Terapia manualna (np. osteopatia, fizjoterapia)",
         "Odpowiednia ergonomia stanowiska pracy"
       ],
       myths:[
         {t:"Picie kawy pomaga na ból głowy.","Nie. Choć kofeina jest w niektórych lekach, jej nadmiar lub odstawienie może być przyczyną bólu.",a:"mit"},
         {t:"Bóle głowy to tylko wymysł.","Nie. Bóle mogą być objawem wielu poważnych chorób.",a:"fakt"},
         {t:"Migrena to tylko silny ból.","Nie. To choroba neurologiczna z wieloma objawami, np. światłowstręt i aura.",a:"mit"}
       ],
       faq:[
         {q:"Kiedy iść do lekarza?",a:"Gdy ból jest bardzo silny, nagły, towarzyszy mu gorączka, sztywność karku, wymioty, osłabienie lub drętwienie kończyn."},
         {q:"Czy ból głowy to zawsze migrena?",a:"Nie. Istnieje wiele rodzajów bólu głowy, w tym napięciowy, zatokowy i klasterowy."},
         {q:"Czy można wyleczyć migrenę?",a:"Nie. Można łagodzić objawy i zmniejszać częstotliwość ataków, ale nie jest to choroba w pełni wyleczalna."}
       ],
       dx:[
         {t:"Migrena z aurą/bez aury",conf:95,badge:"poz"},
         {t:"Ból głowy napięciowy",conf:90,badge:"poz"},
         {t:"Zapalenie zatok",conf:80,badge:"poz"},
         {t:"Polekowy ból głowy",conf:70,badge:"poz"},
         {t:"Krwotok podpajęczynówkowy",conf:20,badge:"sor"},
         {t:"Guz mózgu",conf:10,badge:"sor"}
       ],
       docs:[
         {t:"Lekarz rodzinny (POZ)",badge:"poz"},
         {t:"Neurolog",badge:"spec"},
         {t:"Laryngolog (gdy podejrzenie zatok)",badge:"spec"},
         {t:"Okulista",badge:"spec"}
       ],
       risk:[{s:3,v:25},{s:4,v:50},{s:5,v:75},{s:6,v:90}]
     }
       };
    
        const CONTENT_EN={
     glowa:{
       label:"Head (pain)",
       symptoms:[
         "Bilateral pressure","Unilateral throbbing","Sensitivity to light",
         "Nausea/vomiting","Aura (spots, flashes)","Pain with exertion","Worsening when bending over"
       ],
       causes:[
         "Tension headache (stress, lack of sleep, dehydration)",
         "Migraine (with or without aura)",
         "Sinusitis (inflammatory, allergic)",
         "Dehydration / caffeine withdrawal",
         "Hypertension (occipital pain)",
         "Bruxism / neck tension",
         "Medication overuse headache (analgesic abuse)"
       ],
       firstaid:[
         "Hydration, light meal",
         "Quiet, darkened room",
         "Cold compress on forehead/neck",
         "Gentle neck mobilization/shoulder relaxation",
         "Sleep hygiene (regular schedule, screen off ≥1h before bed)"
       ],
       otc:[
         {t:"Paracetamol — pain/fever",audience:"all"},
         {t:"Ibuprofen — adults (if no contraindications)",audience:"adult"},
         {t:"Naproxen — severe pain (adults only)",audience:"adult"},
         {t:"Migraine medications (e.g., ketoprofen, acetylsalicylic acid) — adults",audience:"adult"},
         {t:"Herbal sedatives (e.g., lemon balm, valerian)",audience:"all"}
       ],
       rx:[
         {t:"Triptans (sumatriptan, zolmitriptan) — for migraines",badge:"Rx",audience:"adult"},
         {t:"Beta-blockers (propranolol) — migraine prophylaxis",badge:"Rx",audience:"adult"},
         {t:"Anticonvulsants (topiramate) — migraine prophylaxis",badge:"Rx",audience:"adult"}
       ],
       rehab:[
         "Kinesiotherapy (neck/shoulder relaxation exercises)",
         "Autogenic training, meditation, mindfulness",
         "Manual therapy (e.g., osteopathy, physical therapy)",
         "Proper ergonomics of the workplace"
       ],
       myths:[
         {t:"Drinking coffee helps with headaches.","No. While caffeine is in some medications, its overuse or withdrawal can cause headaches.",a:"myth"},
         {t:"Headaches are all in your head.","No. Headaches can be symptoms of many serious medical conditions.",a:"fact"},
         {t:"A migraine is just a bad headache.","No. It's a neurological disease with symptoms like light sensitivity and aura.",a:"myth"}
       ],
       faq:[
         {q:"When should I see a doctor?",a:"When pain is very severe, sudden, accompanied by fever, stiff neck, vomiting, weakness, or numbness in limbs."},
         {q:"Is a headache always a migraine?",a:"No. There are many types of headaches, including tension, sinus, and cluster headaches."},
         {q:"Can a migraine be cured?",a:"No. Symptoms can be managed and frequency reduced, but it's not a fully curable disease."}
       ],
       dx:[
         {t:"Migraine with/without aura",conf:95,badge:"poz"},
         {t:"Tension headache",conf:90,badge:"poz"},
         {t:"Sinusitis",conf:80,badge:"poz"},
         {t:"Medication overuse headache",conf:70,badge:"poz"},
         {t:"Subarachnoid hemorrhage",conf:20,badge:"sor"},
         {t:"Brain tumor",conf:10,badge:"sor"}
       ],
       docs:[
         {t:"General Practitioner (GP)",badge:"poz"},
         {t:"Neurologist",badge:"spec"},
         {t:"Laryngologist (for sinus suspicion)",badge:"spec"},
         {t:"Ophthalmologist",badge:"spec"}
       ],
       risk:[{s:3,v:25},{s:4,v:50},{s:5,v:75},{s:6,v:90}]
     }
       };
    
        // Globalna mapa danych
        const DATA = {pl: CONTENT_PL, en: CONTENT_EN};
    
        const i18n_t = (k) => (I18N[L()] && I18N[L()][k]) || (I18N['pl'] && I18N['pl'][k]) || k;
    
    
        // GŁÓWNA LOGIKA
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const typ = urlParams.get('typ');
            const czesc = urlParams.get('czesc');
            const label = urlParams.get('label');
    
            if (!typ || !czesc) {
                // To jest strona bez parametrów (np. instrukcja pierwszej pomocy)
                // W tym przypadku nie chcemy ładować danych z mapy, tylko wyświetlić instrukcję
                // Przekieruj do funkcji, która obsłuży porady
                if (typ === 'porada') {
                    handlePorada(czesc, label);
                    return;
                }
                document.body.innerHTML = '<h1>Brak danych.</h1><p>Wróć do <a href="/">strony głównej</a>.</p>';
                return;
            }
    
            const langData = DATA[L()][czesc];
            const baseData = BASE[L()];
            const allSymptoms = [...(langData?.symptoms || []), ...(langData?.urgent || [])];
    
            const elements = {
                crumbs: document.getElementById('crumbs'),
                crumbTyp: document.getElementById('crumb-typ'),
                crumbLabel: document.getElementById('crumb-label'),
                labelText: document.getElementById('label-text'),
                labelIcon: document.getElementById('label-icon'),
                sympCommonList: document.getElementById('symp-common'),
                urgentList: document.getElementById('urgent'),
                causesList: document.getElementById('causes'),
                aidList: document.getElementById('firstaid'),
                otcList: document.getElementById('meds-otc'),
                rxList: document.getElementById('meds-rx'),
                rehabList: document.getElementById('rehab'),
                mythsList: document.getElementById('myths'),
                faqList: document.getElementById('faq'),
                dxList: document.getElementById('dx-list'),
                docsList: document.getElementById('docs-list'),
                urgentStrip: document.getElementById('urgent-strip'),
                dxHint: document.getElementById('dx-hint'),
                dxOpenBtn: document.getElementById('dx-open'),
                docsOpenBtn: document.getElementById('docs-open'),
                riskbar: document.getElementById('riskbar'),
                riskCursor: document.getElementById('risk-cursor-card'),
                riskLabel: document.getElementById('risk-label'),
                tabs: document.querySelectorAll('.tab'),
                cards: document.querySelectorAll('.card'),
                steps: document.querySelectorAll('.step'),
                sideNav: document.getElementById('bhSideNav')
            };
    
            let checkedSymptoms = new Set();
    
            function updateUI() {
                // UI & Crumbs
                elements.crumbTyp.textContent = typ;
                elements.crumbLabel.textContent = langData?.label || label || czesc;
                elements.labelText.textContent = langData?.label || label || czesc;
                
                // Render list items
                const renderList = (list, items, prefix = '') => {
                    list.innerHTML = '';
                    if (!items || items.length === 0) {
                        list.innerHTML = '<li>Brak danych.</li>';
                        return;
                    }
                    items.forEach(item => {
                        const li = document.createElement('li');
                        li.dataset.item = item.t || item;
                        if (prefix === 'symptoms' || prefix === 'urgent') {
                            li.innerHTML = `<span class="cb"></span>${item}`;
                            li.addEventListener('click', () => {
                                li.classList.toggle('li-checked');
                                li.querySelector('.cb').classList.toggle('checked');
                                if (checkedSymptoms.has(item)) {
                                    checkedSymptoms.delete(item);
                                } else {
                                    checkedSymptoms.add(item);
                                    
                                    // Step logic
                                    elements.steps[0].classList.add('active');
                                    elements.steps[1].classList.add('active');
                                }
                                updateRisk();
                                updateDxAndDocsCards();
                                playClickSound();
                            });
                        } else if (prefix === 'meds') {
                            li.innerHTML = `<strong>${item.t}</strong>${item.audience ? ' <small>(' + item.audience + ')</small>' : ''}`;
                        } else if (prefix === 'myths') {
                            li.innerHTML = `<strong>${item.t}</strong><br>${item.a}`;
                            li.dataset.type = item.a;
                        } else if (prefix === 'faq') {
                            li.innerHTML = `<strong>${item.q}</strong><br>${item.a}`;
                        } else if (prefix === 'dx') {
                            li.innerHTML = `<div style="display:flex;align-items:center;gap:12px;width:100%"><span class="dx-ico">🦠</span><span>${item.t}</span>
                                <div class="dx-meta"><span class="dx-badge ${item.badge}">${item.badge === 'sor' ? i18n_t('badge_sor') : i18n_t('badge_poz')}</span><small style="color:#a8c1ff">Sugerowana pewność</small><span class="conf-wrap"><span class="conf-bar" style="width:${item.conf}%"></span></span></div></div>`;
                        } else if (prefix === 'docs') {
                            li.innerHTML = `<div style="display:flex;align-items:center;gap:12px;width:100%"><span class="dx-ico">🧑‍⚕️</span><span>${item.t}</span><div class="dx-meta"><span class="doc-badge ${item.badge}">${item.badge === 'poz' ? i18n_t('badge_poz') : i18n_t('badge_doc')}</span></div></div>`;
                        } else {
                            li.innerHTML = item.t || item;
                        }
                        list.appendChild(li);
                    });
                };
    
                renderList(elements.sympCommonList, langData?.symptoms);
                renderList(elements.urgentList, langData?.urgent);
                renderList(elements.causesList, langData?.causes);
                renderList(elements.aidList, langData?.firstaid);
                renderList(elements.otcList, langData?.otc);
                renderList(elements.rxList, langData?.rx);
                renderList(elements.rehabList, langData?.rehab);
                renderList(elements.mythsList, langData?.myths, 'myths');
                renderList(elements.faqList, langData?.faq, 'faq');
                renderList(elements.dxList, langData?.dx, 'dx');
                renderList(elements.docsList, langData?.docs, 'docs');
                
                // Tabs
                elements.tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        elements.tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
                        tab.setAttribute('aria-selected', 'true');
                        elements.cards.forEach(c => c.setAttribute('aria-hidden', 'true'));
                        const target = document.querySelector(tab.dataset.target);
                        if (target) {
                            target.setAttribute('aria-hidden', 'false');
                            window.scrollTo({top: 0, behavior: 'smooth'});
                        }
                        
                        if(tab.dataset.variant === 'dx' || tab.dataset.variant === 'docs') {
                            elements.steps[2].classList.add('active');
                            elements.steps[3].classList.add('active');
                        }
                        playClickSound();
                    });
                });
    
                // Przewijanie do karty
                elements.sideNav.addEventListener('click', (e) => {
                    const btn = e.target.closest('button');
                    if (btn) {
                        const targetId = btn.dataset.target;
                        const tabBtn = document.querySelector(`.tab[data-target="${targetId}"]`);
                        if (tabBtn) {
                            tabBtn.click();
                        }
                    }
                });
    
                // Update Risk & Hints
                function updateRisk() {
                    const checkedCount = checkedSymptoms.size;
                    let riskValue = 0;
                    let riskText = i18n_t('risk_low');
                    
                    if (langData?.risk) {
                        const riskThreshold = langData.risk.find(r => checkedCount >= r.s);
                        if (riskThreshold) {
                            riskValue = riskThreshold.v;
                            if (riskValue > 70) riskText = i18n_t('risk_high');
                            else if (riskValue > 30) riskText = i18n_t('risk_mid');
                        }
                    }
    
                    // Check for urgent symptoms
                    const hasUrgent = Array.from(checkedSymptoms).some(symp => (langData?.urgent || []).includes(symp));
                    if (hasUrgent) {
                        elements.urgentStrip.style.display = 'block';
                        riskValue = 100;
                        riskText = i18n_t('risk_high');
                    } else {
                        elements.urgentStrip.style.display = 'none';
                    }
    
                    elements.riskCursor.style.left = `${riskValue}%`;
                    elements.riskLabel.textContent = riskText;
    
                    if (checkedCount > 0) {
                        elements.dxHint.classList.add('show');
                        elements.dxOpenBtn.addEventListener('click', () => {
                            const dxTab = document.querySelector('.tab[data-target="#s-dx"]');
                            if (dxTab) dxTab.click();
                        });
                        elements.docsOpenBtn.addEventListener('click', () => {
                            const docsTab = document.querySelector('.tab[data-target="#s-docs"]');
                            if (docsTab) docsTab.click();
                        });
                    } else {
                        elements.dxHint.classList.remove('show');
                    }
                }
    
                function updateDxAndDocsCards() {
                    const checkedCount = checkedSymptoms.size;
                    const dxCard = document.getElementById('s-dx');
                    const docsCard = document.getElementById('s-docs');
                    const dxTab = document.querySelector('.tab[data-target="#s-dx"]');
                    const docsTab = document.querySelector('.tab[data-target="#s-docs"]');
    
                    if (checkedCount > 0) {
                        dxCard.classList.add('pulse-blue');
                        docsCard.classList.add('pulse-blue');
                        dxTab.classList.add('pulse-blue');
                        docsTab.classList.add('pulse-blue');
                    } else {
                        dxCard.classList.remove('pulse-blue');
                        docsCard.classList.remove('pulse-blue');
                        dxTab.classList.remove('pulse-blue');
                        docsTab.classList.remove('pulse-blue');
                    }
                }
            }
    
            // Sidebar logic
            window.addEventListener('scroll', () => {
                if (window.scrollY > 200) {
                    elements.sideNav.classList.add('show');
                } else {
                    elements.sideNav.classList.remove('show');
                }
    
                elements.tabs.forEach(tab => {
                    const targetSection = document.querySelector(tab.dataset.target);
                    if (targetSection) {
                        const rect = targetSection.getBoundingClientRect();
                        const sideBtn = elements.sideNav.querySelector(`[data-target="${tab.dataset.target}"]`);
                        if (rect.top <= 100 && rect.bottom >= 100) {
                            elements.sideNav.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
                            sideBtn.classList.add('active');
                        }
                    }
                });
            });
    
            // Initial call
            updateUI();
        })();
    </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(reg => console.log('SW registered:', reg.scope))
                .catch(err => console.error('SW failed:', err));
        }
    </script>
    
    <script src="/assets/a2hs.js?v=1"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[href]').forEach(a => {
                if (a.hostname !== window.location.hostname) {
                    a.setAttribute('target', '_blank');
                    a.setAttribute('rel', 'noopener noreferrer');
                }
            });
        });
    </script>

</body>
</html>
